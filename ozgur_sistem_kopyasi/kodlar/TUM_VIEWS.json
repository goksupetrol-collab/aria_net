[
  {
    "schema": "dbo",
    "name": "___Son_Car_Alc_Hrk",
    "full_name": "dbo.___Son_Car_Alc_Hrk",
    "definition": "CREATE VIEW [dbo].___Son_Car_Alc_Hrk\r\nAS\r\n\r\n  SELECT t.cartip,t.carkod,son_id = MAX(t.id)\r\n  FROM carihrk t\r\n   JOIN (SELECT cartip,carkod,\r\n   max(tarih+cast(saat as datetime)) as tarih\r\n  FROM carihrk where ISDATE(saat)=1 and sil=0 \r\n  and alacak>0\r\nGROUP BY cartip,carkod) AS u ON\r\n t.cartip = u.cartip\r\n AND t.carkod = u.carkod and ISDATE(saat)=1\r\n and t.tarih+cast(saat as datetime)=u.tarih\r\nGROUP BY t.cartip,t.carkod"
  },
  {
    "schema": "dbo",
    "name": "___Son_Car_Brc_Hrk",
    "full_name": "dbo.___Son_Car_Brc_Hrk",
    "definition": "CREATE VIEW [dbo].___Son_Car_Brc_Hrk\r\nAS\r\n\r\n  SELECT t.cartip,t.carkod,son_id = MAX(t.id)\r\n  FROM carihrk t\r\n   JOIN (SELECT cartip,carkod,\r\n   max(tarih+cast(saat as datetime)) as tarih\r\n  FROM carihrk where ISDATE(saat)=1 and sil=0 \r\n  and Borc>0\r\nGROUP BY cartip,carkod) AS u ON\r\n t.cartip = u.cartip\r\n AND t.carkod = u.carkod and ISDATE(saat)=1\r\n and t.tarih+cast(saat as datetime)=u.tarih\r\nGROUP BY t.cartip,t.carkod"
  },
  {
    "schema": "dbo",
    "name": "___Son_Fis_Hrk",
    "full_name": "dbo.___Son_Fis_Hrk",
    "definition": "CREATE VIEW [dbo].___Son_Fis_Hrk\r\nAS\r\n  \r\n SELECT t.cartip,t.carkod,son_id = MAX(t.id)\r\n  FROM veresimas t WITH (NOLOCK)\r\n   JOIN (SELECT cartip,carkod,\r\n   max(tarih+cast(saat as datetime)) as tarih\r\n  FROM veresimas WITH (NOLOCK) WHERE sil=0\r\nGROUP BY cartip,carkod) AS u ON\r\n t.cartip = u.cartip\r\n AND t.carkod = u.carkod\r\n and t.tarih+cast(saat as datetime)=u.tarih\r\n and t.sil=0\r\nGROUP BY t.cartip,t.carkod"
  },
  {
    "schema": "dbo",
    "name": "__CariOtoFisVadeFarkTutar",
    "full_name": "dbo.__CariOtoFisVadeFarkTutar",
    "definition": "CREATE VIEW dbo.__CariOtoFisVadeFarkTutar \r\nAS\r\n  SELECT carkod,cartip,car_id,borc As FisOtoVadeFarkTutar \r\n  from carihrk with (nolock) where islmtip='VAD' and islmhrk='OFV'\r\n  and sil=0"
  },
  {
    "schema": "dbo",
    "name": "__Son_Cek_Hrk",
    "full_name": "dbo.__Son_Cek_Hrk",
    "definition": "CREATE VIEW dbo.__Son_Cek_Hrk \r\nAs\r\nSELECT t.cekid,t.drm drm,(t.tarih+t.Saat) as tarih,son_id = t.id\r\n  FROM cekhrk t WITH (NOLOCK) JOIN \r\n  (SELECT cekid,MAX(id) as cekhrkid FROM cekhrk WITH (NOLOCK) \r\n  GROUP BY cekid) AS u ON\r\n t.cekid = u.cekid and t.id=u.cekhrkid"
  },
  {
    "schema": "dbo",
    "name": "_Bakiye_Stok_Miktar",
    "full_name": "dbo._Bakiye_Stok_Miktar",
    "definition": "CREATE VIEW [dbo]._Bakiye_Stok_Miktar\r\nAS\r\n  select h.stktip,h.stkod,\r\n  isnull( case when \r\n  sum(h.giren)>0 then\r\n  (sum(h.giren*h.brmfiykdvli)) / sum(h.giren)\r\n  else 0 end , 0)  ortals_fiykdvli,\r\n  isnull(case when sum(h.giren)>0 then\r\n  (sum(h.giren*(h.brmfiykdvli /  case when kdvyuz>0 then (1.00+kdvyuz) else 1 end   ) )) / sum(h.giren)\r\n  else 0 end , 0)  ortals_fiykdvsiz,\r\n  /*-iade listesi */\r\n  isnull(sum(aiademik),0) as alsiade_mik,\r\n  isnull(sum(aiademik*brmfiykdvli),0) alsiade_topkdvli,\r\n  isnull(sum(siademik),0) as satiade_mik,\r\n  isnull(sum(siademik*brmfiykdvli),0) as satiade_topkdvli,\r\n  /*-miktarlar */\r\n  isnull(sum(h.giren-h.cikan),0) as mev_miktar,\r\n  isnull(sum(h.giren),0) as gir_miktar,\r\n  isnull(sum(giren*brmfiykdvli),0) gir_topkdvli,\r\n  isnull(sum(giren*(brmfiykdvli/ case when kdvyuz>0 then (1.00+kdvyuz) else 1 end   )),0) as gir_topkdvsiz,\r\n  isnull(sum(h.cikan),0) as cik_miktar,\r\n  isnull(sum(cikan*brmfiykdvli),0) as cik_topkdvli,\r\n  isnull(sum(cikan*(brmfiykdvli/ case when kdvyuz>0 then (1.00+kdvyuz) else 1 end  )),0) as cik_topkdvsiz,\r\n\r\n  isnull(Sum(case when h.islmtip='HARGIRCIK' then \r\n  (h.giren-h.cikan) else 0 end),0)\r\n   as har_miktar\r\n  from stkhrk as h  WITH (NOLOCK)   where h.sil=0\r\n  group by h.stktip,h.stkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_AracSayi",
    "full_name": "dbo._Cari_AracSayi",
    "definition": "create VIEW [dbo]._Cari_AracSayi\r\nAS\r\n  SELECT cartip,kod,count(id) Arac_Sayi from otomasgenkod\r\n  where cartip='carikart'   group by cartip,kod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Avans_Bakiye",
    "full_name": "dbo._Cari_Avans_Bakiye",
    "definition": "CREATE VIEW [dbo]._Cari_Avans_Bakiye\r\n AS\r\n select h.cartip,h.carkod,\r\n isnull(sum(borc),0) as borc,\r\n isnull(sum(alacak),0) as alacak,\r\n isnull(sum(borc-alacak),0) as bakiye\r\n from carihrk as h with (nolock) where isnull(h.CariAvans,0)=1 and h.sil=0\r\n group by h.cartip,h.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Cek_Bakiye",
    "full_name": "dbo._Cari_Cek_Bakiye",
    "definition": "CREATE VIEW [dbo]._Cari_Cek_Bakiye\r\nAS\r\n  SELECT h.cartip,h.carkod,\r\n  ISNULL(SUM((borc-alacak)),0) as cek_bakiye\r\n  FROM carihrk as h\r\n  inner join cekkart as k\r\n  on h.masterid=k.cekid and k.drm\r\n  /*not in ('TKT','ELT','ODE') */\r\n  in ('POR','TAK','KSN')\r\n  where h.sil=0\r\n  and (\r\n  (h.cartip=k.cartip and h.carkod=k.carkod)\r\n  or (h.cartip=k.vercartip and h.carkod=k.vercarkod))\r\n  and h.islmtip='CEK'\r\n  group by h.cartip,h.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Ciro_Bakiye",
    "full_name": "dbo._Cari_Ciro_Bakiye",
    "definition": "CREATE VIEW [dbo]._Cari_Ciro_Bakiye\r\nAS\r\n  SELECT h.cartip,h.carkod,\r\n  ISNULL(SUM((borc-alacak)),0) as cek_bakiye\r\n  FROM carihrk as h\r\n  inner join cekkart as k\r\n  on h.masterid=k.cekid and k.drm\r\n  in ('CIR')\r\n  where h.sil=0\r\n  and k.vadetar>=getdate()\r\n  and (\r\n  (h.cartip=k.cartip and h.carkod=k.carkod)\r\n  or (h.cartip=k.vercartip and h.carkod=k.vercarkod))\r\n  and h.islmtip='CEK'\r\n  group by h.cartip,h.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Fis_Bakiye",
    "full_name": "dbo._Cari_Fis_Bakiye",
    "definition": "CREATE VIEW [dbo]._Cari_Fis_Bakiye\r\nAS\r\n  SELECT v.carkod,v.cartip,\r\n  COUNT(*) fis_adet,\r\n  ISNULL(SUM(case when fistip='FISVERSAT' then toptut-isktop else -(toptut-isktop) end),0)\r\n   as fis_bakiye,\r\n  ISNULL(SUM(case when fistip='FISVERSAT' then toptut-isktop else 0 end),0)\r\n   as fis_brcbakiye,\r\n  ISNULL(SUM(case when fistip='FISALCSAT' then toptut-isktop else 0 end),0)\r\n   as fis_alcbakiye\r\n  from veresimas as v WITH (NOLOCK)\r\n  where v.sil=0 and v.kayok=1 and Isnull(v.Devir,0)=0 and v.aktip in ('BK','BL','HV')\r\n  /*and ( (varno>0 and varok=1) or (varno=0)) and (yertip<>'havuzislem') */\r\n  group by v.cartip,v.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Fis_Bakiye_Ay",
    "full_name": "dbo._Cari_Fis_Bakiye_Ay",
    "definition": "CREATE VIEW [dbo]._Cari_Fis_Bakiye_Ay\r\nAS\r\n  SELECT v.carkod,v.cartip,\r\n  COUNT(*) fis_adet,\r\n  year(v.tarih) as Yil,\r\n  month(v.tarih) as Ay,\r\n  ISNULL(SUM(case when fistip='FISVERSAT' then \r\n  toptut-isktop else -(toptut-isktop) end),0)\r\n  as fis_bakiye,\r\n  ISNULL(SUM(case when fistip='FISVERSAT' then toptut-isktop else 0 end),0)\r\n   as fis_brcbakiye,\r\n  ISNULL(SUM(case when fistip='FISALCSAT' then toptut-isktop else 0 end),0)\r\n   as fis_alcbakiye\r\n  from veresimas as v WITH (NOLOCK)\r\n  where v.sil=0 and v.kayok=1 \r\n  and v.aktip in ('BK','BL','HV')\r\n  group by v.cartip,v.carkod,\r\n  year(v.tarih),month(v.tarih)"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Fis_Bakiye_Kap",
    "full_name": "dbo._Cari_Fis_Bakiye_Kap",
    "definition": "CREATE VIEW [dbo]._Cari_Fis_Bakiye_Kap\r\nAS\r\n  SELECT v.carkod,v.cartip,\r\n  COUNT(*) fis_adet,\r\n  ISNULL(SUM(case when fistip='FISVERSAT' then toptut-isktop else -(toptut-isktop) end),0)\r\n   as fis_bakiye,\r\n  ISNULL(SUM(case when fistip='FISVERSAT' then toptut-isktop else 0 end),0)\r\n   as fis_brcbakiye,\r\n  ISNULL(SUM(case when fistip='FISALCSAT' then toptut-isktop else 0 end),0)\r\n   as fis_alcbakiye\r\n  from veresimas as v WITH (NOLOCK) \r\n  where v.sil=0 and v.kayok=1 and v.aktip in ('BK','BL')\r\n  and ( (varno>0 and varok=1) or (varno=0)) and (yertip<>'havuzislem')\r\n  group by v.cartip,v.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Hrk_Bakiye",
    "full_name": "dbo._Cari_Hrk_Bakiye",
    "definition": "CREATE VIEW [dbo]._Cari_Hrk_Bakiye\r\n AS\r\n select h.cartip,h.carkod,\r\n max(h.tarih) as sonhrk_tarih,\r\n /*max(case when borc>0 then h.tarih else null end ) sonbrc_tarih, */\r\n /*max(case when alacak>0 then h.tarih else null end ) sonalc_tarih, */\r\n isnull(sum(borc),0) as borc,\r\n isnull(sum(alacak),0) as alacak,\r\n isnull(sum(borc-alacak),0) as bakiye\r\n from carihrk as h with (nolock) where isnull(h.CariAvans,0)=0 and  h.sil=0\r\n group by h.cartip,h.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Hrk_Bakiye_Ay",
    "full_name": "dbo._Cari_Hrk_Bakiye_Ay",
    "definition": "CREATE VIEW [dbo]._Cari_Hrk_Bakiye_Ay\r\n AS\r\n select h.cartip,h.carkod,\r\n year(h.tarih) as Yil,\r\n month(h.tarih) as Ay,\r\n isnull(sum(borc),0) as borc,\r\n isnull(sum(alacak),0) as alacak,\r\n isnull(sum(borc-alacak),0) as bakiye\r\n from carihrk as h where h.sil=0\r\n group by h.cartip,h.carkod,\r\n year(h.tarih),month(h.tarih)"
  },
  {
    "schema": "dbo",
    "name": "_Cari_irsaliye_Bakiye",
    "full_name": "dbo._Cari_irsaliye_Bakiye",
    "definition": "CREATE VIEW [dbo]._Cari_irsaliye_Bakiye\r\nAS\r\n  SELECT v.carkod,v.cartip,\r\n  COUNT(*) irs_adet,\r\n  ISNULL(SUM(case when gctip=2 then genel_top else -(genel_top) end),0)\r\n   as irs_bakiye,\r\n  ISNULL(SUM(case when gctip=2 then genel_top else 0 end),0)\r\n   as irs_brcbakiye,\r\n  ISNULL(SUM(case when gctip=1 then genel_top else 0 end),0)\r\n   as irs_alcbakiye\r\n  from irsaliyemas as v\r\n  where v.sil=0 and v.kayok=1 and v.aktip in ('BK')\r\n  group by v.cartip,v.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Son_Alc_Hrk",
    "full_name": "dbo._Cari_Son_Alc_Hrk",
    "definition": "CREATE VIEW [dbo]._Cari_Son_Alc_Hrk\r\nAS\r\n  SELECT v.carkod,\r\n  v.cartip,\r\n  (case when alacak>0 then v.tarih else null end ) sonalc_tarih,\r\n  ISNULL((case when alacak>0 then v.alacak\r\n  else 0 end),0) as sonalc_tutar FROM carihrk as v\r\n  inner join ___Son_Car_Alc_Hrk as h\r\n  on v.sil=0 and v.carkod=h.carkod and v.cartip=h.cartip\r\n  and v.id=h.son_id"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Son_Brc_Hrk",
    "full_name": "dbo._Cari_Son_Brc_Hrk",
    "definition": "CREATE VIEW [dbo]._Cari_Son_Brc_Hrk\r\nAS\r\n  SELECT v.carkod,\r\n  v.cartip,\r\n  (case when borc>0 then v.tarih else null end ) sonbrc_tarih,\r\n  ISNULL((case when borc>0 then v.borc\r\n  else 0 end),0) as sonbrc_tutar\r\n  FROM carihrk as v\r\n  inner join ___Son_Car_Brc_Hrk as h\r\n  on v.sil=0 and v.carkod=h.carkod and v.cartip=h.cartip\r\n  and v.id=h.son_id"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Son_Fis",
    "full_name": "dbo._Cari_Son_Fis",
    "definition": "CREATE VIEW [dbo]._Cari_Son_Fis\r\nAS\r\n  SELECT v.carkod,v.cartip,\r\n  v.tarih as fis_tarih,\r\n  ISNULL((case when v.fistip='FISVERSAT' then v.toptut\r\n  else -v.toptut end),0) as fis_tutar FROM veresimas as v\r\n  WITH (NOLOCK) \r\n  inner join ___Son_Fis_Hrk as h WITH (NOLOCK)\r\n  on v.sil=0 and v.carkod=h.carkod and v.cartip=h.cartip\r\n  and v.id=h.son_id"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Teminat",
    "full_name": "dbo._Cari_Teminat",
    "definition": "CREATE VIEW [dbo]._Cari_Teminat \r\nAS\r\n  SELECT kod,tip,sum(tutar) tutar,max(ack) ack from cariteminat\r\n  where tip='TMK'\r\n  group by kod,tip"
  },
  {
    "schema": "dbo",
    "name": "_Cari_Teminat_Ilk",
    "full_name": "dbo._Cari_Teminat_Ilk",
    "definition": "CREATE VIEW [dbo]._Cari_Teminat_Ilk\r\nAS\r\n select t.kod,'carikart' as CarTip,t.tur,Tutar,ack From cariteminat as t \r\n where t.id in (Select min(id) From cariteminat group by Kod)"
  },
  {
    "schema": "dbo",
    "name": "_Plaka_Limit_Cari_Miktar",
    "full_name": "dbo._Plaka_Limit_Cari_Miktar",
    "definition": "CREATE VIEW [dbo]._Plaka_Limit_Cari_Miktar\r\nAS\r\n  SELECT v.cartip,v.carkod,\r\n  isnull(sum(h.mik),0) as miktarlt,\r\n  isnull(sum(h.mik*h.brmfiy),0) as lttutar\r\n  from veresimas as v WITH (NOLOCK) \r\n  inner join veresihrk as h WITH (NOLOCK)\r\n  on h.verid=v.verid and h.sil=0 and v.sil=0\r\n  and h.stktip='akykt' and v.aktip='BK'\r\n  group by v.cartip,v.carkod"
  },
  {
    "schema": "dbo",
    "name": "_Plaka_Limit_Miktar",
    "full_name": "dbo._Plaka_Limit_Miktar",
    "definition": "CREATE VIEW [dbo]._Plaka_Limit_Miktar\r\nAS\r\n  SELECT v.cartip,v.carkod,v.plaka,\r\n  h.stkod,\r\n  isnull(sum(h.mik),0) as miktarlt,\r\n  isnull(sum(h.mik*h.brmfiy),0) as lttutar\r\n  from veresimas as v WITH (NOLOCK) \r\n  inner join veresihrk as h WITH (NOLOCK)\r\n  on h.verid=v.verid and h.sil=0 and v.sil=0\r\n  and h.stktip='akykt' and v.aktip='BK'\r\n  group by v.cartip,v.carkod,h.stkod,\r\n  v.plaka"
  },
  {
    "schema": "dbo",
    "name": "_Stok_FirmaAlisFiyat",
    "full_name": "dbo._Stok_FirmaAlisFiyat",
    "definition": "create VIEW [dbo]._Stok_FirmaAlisFiyat\r\nAS\r\n  SELECT t.id,t.Firmano,t.stktip,t.stkod,\r\n  t.brmfiykdvli AlisFiyatKdvli,\r\n  Son_Id = u.Id \r\n  FROM stkhrk t WITH (NOLOCK) JOIN \r\n  (SELECT Firmano,stktip,stkod,\r\n  MAX(id) as Id \r\n  FROM stkhrk WITH (NOLOCK) \r\n  where Giren>0 and Sil=0 and fatid>0\r\n  GROUP BY Firmano,stktip,stkod) AS u ON\r\n  (t.id)=u.Id"
  },
  {
    "schema": "dbo",
    "name": "_Stok_FirmaMiktar",
    "full_name": "dbo._Stok_FirmaMiktar",
    "definition": "CREATE VIEW [dbo]._Stok_FirmaMiktar\r\nAS\r\n SELECT h.Firmano,h.stktip,h.stkod,Sum(h.giren-h.Cikan) as Miktar\r\n From StkHrk as h with (nolock) where Sil=0\r\n Group By h.Firmano,h.stktip,h.stkod"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Banka",
    "full_name": "dbo.Bakiye_Banka",
    "definition": "CREATE VIEW [dbo].Bakiye_Banka\r\n AS\r\n SELECT k.kod,\r\n  ISNULL(SUM(ROUND(h.borc,sis.Para_Ondalik)),0) as borc,\r\n  ISNULL(SUM(ROUND(h.alacak,sis.Para_Ondalik)),0) as alacak\r\n  FROM bankakart as k \r\n  left join sistemtanim as sis on 1=1\r\n  left join bankahrk as h on h.bankod=k.kod\r\n  and h.sil=0 group by k.kod"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Cari",
    "full_name": "dbo.Bakiye_Cari",
    "definition": "CREATE VIEW [dbo].Bakiye_Cari\r\nAS\r\n select k.kod,\r\n k.grp1,k.grp2,k.grp3,\r\n isnull(h.borc,0) borc,\r\n isnull(h.alacak,0) alacak,\r\n isnull(h.bakiye,0) car_bakiye,\r\n h.sonhrk_tarih as sonhrk_tarih,\r\n chb.sonbrc_tarih as sonbrc_tarih,\r\n cha.sonalc_tarih as sonalc_tarih,\r\n \r\n isnull(cha.sonalc_tutar,0) as sonalc_tutar,\r\n isnull(chb.sonbrc_tutar,0) as sonbrc_tutar,\r\n \r\n f.fis_tarih as son_fis_tarih,\r\n isnull(fisbak.fis_alcbakiye,0) fis_alcbakiye,\r\n isnull(fisbak.fis_brcbakiye,0) fis_brcbakiye,\r\n \r\n isnull(irs.irs_alcbakiye,0) irs_alcbakiye,\r\n isnull(irs.irs_brcbakiye,0) irs_brcbakiye,\r\n isnull(irs.irs_adet,0) irs_adet,\r\n \r\n \r\n\r\n  isnull(Avs.alacak,0) Avans_alcbakiye,\r\n  isnull(Avs.borc,0) Avans_brcbakiye,\r\n  isnull(Avs.bakiye,0) Avans_bakiye,\r\n \r\n isnull(f.fis_tutar,0) as son_fis_tutar,\r\n isnull(fisbak.fis_adet,0) fis_adet,\r\n isnull(fisbak.fis_bakiye,0) fis_bakiye,\r\n isnull(irs.irs_bakiye,0) irs_bakiye,\r\n isnull(cek.cek_bakiye,0)+isnull(cir.cek_bakiye,0)  as cek_bakiye,\r\n isnull(cir.cek_bakiye,0) as cir_bakiye,\r\n \r\n isnull(FisOtoVade.FisOtoVadeFarkTutar,0) as FisOtoVadeFarkTutar\r\n \r\n \r\n \r\n \r\n from carikart as k with (nolock)\r\n left join _Cari_Hrk_Bakiye as h on h.carkod=k.kod\r\n and h.cartip='carikart' \r\n LEFT join _Cari_Son_Fis as f on\r\n f.carkod=k.kod and f.cartip='carikart'\r\n LEFT join _Cari_Son_Brc_Hrk as chb on\r\n chb.carkod=k.kod and chb.cartip='carikart'\r\n LEFT join _Cari_Son_Alc_Hrk as cha on\r\n cha.carkod=k.kod and cha.cartip='carikart'\r\n left join _Cari_Fis_Bakiye as fisbak\r\n on fisbak.carkod=k.kod and fisbak.cartip='carikart'\r\n left join _Cari_Cek_Bakiye as cek on\r\n cek.carkod=k.kod and cek.cartip='carikart'\r\n left join _Cari_Ciro_Bakiye as cir on\r\n cir.carkod=k.kod and cir.cartip='carikart'\r\n left join _Cari_irsaliye_Bakiye as irs on\r\n irs.carkod=k.kod and irs.cartip='carikart'\r\n left join _Cari_Avans_Bakiye as Avs on\r\n Avs.carkod=k.kod and Avs.cartip='carikart'\r\n left join __CariOtoFisVadeFarkTutar as FisOtoVade on\r\n FisOtoVade.car_id=k.id"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Fis_Cari_Genel_Ay",
    "full_name": "dbo.Bakiye_Fis_Cari_Genel_Ay",
    "definition": "CREATE VIEW [dbo].Bakiye_Fis_Cari_Genel_Ay\r\nAS\r\n select h.cartip,h.carkod,\r\n isnull(h.bakiye,0) bakiye,\r\n h.ay as Ay,h.Yil as Yil\r\n from _Cari_Hrk_Bakiye_Ay as h\r\n where  h.cartip in ('carikart','perkart','gelgidkart')\r\n union all\r\n select f.cartip,f.carkod,\r\n isnull(f.fis_bakiye,0) bakiye,\r\n f.ay as Ay,f.Yil as Yil\r\n from _Cari_Fis_Bakiye_Ay as f\r\n where  f.cartip in ('carikart','perkart','gelgidkart')"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Fis_Cari_Top_Ay",
    "full_name": "dbo.Bakiye_Fis_Cari_Top_Ay",
    "definition": "CREATE VIEW [dbo].Bakiye_Fis_Cari_Top_Ay\r\nAS\r\n select h.cartip,h.carkod,\r\n isnull(sum(bakiye),0) Bakiye,\r\n h.ay,h.Yil\r\n from Bakiye_Fis_Cari_Genel_Ay as h\r\n group by h.cartip,h.carkod,h.Yil,h.Ay"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Gel_Gid",
    "full_name": "dbo.Bakiye_Gel_Gid",
    "definition": "CREATE VIEW [dbo].Bakiye_Gel_Gid\r\nAS\r\n select k.kod,\r\n isnull(h.borc,0) borc,\r\n isnull(h.alacak,0) alacak,\r\n isnull(h.bakiye,0) car_bakiye,\r\n h.sonhrk_tarih as sonhrk_tarih,\r\n f.fis_tarih as son_fis_tarih,\r\n isnull(f.fis_tutar,0) as son_fis_tutar,\r\n isnull(fisbak.fis_adet,0) fis_adet,\r\n isnull(fisbak.fis_bakiye,0) fis_bakiye,\r\n isnull(cek.cek_bakiye,0) as cek_bakiye\r\n from gelgidkart as k\r\n left join _Cari_Hrk_Bakiye as h on h.carkod=k.kod\r\n and h.cartip='gelgidkart'\r\n LEFT join _Cari_Son_Fis as f on\r\n f.carkod=k.kod and f.cartip='gelgidkart'\r\n left join _Cari_Fis_Bakiye as fisbak\r\n on fisbak.carkod=k.kod and fisbak.cartip='gelgidkart'\r\n left join _Cari_Cek_Bakiye as cek on\r\n cek.carkod=k.kod and cek.cartip='gelgidkart'"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_istkredi",
    "full_name": "dbo.Bakiye_istkredi",
    "definition": "CREATE VIEW [dbo].Bakiye_istkredi\r\nAS\r\n  SELECT k.kod,\r\n  ISNULL(SUM(h.borc),0) as borc,\r\n  ISNULL(SUM(h.alacak),0) as alacak,\r\n  sum(case when \r\n  h.vadetar \r\n  < DATEADD(day,k.heskesgun-1,DATEADD(mm,DATEDIFF(mm,0,GETDATE()),0))\r\n   then (h.borc-h.alacak) else 0 end) vad_gelen\r\n \r\n  FROM istkart as k left join istkhrk as h on h.istkkod=k.kod\r\n  and h.sil=0 group by k.kod"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Kasa",
    "full_name": "dbo.Bakiye_Kasa",
    "definition": "CREATE VIEW [dbo].Bakiye_Kasa\r\nAS\r\n  SELECT k.kod,\r\n  ISNULL(SUM(h.giren),0) as giren,\r\n  ISNULL(SUM(h.cikan),0) as cikan\r\n  FROM kasakart as k left join kasahrk as h on h.kaskod=k.kod\r\n  and h.sil=0 group by k.kod"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Perakende",
    "full_name": "dbo.Bakiye_Perakende",
    "definition": "CREATE VIEW [dbo].Bakiye_Perakende\r\nAS\r\n select k.kod,\r\n isnull(h.borc,0) borc,\r\n isnull(h.alacak,0) alacak,\r\n isnull(h.bakiye,0) car_bakiye,\r\n h.sonhrk_tarih as sonhrk_tarih,\r\n f.fis_tarih as son_fis_tarih,\r\n isnull(f.fis_tutar,0) as son_fis_tutar,\r\n isnull(fisbak.fis_adet,0) fis_adet,\r\n isnull(fisbak.fis_bakiye,0) fis_bakiye\r\n from perakendekart as k\r\n left join _Cari_Hrk_Bakiye as h on h.carkod=k.kod\r\n and h.cartip='perakendekart'\r\n LEFT join _Cari_Son_Fis as f on\r\n f.carkod=k.kod and f.cartip='perakendekart'\r\n left join _Cari_Fis_Bakiye as fisbak\r\n on fisbak.carkod=k.kod and fisbak.cartip='perakendekart'"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Personel",
    "full_name": "dbo.Bakiye_Personel",
    "definition": "CREATE VIEW [dbo].Bakiye_Personel\r\nAS\r\n select k.kod,\r\n isnull(h.borc,0) borc,\r\n isnull(h.alacak,0) alacak,\r\n isnull(h.bakiye,0) car_bakiye,\r\n h.sonhrk_tarih as sonhrk_tarih,\r\n f.fis_tarih as son_fis_tarih,\r\n isnull(f.fis_tutar,0) as son_fis_tutar,\r\n isnull(fisbak.fis_adet,0) fis_adet,\r\n isnull(fisbak.fis_bakiye,0) fis_bakiye,\r\n isnull(cek.cek_bakiye,0) as cek_bakiye\r\n from perkart as k\r\n left join _Cari_Hrk_Bakiye as h on h.carkod=k.kod\r\n and h.cartip='perkart'\r\n LEFT join _Cari_Son_Fis as f on\r\n f.carkod=k.kod and f.cartip='perkart'\r\n left join _Cari_Fis_Bakiye as fisbak\r\n on fisbak.carkod=k.kod and fisbak.cartip='perkart'\r\n left join _Cari_Cek_Bakiye as cek on\r\n cek.carkod=k.kod and cek.cartip='perkart'"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Pos",
    "full_name": "dbo.Bakiye_Pos",
    "definition": "CREATE VIEW [dbo].Bakiye_Pos\r\nAS\r\n  SELECT k.kod,\r\n  ISNULL(SUM(giren-cikan),0) as bek_bak,\r\n  ISNULL(SUM((giren*bankomyuz)+((giren*bankomyuz)*extrakomyuz)+(giren*ekkomyuz)),0)\r\n  as kom_bak,\r\n  sum(case when h.vadetar <= GETDATE() then (h.giren-h.cikan) else 0 end\r\n  ) vad_gelen\r\n  \r\n  FROM poskart as k left join poshrk as h on h.poskod=k.kod\r\n  and h.sil=0 and h.aktip in ('BK','BL') and PosIsle=1\r\n  group by k.kod"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Prom_Puan",
    "full_name": "dbo.Bakiye_Prom_Puan",
    "definition": "CREATE VIEW [dbo].Bakiye_Prom_Puan \r\nAS\r\n  SELECT h.Car_KartID,\r\n  ISNULL(sum(h.Puan_Giren),0) as Giren_Puan,\r\n  ISNULL(sum(h.Puan_Cikan),0) as Cikan_Puan,\r\n  ISNULL(sum(h.Puan_Giren-h.Puan_Cikan),0) as Mevcut_Puan,\r\n  ISNULL(sum(case when h.Puan_Giren>0 then \r\n  h.Tutar_Kdvli else 0 end),0) as Als_Tutar,\r\n  ISNULL(sum(case when h.Puan_Cikan>0 then \r\n  h.Tutar_Kdvli else 0 end),0) as Kul_Tutar,\r\n  max(h.Tarih) SonTarih\r\n  from Prom_Puan_Hrk as h with (nolock) \r\n  where h.Sil=0\r\n  group by h.Car_KartID"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Prom_Urun_Miktar",
    "full_name": "dbo.Bakiye_Prom_Urun_Miktar",
    "definition": "CREATE VIEW [dbo].Bakiye_Prom_Urun_Miktar \r\nAS\r\n\r\n  SELECT k.id as Stk_id,k.tip_id,\r\n  ISNULL(sum(h.Giren),0) as Giren_Miktar,\r\n  ISNULL(sum(h.Cikan),0) as Cikan_Miktar,\r\n  ISNULL(sum(h.Giren-h.Cikan),0) as Mevcut_Miktar\r\n  from stokkart as k\r\n  left join stkhrk as h \r\n  on h.stktip=k.tip and h.stkod=k.kod \r\n  and h.sil=0 \r\n  and h.depkod=\r\n  (select top 1 kod from depokart where id= \r\n  (select top 1 Prom_Depo from sistemtanim) )\r\n  where k.Prom_Urun=1\r\n  group by k.id,k.tip_id\r\n   union all\r\n  SELECT k.id as Stk_id,k.tip_id,\r\n  ISNULL(sum(h.Giren),0) as Giren_Miktar,\r\n  ISNULL(sum(h.Cikan),0) as Cikan_Miktar,\r\n  ISNULL(sum(h.Giren-h.Cikan),0) as Mevcut_Miktar\r\n  from gelgidkart as k\r\n  left join stkhrk as h \r\n  on h.stktip='gelgid' and h.stkod=k.kod \r\n  and h.sil=0 \r\n  and h.depkod=\r\n  (select top 1 kod from depokart where id= \r\n  (select top 1 Prom_Depo from sistemtanim) )\r\n  where k.Prom_Urun=1\r\n  group by k.id,k.tip_id"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Rehber",
    "full_name": "dbo.Bakiye_Rehber",
    "definition": "CREATE VIEW [dbo].Bakiye_Rehber\r\nAS\r\n select k.kod,\r\n isnull(h.borc,0) borc,\r\n isnull(h.alacak,0) alacak,\r\n isnull(h.bakiye,0) car_bakiye,\r\n h.sonhrk_tarih as sonhrk_tarih,\r\n f.fis_tarih as son_fis_tarih,\r\n isnull(f.fis_tutar,0) as son_fis_tutar,\r\n isnull(fisbak.fis_adet,0) fis_adet,\r\n isnull(fisbak.fis_bakiye,0) fis_bakiye\r\n from rehberkart as k with (nolock) \r\n left join _Cari_Hrk_Bakiye as h with (nolock) on h.carkod=k.kod\r\n and h.cartip='rehberkart'\r\n LEFT join _Cari_Son_Fis as f with (nolock) on\r\n f.carkod=k.kod and f.cartip='rehberkart'\r\n left join _Cari_Fis_Bakiye as fisbak with (nolock)\r\n on fisbak.carkod=k.kod and fisbak.cartip='rehberkart'"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Stok_Miktar",
    "full_name": "dbo.Bakiye_Stok_Miktar",
    "definition": "CREATE VIEW [dbo].Bakiye_Stok_Miktar\r\nAS\r\n  select k.tip,k.kod,\r\n  k.grp1,k.grp2,k.grp3,\r\n  k.sil,\r\n  isnull(ortals_fiykdvli,0) ortals_fiykdvli,\r\n  isnull(ortals_fiykdvsiz,0) ortals_fiykdvsiz,\r\n  isnull( round(alsiade_mik,Tip.ondalik_hane),0) alsiade_mik,\r\n  isnull(alsiade_topkdvli,0) alsiade_topkdvli,\r\n  isnull(round(satiade_mik,Tip.ondalik_hane),0) satiade_mik,\r\n  isnull(satiade_topkdvli,0) satiade_topkdvli,\r\n  isnull(round(mev_miktar,Tip.ondalik_hane),0) mev_miktar,\r\n  isnull(round(gir_miktar,Tip.ondalik_hane),0) gir_miktar,\r\n  isnull(gir_topkdvli,0) gir_topkdvli,\r\n  isnull(gir_topkdvsiz,0) gir_topkdvsiz,\r\n  isnull(round(cik_miktar,Tip.ondalik_hane),0) cik_miktar,\r\n  isnull(cik_topkdvli,0) cik_topkdvli,\r\n  isnull(cik_topkdvsiz,0) cik_topkdvsiz ,\r\n  isnull(round(har_miktar,Tip.ondalik_hane),0) har_miktar\r\n  from stokkart as k WITH (NOLOCK)\r\n  left join _Bakiye_Stok_Miktar as h  WITH (NOLOCK)\r\n  on h.stktip=k.tip and h.stkod=k.kod\r\n  left join Stk_Tip as Tip WITH (NOLOCK) on k.tip=tip.kod"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Stok_Miktar_Firma_Dep",
    "full_name": "dbo.Bakiye_Stok_Miktar_Firma_Dep",
    "definition": "CREATE VIEW [dbo].Bakiye_Stok_Miktar_Firma_Dep\r\nAS\r\n  select \r\n  /*TOP 100 Percent */\r\n  h.stkod,h.stktip,\r\n  h.firmano,h.depkod,\r\n\r\n  isnull( case when sum(h.giren)>0 then\r\n  (sum(h.giren*h.brmfiykdvli)) / sum(h.giren)\r\n  else 0 end , 0)  ortals_fiykdvli,\r\n  isnull(case when sum(h.giren)>0 then\r\n  (sum(h.giren*(h.brmfiykdvli / (1+kdvyuz)) )) / sum(h.giren)\r\n  else 0 end , 0)  ortals_fiykdvsiz,\r\n  /*-iade listesi */\r\n  isnull(sum(aiademik),0) as alsiade_mik,\r\n  isnull(sum(aiademik*brmfiykdvli),0) alsiade_topkdvli,\r\n  isnull(sum(siademik),0) as satiade_mik,\r\n  isnull(sum(siademik*brmfiykdvli),0) as satiade_topkdvli,\r\n  /*-miktarlar */\r\n  isnull(sum(h.giren-h.cikan),0) as mev_miktar,\r\n  isnull(sum(h.giren),0) as gir_miktar,\r\n  isnull(sum(giren*brmfiykdvli),0) gir_topkdvli,\r\n  isnull(sum(giren*(brmfiykdvli/(1+h.kdvyuz))),0) as gir_topkdvsiz,\r\n  isnull(sum(h.cikan),0) as cik_miktar,\r\n  isnull(sum(cikan*brmfiykdvli),0) as cik_topkdvli,\r\n  isnull(sum(cikan*(brmfiykdvli/(1+h.kdvyuz))),0) as cik_topkdvsiz,\r\n\r\n  isnull(Sum(case when h.islmtip='HARGIRCIK' then (h.giren-h.cikan) else 0 end),0)\r\n  as har_miktar\r\n\r\n  /*from stokkart as k  */\r\n  from stkhrk as h WITH (NOLOCK)\r\n  where h.sil=0\r\n  group by h.stkod,h.stktip,\r\n  h.firmano,h.depkod\r\n   /*k.grp1,k.grp2,k.grp3,k.sil */\r\n  /*order by k.id,h.firmano,h.depkod, */\r\n  /*k.tip,k.kod,k.grp1,k.grp2,k.grp3,k.sil */"
  },
  {
    "schema": "dbo",
    "name": "Bakiye_Tank",
    "full_name": "dbo.Bakiye_Tank",
    "definition": "CREATE VIEW [dbo].Bakiye_Tank\r\nAS\r\n  SELECT k.kod,\r\n  isnull(sum(h.giren-h.cikan),0) as mev_miktar,\r\n  isnull(sum(h.giren),0) as gir_miktar,\r\n  isnull(sum(giren*brmfiykdvli),0) gir_topkdvli,\r\n  isnull(sum(giren*(brmfiykdvli/(1+h.kdvyuz))),0) as gir_topkdvsiz,\r\n  isnull(sum(h.cikan),0) as cik_miktar,\r\n  isnull(sum(cikan*brmfiykdvli),0) as cik_topkdvli,\r\n  isnull(sum(cikan*(brmfiykdvli/(1+h.kdvyuz))),0) as cik_topkdvsiz\r\n  \r\n  \r\n  \r\n  from  tankkart as k WITH (NOLOCK)\r\n  left join stkhrk as h WITH (NOLOCK) on\r\n  h.depkod=k.kod and h.sil=0\r\n  group by k.kod"
  },
  {
    "schema": "dbo",
    "name": "Banka_Kart_Listesi",
    "full_name": "dbo.Banka_Kart_Listesi",
    "definition": "CREATE VIEW Banka_Kart_Listesi\r\nAS\r\n  select k.[id],k.firmano,k.[kod],k.[grp1],k.[grp2],k.[grp3],\r\n  k.[ad],k.[muhkod],k.[muhonkod],k.cekmuhkod,k.[hesno],K.Iban,\r\n  k.[parabrm],k.[ilgili],\r\n  k.[tel],k.[drm],k.[fax],\r\n  k.[borc],k.[alacak],k.[olususer],k.[olustarsaat],\r\n  k.[degtarsaat],k.[deguser],k.[sil],k.[actutar],\r\n  (g.ad) as grup,\r\n  isnull(round((bak.borc),2),0) brc_bakiye,\r\n  isnull(round((bak.alacak),2),0) alc_bakiye,\r\n  (bak.borc-bak.alacak) top_bakiye from bankakart as k\r\n  left join grup as g on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2 \r\n  when k.grp1>0 then k.grp1 end\r\n  inner join Bakiye_Banka as bak on bak.kod=k.kod"
  },
  {
    "schema": "dbo",
    "name": "Cari_Kart_Listesi",
    "full_name": "dbo.Cari_Kart_Listesi",
    "definition": "CREATE VIEW Cari_Kart_Listesi\r\nAS\r\n  SELECT k.id,k.TurId,tur.Ad as TurAd,\r\n  k.grp1,k.grp2,k.grp3,k.firmano,k.sil,\r\n  k.kod,k.ad,k.soyad,\r\n  k.unvan,k.fisadet,k.fisakadet,\r\n  k.fisaktut,k.actutar,k.limit_tip,\r\n  k.ilgili,(g.ad) as Grup,k.perIDIN,k.per_id,\r\n  k.fat_car_sec,k.fat_car_kod,k.fat_car_id,\r\n  k.tel,k.fax,k.cep,k.muhonkod,k.muhkod,\r\n  k.hesapno,k.Oto_FisVadeFark,k.AdresPostaKod,\r\n  k.drm,k.resim,k.adres,k.evil,k.evilce,K.DBS_RefNo,\r\n  k.vergidaire,k.vergino,k.vergikimlikno,k.EFatura,\r\n  k.EfaturaTip,K.TicSicilNo,K.webadres,\r\n  k.VergiEposta,k.mail,k.tcno,k.kulkod,\r\n  k.kulsif,k.fatvadtip,k.TTS_OdeTip,\r\n  k.fisvadtip,k.fatvadsur,k.fisvadsur,\r\n  k.fatisk,k.fisvadfark,k.fatvadfark,k.fisisk,\r\n  k.Ttsbayisk,k.Ttsdagisk,k.Ttsbayvadfark,k.Ttsdagvadfark,\r\n  k.olususer,k.olustarsaat,k.deguser,k.degtarsaat,\r\n  k.parabrm,k.otofisak,k.fatunvan,\r\n  k.toplamteminat,k.toplamlimit,k.Risk_Limit,\r\n  k.adres2,k.notack,k.epostagonder,k.webextre,\r\n  k.ykt_alm_def_no,k.Arac_Ad,k.Epdk_LisansNo,\r\n  isnull(Ars.Arac_Sayi,0) Arac_Sayi,k.AvansTakip,\r\n  K.WebAvans,K.WebFatura,K.WebCariHrk,k.WebCariBakiye,\r\n  K.WebFisOdendi,K.WebFaturaOdendi,K.WebPos,K.WebFisIskontoluTahsil,\r\n  K.Web,K.WebFaturaTahsil,K.WebFaturaIskontoluTahsil,K.WebFis,\r\n  K.WebFisTahsil,K.Remote_id,\r\n  case\r\n  when (fatvadtip<>'') and (fatvadtip<>'islemtar') then fatvadsur\r\n  when (fisvadtip<>'') and (fisvadtip<>'islemtar') then fisvadsur\r\n  when ((fatvadtip<>'') and (fisvadtip<>'')) and\r\n  ((fatvadtip<>'islemtar') or (fisvadtip<>'islemtar')) then\r\n  fatvadsur\r\n  when (fatvadtip='') and (fisvadtip='') then\r\n  1\r\n  when (fatvadtip='islemtar') or (fisvadtip='islemtar') then\r\n  1\r\n  end Valor_Gun,\r\n  bak.borc+bak.fis_brcbakiye+bak.irs_brcbakiye+bak.Avans_brcBakiye  as brc_bakiye,\r\n  bak.alacak+bak.fis_alcbakiye+bak.irs_alcbakiye+bak.Avans_alcBakiye  as alc_bakiye,\r\n  \r\n  case when \r\n  (bak.borc+bak.fis_brcbakiye+bak.irs_brcbakiye+bak.Avans_brcBakiye)-\r\n  (bak.alacak+bak.fis_alcbakiye+bak.irs_alcbakiye+bak.Avans_alcBakiye)>0 then\r\n   ((bak.borc+bak.fis_brcbakiye+bak.irs_brcbakiye+bak.Avans_brcBakiye)-\r\n  (bak.alacak+bak.fis_alcbakiye+bak.irs_alcbakiye+bak.Avans_alcBakiye))\r\n  else 0 end brc_top_bakiye,\r\n  \r\n  case when \r\n  (bak.borc+bak.fis_brcbakiye+bak.irs_brcbakiye+bak.Avans_brcBakiye)-\r\n  (bak.alacak+bak.fis_alcbakiye+bak.irs_alcbakiye+bak.Avans_alcBakiye)<0 then\r\n  -1*( (bak.borc+bak.fis_brcbakiye+bak.irs_brcbakiye+bak.Avans_brcBakiye)-\r\n  (bak.alacak+bak.fis_alcbakiye+bak.irs_alcbakiye+bak.Avans_alcBakiye))\r\n  else 0 end alc_top_bakiye,\r\n  \r\n   \r\n  \r\n  bak.Avans_bakiye as avans_bakiye,\r\n  bak.fis_bakiye as fis_bakiye,\r\n  bak.car_bakiye as car_bakiye,\r\n  bak.irs_bakiye as irs_bakiye,\r\n  bak.cir_bakiye as cir_bakiye,\r\n  \r\n  round((bak.fis_bakiye+bak.irs_bakiye+bak.car_bakiye+bak.avans_bakiye),2) top_bakiye,\r\n  bak.cek_bakiye  as cek_bakiye,\r\n  ((bak.fis_bakiye+bak.irs_bakiye+bak.car_bakiye+bak.avans_bakiye)-bak.cek_bakiye) \r\n  as cekharc_bakiye,\r\n  bak.sonhrk_tarih,\r\n  bak.sonalc_tarih,\r\n  bak.sonbrc_tarih,\r\n  bak.sonbrc_tutar,\r\n  bak.sonalc_tutar,\r\n  bak.son_fis_tarih,\r\n  bak.son_fis_tutar,\r\n  bak.fis_adet,\r\n  bak.irs_adet,\r\n  \r\n  \r\n  \r\n  ctm.tutar as teminat_tutar,\r\n  ctm.ack as teminat_ack,\r\n  isnull(pk.lttutar,0) as kul_tut_limit,\r\n  k.toplamlimit-\r\n  case when k.toplamlimit>0 then \r\n  round((bak.fis_bakiye+bak.irs_bakiye+bak.car_bakiye+bak.avans_bakiye),2)\r\n  else\r\n  0 end\r\n  /*(isnull(pk.lttutar,0))  */\r\n  as Kalan_limit,\r\n  bak.FisOtoVadeFarkTutar,k.BankaKod,\r\n  k.BankaDbs,bk.Ad as bankaAd\r\n\r\n  from carikart as k WITH (NOLOCK)\r\n  left join grup as g on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2\r\n  when k.grp1>0 then k.grp1 end\r\n  left join Cari_Tur as tur WITH (NOLOCK) on tur.Id=k.TurId\r\n  left join _Plaka_Limit_Cari_Miktar as pk WITH (NOLOCK) on k.kod=pk.carkod\r\n  and pk.cartip='carikart'\r\n  left join bankakart as bk with (nolock) on bk.Kod=k.BankaKod\r\n  left join _Cari_AracSayi as ArS WITH (NOLOCK) on k.kod=ArS.kod and ArS.cartip='carikart'\r\n  left join _Cari_Teminat as ctm WITH (NOLOCK) on k.kod=ctm.kod\r\n  left join Bakiye_Cari as bak WITH (NOLOCK) on bak.kod=k.kod and bak.grp1=k.grp1\r\n  and bak.grp2=k.grp2 and bak.grp3=k.grp3"
  },
  {
    "schema": "dbo",
    "name": "Cari_Vadefark_Liste",
    "full_name": "dbo.Cari_Vadefark_Liste",
    "definition": "CREATE VIEW [dbo].Cari_Vadefark_Liste\r\nAS\r\n  SELECT h.id,h.carhrkid,h.carvardmasid,h.islmtip,h.islmtipad,h.islmhrk,h.islmhrkad,\r\n  h.yertip,h.yerad,h.tarih,h.saat,h.belno,h.cartip,h.carkod,k.ad+' '+k.soyad as unvan,\r\n  tutar=case when borc>0 then borc else alacak end,ack,h.olususer,h.olustarsaat,h.deguser,h.degtarsaat,h.sil from carihrk as h\r\n  inner join carikart k on k.kod=h.carkod where\r\n  h.carvardmasid>0 AND h.cartip='carikart'"
  },
  {
    "schema": "dbo",
    "name": "Depo_Kart_Listesi",
    "full_name": "dbo.Depo_Kart_Listesi",
    "definition": "CREATE VIEW [dbo].Depo_Kart_Listesi\r\nAS\r\n  SELECT k.id,1 Tip_id,('tank') as tip,'TANK KART' AS tipad,\r\n  k.firmano,k.kod,\r\n  k.ad,k.stktip,k.bagak,k.sil,k.drm,'1-'+Cast(K.id as varchar(5)) \r\n  as TipID  from tankkart as k\r\n  union\r\n  SELECT k.id,2 Tip_id,('markt') as tip,'MARKET KART' AS tipad,\r\n  k.firmano,k.kod,\r\n  k.ad,('markt') as stktip,('') as bagak,k.sil,k.drm,\r\n  '2-'+Cast(K.id as varchar(5)) as TipID  from depokart as k"
  },
  {
    "schema": "dbo",
    "name": "faturagiderlistesi",
    "full_name": "dbo.faturagiderlistesi",
    "definition": "CREATE VIEW [dbo].faturagiderlistesi\r\nAS\r\n  select h.id,f.fatid,k.kod,k.ad,k.muhkod,k.muhonkod,(h.kdvyuz*100) as kdv,\r\n  case when f.kdvtip='Dahil' then h.borc else h.borc/(1+h.kdvyuz) end as tutar\r\n  from carihrk as h WITH (NOLOCK) inner join gelgidkart as k WITH (NOLOCK) on k.kod=h.carkod and cartip='gelgidkart'\r\n  inner join faturamas  as f WITH (NOLOCK) on f.fatid=h.fisfatid\r\n  where h.sil=0 and h.islmtip='FAT' AND h.islmhrk='GID' and h.yertip='faturamas'"
  },
  {
    "schema": "dbo",
    "name": "faturahrklistesi",
    "full_name": "dbo.faturahrklistesi",
    "definition": "CREATE VIEW [dbo].faturahrklistesi\r\nAS\r\n  SELECT id,fatid,'S' as satirtip,h.sil,firmano,stktip,stkod,mik,\r\n  Micro_Stktip=case when stktip='gelgid' then 2 else 1 end,\r\n  brmfiy,depkod,kdvyuz,kdvtut,\r\n  isnull(h.kdvtevkifatyuzde,0) kdvtevkifatYuzde,\r\n  isnull(h.KdvTevkifatTutar,0) kdvtevkifatTutar,\r\n  isnull(kt.Kod,'') kdvtevkifatKod,\r\n  isnull(kt.Ad,'') kdvtevkifatAck,\r\n  kdvtip,brim,satiskyuz,satisktut,\r\n  ak_isk_yuz,ak_isk_tut,mr_isk_yuz,mr_isk_tut,\r\n  otvyuz,otvtut,otv_carpan,geniskyuz,genisktut,ustbrim,carpan,parabrim,otvbrim,grupid,\r\n  kayok,kaphrkid,kaptip,giderbrmtut,\r\n  Top_isk_Yuz,Top_isk_Tut from faturahrk as h with (nolock)\r\n  left join KDVTevkifat_Tip as kt with (nolock) on kt.Id=h.KdvTevkifatId\r\n  and kt.Sil=0 \r\n  \r\n  union\r\n  SELECT id,fisfatid as fatid,'M' as satirtip,sil,firmano,'gelgid' as stktip,\r\n  carkod as stkod,(1) as mik,\r\n  Micro_Stktip=2,\r\n  abs(alacak-borc)/(1+kdvyuz) as brmfiy,'' as depkod,kdvyuz,\r\n  (abs(alacak-borc)/(1+kdvyuz))*kdvyuz as kdvtut,\r\n  0 kdvtevkifatyuzde,0 kdvtevkifatTutar,\r\n  '' kdvtevkifatKod,'' kdvtevkifatTutar,  \r\n  ('Hariç') as kdvtip,'AD' AS brim,0 as satiskyuz,0 as satisktut,\r\n  0 ak_isk_yuz, 0 ak_isk_tut,0 mr_isk_yuz,0 mr_isk_tut,\r\n  0 as otvyuz,0 as otvtut,0 otv_carpan,\r\n  0 as geniskyuz,0 as genisktut,'' as ustbrim,1 as carpan,parabrm,0 as otvbrim,0 as grupid,\r\n  1 as kayok,(0) kaphrkid,'' as kaptip,0 as giderbrmtut,\r\n  0 Top_isk_Yuz,0 Top_isk_Tut from carihrk with (nolock) where cartip='gelgidkart'\r\n  and islmtip='FAT' AND islmhrk='GID'"
  },
  {
    "schema": "dbo",
    "name": "fisfatodelistesi",
    "full_name": "dbo.fisfatodelistesi",
    "definition": "CREATE VIEW [dbo].fisfatodelistesi\r\nAS\r\n  SELECT 'Kasa' as grp,'kasahrk' as grptip,('fisfatid') hrkidad,fisfatid,fisfattip,kashrkid as hrkid,varno,varok,K.ad as aciklama,\r\n  h.sil,yerad,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,h.id,\r\n  tutar=case when h.giren>0 then h.giren else h.cikan end,kur,h.kaskod as odetipkod,K.ad as odetipad,ack,null as vadetar,\r\n  h.parabrm,h.olustarsaat,h.olususer from kasahrk as h with (nolock) \r\n  inner join kasakart as k with (nolock)  on h.kaskod=k.kod\r\n  where h.sil=0 and h.islmtip in ('TAH','ODE')\r\n  and h.fisfatid>0\r\n\r\n  UNION\r\n  SELECT 'Pos' as grp,'poshrk' as grptip,('fisfatid') hrkidad,fisfatid,fisfattip,poshrkid as hrkid,varno,varok,k.ad as aciklama,\r\n  h.sil,yerad,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,h.id,\r\n  tutar=case when h.giren>0 then h.giren else h.cikan end,kur,h.poskod as odetipkod,k.ad as odetipad,ack,h.vadetar as vadetar,\r\n  h.parabrm,h.olustarsaat,h.olususer from poshrk as h with (nolock) \r\n  inner join  poskart as k with (nolock)  on k.kod=h.poskod where h.sil=0\r\n  and h.fisfatid>0\r\n\r\n  UNION\r\n  SELECT 'Çek-Senet' as grp,'cekkart' as grptip,('fisfatid') hrkidad,fisfatid,fisfattip,cekid as hrkid,varno,varok,convert(varchar,k.vadetar,103) aciklama,\r\n  k.sil,yerad,tarih,saat,islmtipad,islmhrkad,k.islmtip as islmtip,k.islmhrk as islmhrk,yertip,ceksenno as belno,k.id,\r\n  tutar=case when giren>0 then giren else cikan end,kur,k.refno as odetipkod,islmhrkad odetipad,ack,k.vadetar as vadetar,\r\n  k.parabrm,k.olustarsaat,k.olususer  from cekkart as k where k.sil=0\r\n  and k.fisfatid>0\r\n\r\n  UNION\r\n  SELECT 'Banka' as grp,'bankahrk' as grptip,('fisfatid') hrkidad,fisfatid,fisfattip,bankhrkid as hrkid,varno,varok,k.ad as aciklama,\r\n  h.sil,yerad,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,h.id,\r\n  tutar=case when h.borc>0 then h.borc else h.alacak end,kur,h.bankod as odetipkod,k.ad as odetipad,ack,null as vadetar,\r\n  h.parabrm,h.olustarsaat,h.olususer from bankahrk as h with (nolock) \r\n  inner join bankakart as k with (nolock)  on k.kod=h.bankod where\r\n  h.sil=0 and h.islmhrk in ('B-C','C-B') and h.fisfatid>0\r\n\r\n  UNION\r\n  SELECT 'İşletme Kart İşlemleri' as grp,'istkhrk' as grptip,('fisfatid') hrkidad,fisfatid,fisfattip,istkhrkid as hrkid,varno,varok,k.ad as aciklama,\r\n  h.sil,yerad,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,h.id,\r\n  tutar=case when h.borc>0 then h.borc else h.alacak end,kur,h.istkkod as odetipkod,k.ad as odetipad,ack,vadetar,\r\n  h.parabrm,h.olustarsaat,h.olususer from istkhrk as h\r\n  inner join istkart as k with (nolock)  on h.istkkod=k.kod where\r\n  h.sil=0 and h.fisfatid>0"
  },
  {
    "schema": "dbo",
    "name": "fistahodelistesi",
    "full_name": "dbo.fistahodelistesi",
    "definition": "CREATE VIEW [dbo].fistahodelistesi\r\nAS\r\n  SELECT 'Kasa' as grp,'kasahrk' as grptip,('kasahrkid') hrkidad,fisid,kashrkid as hrkid,varno,varok,\r\n  kasahrk.sil,yerad,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,kasahrk.id,\r\n  tutar=case when kasahrk.giren>0 then kasahrk.giren else kasahrk.cikan end,kur,kasahrk.kaskod as odetipkod,\r\n  kasakart.ad as odetipad,ack,null as vadetar,\r\n  kasahrk.parabrm,kasahrk.olustarsaat,kasahrk.olususer from kasahrk  with (nolock)\r\n  inner join kasakart with (nolock) on kasahrk.kaskod=kasakart.kod and kasahrk.fisid>0 where kasahrk.sil=0\r\n\r\n  UNION\r\n  SELECT 'Pos' as grp,'poshrk' as grptip,('poshrkid') hrkidad,fisid,poshrkid as hrkid,varno,varok,\r\n  poshrk.sil,yerad,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,poshrk.id,\r\n  tutar=case when poshrk.giren>0 then poshrk.giren else poshrk.cikan end,kur,poshrk.poskod as odetipkod,poskart.ad as odetipad,ack,poshrk.vadetar as vadetar,\r\n  poshrk.parabrm,poshrk.olustarsaat,poshrk.olususer from poshrk with (nolock)\r\n  inner join  poskart with (nolock) on poskart.kod=poshrk.poskod and poshrk.fisid>0 where poshrk.sil=0\r\n\r\n  UNION\r\n  SELECT 'Çek-Senet' as grp,'cekkart' as grptip,('cekid') hrkidad,fisid,cekid as hrkid,varno,varok,\r\n  cekkart.sil,yerad,tarih,saat,islmtipad,islmhrkad,cekkart.islmtip as islmtip,cekkart.islmhrk as islmhrk,yertip,ceksenno as belno,cekkart.id,\r\n  tutar=case when giren>0 then giren else cikan end,kur,cekkart.refno as odetipkod,\r\n  islmhrkad odetipad,ack,cekkart.vadetar as vadetar,cekkart.parabrm,cekkart.olustarsaat,cekkart.olususer\r\n  from cekkart with (nolock) where cekkart.sil=0 and cekkart.fisid>0\r\n\r\n  UNION\r\n  SELECT 'Banka' as grp,'bankahrk' as grptip,('bankahrkid') hrkidad,fisid,bankhrkid as hrkid,varno,varok,\r\n  bankahrk.sil,yerad,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,bankahrk.id,\r\n  tutar=case when bankahrk.borc>0 then bankahrk.borc else bankahrk.alacak end,kur,bankahrk.bankod as odetipkod,bankakart.ad as odetipad,ack,null as vadetar,\r\n  bankahrk.parabrm,bankahrk.olustarsaat,bankahrk.olususer from bankahrk with (nolock)\r\n  inner join bankakart with (nolock) on bankakart.kod=bankahrk.bankod and bankahrk.fisid>0 where bankahrk.sil=0"
  },
  {
    "schema": "dbo",
    "name": "Gel_Gid_Kart_Listesi",
    "full_name": "dbo.Gel_Gid_Kart_Listesi",
    "definition": "CREATE VIEW [dbo].Gel_Gid_Kart_Listesi\r\nAS\r\n  SELECT k.[id],k.[firmano],f.ad as firmaad,k.[sil],k.[kod],\r\n  k.[ad],k.[drm],k.[grp1],k.[grp2],k.[grp3],\r\n  k.[fisbak],k.[carbak],k.[muhkod],k.[muhonkod],\r\n  k.[olususer],k.[olustarsaat],\r\n  k.[deguser],k.[degtarsaat],k.[fiyat],k.[toplim],k.limit_tip,\r\n  k.[kdvtip],k.[kdv],k.[brim],k.[parabrm],\r\n  k.[fisaktut],k.[fisadet],[fisakadet],[actutar],[gizli],\r\n  bak.fis_bakiye as fis_bakiye,\r\n  bak.car_bakiye as car_bakiye,\r\n  round((bak.fis_bakiye+bak.car_bakiye),2) top_bakiye,\r\n  ((bak.fis_bakiye-bak.car_bakiye)-bak.cek_bakiye) as cekharc_bakiye,\r\n  bak.sonhrk_tarih,\r\n  bak.son_fis_tarih,\r\n  bak.son_fis_tutar,\r\n  bak.fis_adet,\r\n  (g.ad) grup,(k.fisbak+k.carbak) topbak from gelgidkart as k with (nolock)\r\n  left join grup as g on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2\r\n  when k.grp1>0 then k.grp1 end\r\n  inner join Bakiye_Gel_Gid as bak on bak.kod=k.kod\r\n  left join firma as f with (nolock) on k.firmano=f.id"
  },
  {
    "schema": "dbo",
    "name": "gelgidlistok",
    "full_name": "dbo.gelgidlistok",
    "definition": "CREATE VIEW [dbo].gelgidlistok\r\nAS\r\n  SELECT id,Tip_id,kod,tip,ad,\r\n  stktur=case when tip='akykt' then \r\n  'Akaryakıt' else 'Market' end,\r\n  brim,sat1kdv,sat1kdvtip,sat1fiy,sat2kdv,sat2kdvtip,sat2fiy,\r\n  grp1,grp2,grp3,Gtip,\r\n  muhonkod,muhgrskod,muhckskod from stokkart as s with (nolock)\r\n  union all\r\n  SELECT id,Tip_id,kod,('gelgid')tip,ad,('Gelir-Gider') stktur,\r\n  brim,kdv,kdvtip,fiyat,kdv,kdvtip,fiyat, \r\n  grp1,grp2,grp3,'' Gtip,\r\n  muhonkod,muhkod muhgrskod,muhkod muhckskod\r\n  from gelgidkart with (nolock)"
  },
  {
    "schema": "dbo",
    "name": "Genel_Cari_Kart",
    "full_name": "dbo.Genel_Cari_Kart",
    "definition": "CREATE VIEW Genel_Cari_Kart\r\nAS\r\n  SELECT k.id,k.sil,k.kod as kod,\r\n  K.Ad as Ad,K.Soyad as Soyad,\r\n  k.unvan as Unvan,\r\n  k.grp1,k.grp2,k.grp3,\r\n  k.fatunvan as fatunvan,\r\n  'carikart' as cartip,1 CarTip_id,k.per_id,\r\n  '1-'+CAST(k.id as varchar(50)) Uniq_id,\r\n  k.muhkod,k.muhonkod,(1) as crno,k.tcno,g.ad as grupad1,\r\n  k.tel,k.fax,k.cep,k.mail,K.AdresPostaKod, \r\n  k.vergikimlikno As VergiKNo,K.VergiEposta,K.Efatura,\r\n  k.EfaturaTip,k.TicSicilNo,k.webadres,\r\n  ('CARİ KARTLAR') as tip,\r\n  k.adres,k.adres2,k.evil,k.evilce,\r\n  k.vergidaire,k.vergino,k.fisisk as fis_iskonto,k.fatisk as fat_iskonto,\r\n  k.Oto_FisVadeFark,k.fisvadtip,k.fisvadsur\r\n  from Carikart as k with (nolock)\r\n  left join grup as g with (nolock) on g.id=k.grp1\r\n  UNION all\r\n  \r\n  SELECT k.id,k.sil,k.kod,\r\n  K.Ad as Ad,K.Soyad as Soyad,\r\n  k.ad+' '+k.soyad as Unvan,k.grp1,k.grp2,k.grp3,\r\n   ''as fatunvan,'perkart' as cartip,2 CarTip_id,0 per_id,\r\n  '2-'+CAST(k.id as varchar(50)) Uniq_id,\r\n  k.muhkod,k.muhonkod,(1) as crno,('')tcno,g.ad as grupad1,\r\n  k.tel,k.fax,k.cep,k.mail,'' AdresPostaKod,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n  0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n  ('PERSONEL KARTLARI') as tip,\r\n  ('') as adres,('') as adres2,evil,evilce,('') as vergidaire,('') as vergino,\r\n  (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n  ('') fisvadtip,(0) fisvadsur\r\n  from Perkart as k with (nolock)\r\n  left join grup as g with (nolock) on g.id=k.grp1\r\n  UNION all\r\n   \r\n   SELECT k.id,k.sil,k.kod,\r\n   K.Ad as Ad,'' as Soyad,k.ad Unvan,\r\n   k.grp1,k.grp2,k.grp3,\r\n   ''as fatunvan,'gelgidkart' as cartip,3 CarTip_id,0 per_id,\r\n   '3-'+CAST(k.id as varchar(50)) Uniq_id,\r\n   k.muhkod,k.muhonkod,(1) as crno,('')tcno,g.ad as grupad1,\r\n   '' tel,'' fax,'' cep,'' mail,'' AdresPostaKod,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   ('GELİR-GİDER KARTLARI') as tip,\r\n   ('') as adres,('') as adres2,('') as evil,('') as evilce,('') as vergidaire,\r\n   ('') as vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n   ('') fisvadtip,(0) fisvadsur\r\n   from GelGidKart as k with (nolock)\r\n   left join grup as g with (nolock) on g.id=k.grp1\r\n   UNION all \r\n   \r\n \r\n  SELECT k.id,k.sil,k.kod,\r\n  K.Ad as Ad,K.Soyad as Soyad,k.unvan,\r\n  k.grp1,k.grp2,k.grp3,\r\n  ''as fatunvan,'perakendekart' as cartip,7 CarTip_id,0 per_id,\r\n  '7-'+CAST(k.id as varchar(50)) Uniq_id,\r\n  k.muhkod,k.muhonkod,(6) as crno,k.tcno,g.ad as grupad1,\r\n  k.tel,k.fax,k.cep,k.mail,'' AdresPostaKod,\r\n  k.vergino As VergiKNo,K.VergiEposta,K.Efatura,\r\n  k.EfaturaTip,k.TicSicilNo,('')webadres, \r\n  ('PERAKENDE KARTLAR') as tip,\r\n  k.adres,k.adres2,evil,evilce,k.vergidaire,k.vergino,\r\n  (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n  ('') fisvadtip,(0) fisvadsur\r\n  from PerakendeKart as k with (nolock)\r\n  left join grup as g with (nolock) on g.id=k.grp1"
  },
  {
    "schema": "dbo",
    "name": "Genel_Kart",
    "full_name": "dbo.Genel_Kart",
    "definition": "CREATE VIEW Genel_Kart\r\nAS\r\n  SELECT k.id,k.firmano,k.sil as sl,k.kod as kod,k.unvan as ad,k.grp1,k.grp2,k.grp3,\r\n  k.Prom_Grp1,k.fatunvan as fatunvan,\r\n  'carikart' as cartp,1 Tip_id,k.Per_id,\r\n  k.muhkod,k.muhonkod,(1) as crno,k.tcno,k.tel,\r\n  k.fax,k.cep,k.mail,\r\n  k.vergikimlikno As VergiKNo,K.VergiEposta,K.Efatura,\r\n  k.EfaturaTip,k.TicSicilNo,k.webadres,\r\n  g.ad as grupad1,\r\n  ('CARİ KARTLAR') as tip,K.TurId,\r\n  k.adres,k.adres2,k.evil,k.evilce,\r\n  k.vergidaire,k.vergino,k.fisisk as fis_iskonto,k.fatisk as fat_iskonto,\r\n  K.Oto_FisVadeFark,\r\n  k.BankaKod,K.BankaDbs,bk.Ad As BankaAd\r\n  from Carikart as k with (nolock)\r\n  left join bankakart as bk with (nolock) on bk.Kod=k.BankaKod\r\n  left join grup as g with (nolock) on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2 when k.grp1>0 then k.grp1 end\r\n  UNION all\r\n  \r\n  SELECT k.id,k.firmano,k.sil as sl,k.kod,k.ad+' '+k.soyad as ad,k.grp1,k.grp2,k.grp3,\r\n  (0) as Prom_Grp1, ''as fatunvan,'perkart' as cartp,2 Tip_id,0 Per_id,\r\n  k.muhkod,k.muhonkod,(1) as crno,('')tcno,k.tel,\r\n  k.fax,k.cep,k.mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n  0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n  g.ad as grupad1,('PERSONEL KARTLARI') as tip,1 TurId,\r\n  ('') as adres,('') as adres2,evil,evilce,('') as vergidaire,('') as vergino,\r\n  (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n  '' BankaKod,'' BankaDbs,'' As BankaAd\r\n  from Perkart as k with (nolock)\r\n  left join grup as g with (nolock) on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2 when k.grp1>0 then k.grp1 end\r\n  UNION all\r\n   \r\n  SELECT k.id,k.firmano,k.sil as sl,k.kod,k.ad,k.grp1,k.grp2,k.grp3,\r\n   (0) as Prom_Grp1,''as fatunvan,'gelgidkart' as cartp,3 Tip_id,0 Per_id,\r\n   k.muhkod,k.muhonkod,(1) as crno,('')tcno,'' tel,\r\n   '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   g.ad as grupad1,('GELİR-GİDER KARTLARI') as tip,1 TurId,\r\n   ('') as adres,('') as adres2,('') as evil,('') as evilce,('') as vergidaire,\r\n   ('') as vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n   '' BankaKod,'' BankaDbs,'' As BankaAd\r\n   from GelGidKart as k with (nolock)\r\n   left join grup as g with (nolock) on g.id=case when k.grp3>0 then k.grp3\r\n   when k.grp2>0 then k.grp2 when k.grp1>0 then k.grp1 end\r\n   UNION all \r\n   \r\n   SELECT k.id,k.firmano,k.sil as sl,k.kod,k.ad,k.grp1,k.grp2,k.grp3,\r\n   (0) as Prom_Grp1,''as fatunvan,'bankakart' as cartp,4 Tip_id,0 Per_id,\r\n   k.muhkod,k.muhonkod,(3) as crno,('')tcno,k.tel,\r\n   '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   g.ad as grupad1,('BANKA KARTLARI') as tip,1 TurId,\r\n   ('') as adres,('') as adres2,('') as evil,('') as evilce,\r\n   ('') as vergidaire,('') as vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto, 0 Oto_FisVadeFark,\r\n   '' BankaKod,'' BankaDbs,'' As BankaAd\r\n   from BankaKart as k with (nolock)\r\n   left join grup as g with (nolock) on g.id=case when k.grp3>0 then k.grp3\r\n   when k.grp2>0 then k.grp2 when k.grp1>0 then k.grp1 end\r\n   UNION all\r\n   \r\n   SELECT k.id,k.firmano,k.sil as sl,k.kod,k.ad,0 grp1,0 grp2,0 grp3,\r\n  (0) as Prom_Grp1,''as fatunvan,'poskart' as cartp,5 Tip_id,0 Per_id,\r\n  k.muhkod,k.muhonkod,(2) as crno,('')tcno,'' tel,\r\n  '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n   0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n  ('') as grupad1,('POS KARTLARI') as tip,1 TurId,\r\n  ('') as adres,('') as adres2,\r\n  ('') as evil,('') as evilce,('') as vergidaire,('') as vergino,\r\n  (0) fis_iskonto,(0) as fat_iskonto, 0 Oto_FisVadeFark,\r\n  '' BankaKod,'' BankaDbs,'' As BankaAd\r\n  from PosKart as k with (nolock)\r\n  UNION all\r\n  \r\n  SELECT k.id,k.firmano,k.sil as sl,k.kod,k.ad,0 grp1,0 grp2,0 grp3,\r\n   (0) as Prom_Grp1,''as fatunvan,'istkart' as cartp,6 Tip_id,0 Per_id,\r\n   k.muhkod,k.muhonkod,(5) as crno,('')tcno,'' tel,\r\n   '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   ('') as grupad1,('İŞLETME KREDI KARTLARI') as tip,1 TurId,\r\n   ('') as adres,('') as adres2,('') as evil,('') as evilce,('') as vergidaire,\r\n   ('') as vergino,(0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n   '' BankaKod,'' BankaDbs,'' As BankaAd \r\n   from istkart as k with (nolock)\r\n   UNION all\r\n  \r\n  SELECT k.id,k.firmano,k.sil as sl,k.kod,k.unvan as ad,k.grp1,k.grp2,k.grp3,\r\n  k.Prom_Grp1,''as fatunvan,'perakendekart' as cartp,7 Tip_id,0 Per_id,\r\n  k.muhkod,k.muhonkod,(6) as crno,('')tcno,k.tel,\r\n  '' fax,cep,'' mail,k.vergino As VergiKNo,'' As VergiEposta,0 Efatura,\r\n   0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n  g.ad as grupad1,('PERAKENDE KARTLAR') as tip,1 TurId,\r\n  k.adres,k.adres2,evil,evilce,k.vergidaire,k.vergino,\r\n  (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n  '' BankaKod,'' BankaDbs,'' As BankaAd \r\n  from PerakendeKart as k with (nolock)\r\n  left join grup as g with (nolock) on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2 when k.grp1>0 then k.grp1 end\r\n  UNION all\r\n\r\n\r\n   SELECT k.id,k.firmano,k.sil as sl,k.kod,k.ad,0 grp1,0 grp2,0 grp3,\r\n   (0) as Prom_Grp1,''as fatunvan,'kasakart' as cartp,8 Tip_id,0 Per_id,\r\n   k.muhkod,k.muhonkod,(4) as crno,('')tcno,'' tel,\r\n   '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   ('') as grupad1,('KASA KARTLARI') as tip,1 TurId,\r\n   ('') as adres,('') as adres2,('') as evil,('') as evilce,\r\n   ('') as vergidaire,('') as vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n   '' BankaKod,'' BankaDbs,'' As BankaAd \r\n   from KasaKart as k with (nolock)\r\n   UNION all\r\n   \r\n   SELECT k.id,0 firmano,k.sil as sl,kod,ad as ad,0 grp1,0 grp2,0 grp3,\r\n   (0) as Prom_Grp1,''as fatunvan,'vardicek' as cartp,9 Tip_id,0 Per_id,\r\n   ('')muhkod,('') muhonkod,(1) as crno,('')tcno,'' tel,\r\n   '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   ('') as grupad1,tip,1 TurId,\r\n   ('')adres,('')adres2,('')evil,('')evilce,('')vergidaire,('') vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n   '' BankaKod,'' BankaDbs,'' As BankaAd\r\n   from Harici_Kart as k with (nolock) where tip_id=9\r\n   UNION all\r\n   \r\n   SELECT k.id,0 firmano,k.sil as sl,kod,ad as ad,0 grp1,0 grp2,0 grp3,\r\n   (0) as Prom_Grp1,''as fatunvan,'vardikasa' as cartp,10 Tip_id,0 Per_id,\r\n   ('')muhkod,('') muhonkod,(1) as crno,('')tcno,'' tel,\r\n   '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   ('') as grupad1,tip,1 TurId,\r\n   ('')adres,('')adres2,('')evil,('')evilce,('')vergidaire,('') vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n   '' BankaKod,'' BankaDbs,'' As BankaAd \r\n   from Harici_Kart as k with (nolock) where tip_id=10\r\n   UNION all\r\n   \r\n    SELECT k.id,0 firmano,k.sil as sl,kod,ad as ad,0 grp1,0 grp2,0 grp3,\r\n   (0) as Prom_Grp1,''as fatunvan,'vardihes' as cartp,11 Tip_id,0 Per_id,\r\n   ('')muhkod,('') muhonkod,(1) as crno,('')tcno,'' tel,\r\n   '' fax,'' cep,'' mail,'' As VergiKNo,'' As VergiEposta,0 Efatura,\r\n    0 EfaturaTip,'' TicSicilNo,'' webadres,\r\n   ('') as grupad1,tip,1 TurId,\r\n   ('')adres,('')adres2,('')evil,('')evilce,('')vergidaire,('') vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto,0 Oto_FisVadeFark,\r\n   '' BankaKod,'' BankaDbs,'' As BankaAd \r\n   from Harici_Kart as k with (nolock) where tip_id=11"
  },
  {
    "schema": "dbo",
    "name": "irsaliyehrklistesi",
    "full_name": "dbo.irsaliyehrklistesi",
    "definition": "CREATE VIEW [dbo].irsaliyehrklistesi\r\nAS\r\n  SELECT id,irid,'S' as satirtip,sil,firmano,stktip,stkod,mik,\r\n  brmfiy,depkod,kdvyuz,kdvtut,kdvtip,brim,\r\n  ustbrim,carpan,parabrim,grupid,\r\n  kayok from irsaliyehrk  with (nolock)"
  },
  {
    "schema": "dbo",
    "name": "istkredi_Kart_Listesi",
    "full_name": "dbo.istkredi_Kart_Listesi",
    "definition": "CREATE VIEW [dbo].istkredi_Kart_Listesi\r\nAS\r\n  select k.*,\r\n  isnull((bak.borc-bak.alacak),0) top_bakiye,\r\n  (k.lim+(bak.borc-bak.alacak)) kal_limit,\r\n  (bak.vad_gelen) vad_gelen,\r\n  \r\n  DATEADD(day,k.heskesgun-1,DATEADD(mm,DATEDIFF(mm,0,GETDATE()),0))\r\n  hes_kes_tar,\r\n  DATEADD(day,k.hessongun-1,DATEADD(mm,DATEDIFF(mm,0,GETDATE()),0))\r\n  son_ode_tar\r\n  \r\n  from istkart as k with (nolock)\r\n  inner join Bakiye_istkredi as bak on bak.kod=k.kod"
  },
  {
    "schema": "dbo",
    "name": "Kasa_Kart_Listesi",
    "full_name": "dbo.Kasa_Kart_Listesi",
    "definition": "CREATE VIEW Kasa_Kart_Listesi\r\nAS\r\n  SELECT k.id,k.firmano,k.kod,k.ad,k.sil,k.muhkod,k.tip,k.parabrm,\r\n  isnull(round((bak.giren),2),0) giren_bakiye,\r\n  isnull(round((bak.cikan),2),0) cikan_bakiye,\r\n  isnull(round((bak.giren-bak.cikan),2),0) top_bakiye\r\n  from KasaKart as k with (nolock)\r\n  left join Bakiye_Kasa as bak on bak.kod=k.kod"
  },
  {
    "schema": "dbo",
    "name": "Micro_Stok_Listesi",
    "full_name": "dbo.Micro_Stok_Listesi",
    "definition": "CREATE VIEW [dbo].Micro_Stok_Listesi\r\nAS\r\n  select kod stokkod,ad stokad,\r\n  (select ad from stkbrm where kod=brim)birimad,\r\n  sat1fiy=case when sat1kdvtip='Dahil'  then\r\n  sat1fiy/(1+(sat1kdv/100)) else sat1fiy end,\r\n  sat2fiy=case when sat2kdvtip='Dahil'  then\r\n  sat2fiy/(1+(sat2kdv/100)) else sat2fiy end,\r\n  sat3fiy=case when sat3kdvtip='Dahil'  then\r\n  sat3fiy/(1+(sat3kdv/100)) else sat3fiy end,\r\n  sat4fiy=case when sat4kdvtip='Dahil'  then\r\n  sat4fiy/(1+(sat4kdv/100)) else sat4fiy end,\r\n  case when isnull(sat1pbrm,'')=''     then 0 else\r\n  case when isnull(sat1pbrm,'')='YTL'  then 0 else\r\n  case when isnull(sat1pbrm,'')='USD'  then 1 else\r\n  case when isnull(sat1pbrm,'')='EURO' then 2 else\r\n  case when isnull(sat1pbrm,'')='GBP'  then 12 end end end end end sat1pbrm,\r\n  case when isnull(sat2pbrm,'')=''     then 0 else\r\n  case when isnull(sat2pbrm,'')='YTL'  then 0 else\r\n  case when isnull(sat2pbrm,'''')='USD'  then 1 else\r\n  case when isnull(sat2pbrm,'''')='EURO' then 2 else\r\n  case when isnull(sat2pbrm,'''')='GBP'  then 12 end end end end end sat2pbrm,\r\n  case when isnull(sat3pbrm,'''')=''     then 0 else\r\n  case when isnull(sat3pbrm,'''')='YTL'  then 0 else\r\n  case when isnull(sat3pbrm,'''')='USD'  then 1 else\r\n  case when isnull(sat3pbrm,'''')='EURO' then 2 else\r\n  case when isnull(sat3pbrm,'''')='GBP'  then 12 end end end end end sat3pbrm,\r\n  case when isnull(sat4pbrm,'''')=''     then 0 else\r\n  case when isnull(sat4pbrm,'''')='YTL'  then 0 else\r\n  case when isnull(sat4pbrm,'''')='USD'  then 1 else\r\n  case when isnull(sat4pbrm,'')='EURO' then 2 else\r\n  case when isnull(sat4pbrm,'')='GBP'  then 12 end end end end end sat4pbrm,\r\n  case when isnull(sat1kdv,0)=0 then 1 else \r\n  case when isnull(sat1kdv,0)=1  then 2 else\r\n  case when isnull(sat1kdv,0)=8  then 3 else\r\n  case when isnull(sat1kdv,0)=18  then 4  end end end end sat1kdv\r\n  from stokkart where sil=0"
  },
  {
    "schema": "dbo",
    "name": "okunanotodosya",
    "full_name": "dbo.okunanotodosya",
    "definition": "CREATE VIEW [dbo].okunanotodosya\r\nAS\r\n  SELECT firmano,otomasad,dosya,\r\n  min(tarih+cast(saat as datetime)) bastarih,\r\n  max(tarih+cast(saat as datetime)) sontarih,\r\n  count(*) topkayit,\r\n  sum(cast(aktar as int)) as aktarkayit\r\n  from otomasoku with (nolock)\r\n  group by firmano,otomasad,dosya"
  },
  {
    "schema": "dbo",
    "name": "Perakende_Kart_listesi",
    "full_name": "dbo.Perakende_Kart_listesi",
    "definition": "CREATE VIEW [dbo].Perakende_Kart_listesi\r\nAS\r\n  SELECT k.id,k.firmano,k.sil,k.drm,\r\n  k.kod,k.ad,k.soyad,k.unvan,k.grp1,k.grp2,k.grp3,\r\n  k.ilgili,k.tel,k.fax,k.cep,k.muhkod,k.resim,k.adres,\r\n  k.evil,k.evilce,k.vergidaire,k.vergino,k.mail,\r\n  k.tcno,k.kulkod,k.kulsif,k.fisbak,k.carbak,\r\n  k.olususer,k.olustarsaat,k.deguser,k.degtarsaat,\r\n  k.dataok,k.parabrm,k.adres2,k.fisadet,\r\n  k.muhonkod,k.fatunvan,k.webextre,k.Prom_Grp1,\r\n  k.vergieposta,k.EFatura,k.EfaturaTip,\r\n  k.TicSicilNo,k.DogumTarih,\r\n  bak.fis_bakiye as fis_bakiye,\r\n  bak.car_bakiye as car_bakiye,\r\n  round((bak.fis_bakiye+bak.car_bakiye),2) top_bakiye,\r\n  bak.sonhrk_tarih,\r\n  bak.son_fis_tarih,\r\n  bak.son_fis_tutar,\r\n  bak.fis_adet,\r\n  (k.fisbak+k.carbak) topbak,\r\n  (g.ad) Grup from perakendekart as k\r\n  left join grup as g on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2\r\n  when k.grp1>0 then k.grp1 end\r\n  left join Bakiye_Perakende as bak on bak.kod=k.kod"
  },
  {
    "schema": "dbo",
    "name": "Personel_Kart_Listesi",
    "full_name": "dbo.Personel_Kart_Listesi",
    "definition": "CREATE VIEW [dbo].Personel_Kart_Listesi\r\nAS\r\n  SELECT k.[id],k.[drm],k.[sil],\r\n  k.[firmano],f.ad as firmaad,\r\n  k.[kod],k.[grp1],k.[grp2],k.[grp3],k.[ad],k.[soyad],\r\n  k.[tel],k.[fax],k.[cep],k.[muhkod],k.muhonkod,\r\n  k.[resim],k.[adres],k.[evil],[evilce],\r\n  k.[vergidaire],k.[vergino],k.[mail],k.[tcno],k.[toplim],k.limit_tip,\r\n  k.[maasgun],k.[maas],k.[prim],k.[isk],k.[isbastar],k.[isbittar],\r\n  k.[fisbak],k.[carbak],k.[gos],\r\n  k.[olususer],k.[olustarsaat],k.[deguser],k.[degtarsaat],\r\n  k.[fisadet],k.[fisaktut],k.[fisakadet],k.[parabrm],k.[actutar],k.[adres2],\r\n  k.ad+' '+k.soyad as unvan,\r\n  k.sgkno,k.banka_ad,k.banka_sube,k.hesapno,\r\n  bak.fis_bakiye as fis_bakiye,\r\n  bak.car_bakiye as car_bakiye,\r\n  round((bak.fis_bakiye+bak.car_bakiye),2) top_bakiye,\r\n  ((bak.fis_bakiye-bak.car_bakiye)-bak.cek_bakiye) as cekharc_bakiye,\r\n  bak.sonhrk_tarih,\r\n  bak.son_fis_tarih,\r\n  bak.son_fis_tutar,\r\n  bak.fis_adet,\r\n  (g.ad) grup,(k.fisbak+k.carbak) topbak from perkart as k\r\n  left join grup as g on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2\r\n  when k.grp1>0 then k.grp1 end\r\n  inner join Bakiye_Personel as bak on bak.kod=k.kod\r\n  left join firma as f on k.firmano=f.id"
  },
  {
    "schema": "dbo",
    "name": "Personel_Maas_Liste",
    "full_name": "dbo.Personel_Maas_Liste",
    "definition": "CREATE VIEW [dbo].Personel_Maas_Liste\r\nAS\r\n  SELECT h.id,h.firmano,h.carhrkid,h.permasmasid,h.islmtip,h.islmtipad,h.islmhrk,h.islmhrkad,\r\n  h.yertip,h.yerad,h.tarih,h.saat,h.belno,h.cartip,h.carkod,k.ad+' '+k.soyad as unvan,\r\n  alacak as tutar,ack,h.olususer,h.olustarsaat,h.deguser,h.degtarsaat,h.sil,h.devir\r\n  from carihrk as h\r\n  inner join perkart k on k.kod=h.carkod and k.gos=1 where\r\n  h.permasmasid>0 AND h.cartip='perkart'"
  },
  {
    "schema": "dbo",
    "name": "Pos_Kart_Listesi",
    "full_name": "dbo.Pos_Kart_Listesi",
    "definition": "CREATE VIEW [dbo].Pos_Kart_Listesi\r\nAS\r\n  select p.id,p.firmano,p.kod,p.ad,bankod,(b.ad) bankad,\r\n  p.muhonkod,p.muhkod,\r\n  p.kom,p.exkom,p.vade,p.vadetip,p.sil,\r\n  p.drm,p.parabrm,p.Mas_Gid_Kod,gd.ad as Mas_Gid_Ad,\r\n  bak.bek_bak as bekbak,\r\n  bak.kom_bak as kombak,(bak.bek_bak-bak.kom_bak) as nettutar,\r\n  bak.vad_gelen  from poskart as p\r\n  left join bankakart as b on p.bankod=b.kod\r\n  left join gelgidkart as gd on p.Mas_Gid_Kod=gd.kod\r\n  inner join Bakiye_Pos as bak on p.kod=bak.kod"
  },
  {
    "schema": "dbo",
    "name": "Prom_Dahil_Urun_List",
    "full_name": "dbo.Prom_Dahil_Urun_List",
    "definition": "create VIEW [dbo].Prom_Dahil_Urun_List \r\nAS\r\n  SELECT p.id,P.Firmano,k.id as Stk_id,k.kod,k.ad,k.tip,k.tip_id,p.sil,\r\n  P.grp1,\r\n  (SELECT ack_Tr FROM Stk_Tip with (nolock) WHERE id=k.Tip_id) as Stok_Tip_Ad,\r\n  p.Puan_Tip,p.Puan_Brm,p.Puan_Otomas,p.Puan_Otomas2,\r\n  p.Puan_Nakit,p.Puan_kk,p.Puan_Fis,\r\n  (SELECT AD_TR FROM Prom_Urun_Puan_Tip with (nolock) WHERE id=p.Puan_Tip)\r\n  as Puan_Tip_Ad,\r\n    \r\n  case when k.sat1kdvtip='Dahil' then \r\n  k.sat1fiy else k.sat1fiy*(1+(k.sat1kdv/100)) end\r\n   as Sat_Fiy_kdvli\r\n    \r\n  from stokkart as k with (nolock) inner join Prom_Urun_Puan  as p with (nolock)\r\n  on k.id=p.Urun_id and k.tip_id=p.Urun_tip_id"
  },
  {
    "schema": "dbo",
    "name": "Prom_Musteri_Listesi",
    "full_name": "dbo.Prom_Musteri_Listesi",
    "definition": "CREATE VIEW [dbo].Prom_Musteri_Listesi \r\nAS\r\n  SELECT otk.id Ot_id,k.id,'1-'+cast(k.id as varchar(30)) idx,\r\n  1 cartip_id,'carikart' cartip,k.firmano,\r\n  k.grp1,k.grp2,k.grp3,g.ad as Grup_Ad,k.DogumTarih,\r\n  k.kod,\r\n  k.ad,k.soyad,k.unvan,k.sil,k.adres,k.adres2,\r\n  k.evil,k.evilce,k.vergino,k.vergidaire,k.tel,k.fax,\r\n  k.cep,k.mail,k.drm,k.parabrm,\r\n  k.Prom_Grp1,\r\n  ISNULL(bak.Giren_Puan,0) Giren_Puan,\r\n  ISNULL(bak.Cikan_Puan,0) Cikan_Puan,\r\n  ISNULL(bak.Mevcut_Puan,0) Mevcut_Puan,\r\n  ISNULL(bak.Als_Tutar,0) Als_Tutar,\r\n  ISNULL(bak.Kul_Tutar,0) Kul_Tutar,\r\n  ISNULL(bak.Als_Tutar-Kul_Tutar,0) Kal_Tutar,\r\n  bak.SonTarih,\r\n  otk.prom_Grs,otk.Fis_Grs,otk.plaka,otk.kartno,otk.id As KartId\r\n  from  carikart as k  with (nolock) inner join otomasgenkod as otk with (nolock) on\r\n  otk.cartip_id=1 and otk.car_id=k.id and otk.prom_Grs=1 and isnull(otk.sil,0)=0\r\n  left join Bakiye_Prom_Puan as bak with (nolock) on\r\n  bak.Car_KartID=otk.id\r\n  left join grup g with (nolock) on g.id=case \r\n  when k.grp3>0 then k.grp3 \r\n  when k.grp2>0 then k.grp2 \r\n  when k.grp1>0 then k.grp1 end\r\n  UNION\r\n  SELECT otk.id Ot_id,k.id,'7-'+cast(k.id as varchar(30)) idx,\r\n  7 cartip_id,'perakendekart' as cartip,k.firmano,\r\n  k.grp1,k.grp2,k.grp3,g.ad as Grup_Ad,k.DogumTarih,\r\n  k.kod,\r\n  k.ad,k.soyad,k.unvan,k.sil,k.adres,k.adres2,\r\n  k.evil,k.evilce,k.vergino,k.vergidaire,k.tel,k.fax,\r\n  k.cep,k.mail,k.drm,k.parabrm,\r\n  k.Prom_Grp1,\r\n  ISNULL(bak.Giren_Puan,0) Giren_Puan,\r\n  ISNULL(bak.Cikan_Puan,0) Cikan_Puan,\r\n  ISNULL(bak.Mevcut_Puan,0) Mevcut_Puan,\r\n  ISNULL(bak.Als_Tutar,0) Als_Tutar,\r\n  ISNULL(bak.Kul_Tutar,0) Kul_Tutar,\r\n  ISNULL(bak.Als_Tutar-Kul_Tutar,0) Kal_Tutar,\r\n  bak.SonTarih,\r\n  otk.prom_Grs,otk.Fis_Grs,otk.plaka,otk.kartno,otk.id As KartId\r\n  from perakendekart as k with (nolock) inner join otomasgenkod as otk with (nolock) on\r\n  otk.cartip_id=7 and otk.car_id=k.id and otk.prom_Grs=1  and isnull(otk.sil,0)=0\r\n  left join Bakiye_Prom_Puan as bak with (nolock) on\r\n  bak.Car_KartID=otk.id \r\n  left join grup g with (nolock) on g.id=case \r\n  when k.grp3>0 then k.grp3 \r\n  when k.grp2>0 then k.grp2 \r\n  when k.grp1>0 then k.grp1 end"
  },
  {
    "schema": "dbo",
    "name": "Prom_Satis_Listesi",
    "full_name": "dbo.Prom_Satis_Listesi",
    "definition": "CREATE VIEW [dbo].Prom_Satis_Listesi \r\nAS\r\n  SELECT p.*,k.kod,k.unvan\r\n  From Prom_Sat_Baslik as p with (nolock) \r\n  inner join Prom_Musteri_Listesi as k with (nolock) on\r\n  p.cartip_id=k.cartip_id and p.car_id=k.id\r\n  and p.KartId=k.KartId"
  },
  {
    "schema": "dbo",
    "name": "Prom_Urun_Kart_List",
    "full_name": "dbo.Prom_Urun_Kart_List",
    "definition": "CREATE VIEW [dbo].Prom_Urun_Kart_List \r\nAS\r\n  SELECT k.id,k.Firmano,k.tip_id,k.sil,k.kod,k.ad,k.Prom_Sat_Puan,\r\n  k.AcMik,k.AlsFiy,k.AlsKdv,\r\n  K.Prom_Sat_Tip,k.Prom_Kac_Satis,\r\n  ( SELECT AD_TR FROM Prom_Urun_Sat_Tip with (nolock)\r\n  WHERE id=K.Prom_Sat_Tip) as Sat_Tip_Ad,\r\n  /* dbo.Fn_Prom_Urun_Sat_Tip(K.Prom_Sat_Tip) as Sat_Tip_Ad, */\r\n  ISNULL(h.Giren_Miktar,0) Giren_Miktar,\r\n  ISNULL(h.Cikan_Miktar,0) Cikan_Miktar,\r\n  ISNULL(h.Mevcut_Miktar,0) Mevcut_Miktar\r\n  from Stokkart as k with (nolock)\r\n  left JOIN Bakiye_Prom_Urun_Miktar h with (nolock)\r\n  on k.id=h.Stk_id and h.tip_id=k.tip_id\r\n  where k.prom_urun=1\r\n  union all\r\n   SELECT k.id,k.Firmano,k.tip_id,k.sil,k.kod,k.ad,\r\n   k.Prom_Sat_Puan,0 AcMik,k.Fiyat,k.Kdv,\r\n   K.Prom_Sat_Tip,k.Prom_Kac_Satis,\r\n  ( SELECT AD_TR FROM Prom_Urun_Sat_Tip  with (nolock)\r\n  WHERE id=K.Prom_Sat_Tip) as Sat_Tip_Ad,\r\n  /* dbo.Fn_Prom_Urun_Sat_Tip(K.Prom_Sat_Tip) as Sat_Tip_Ad, */\r\n  ISNULL(h.Giren_Miktar,0) Giren_Miktar,\r\n  ISNULL(h.Cikan_Miktar,0) Cikan_Miktar,\r\n  ISNULL(h.Mevcut_Miktar,0) Mevcut_Miktar\r\n  from gelgidkart as k with (nolock)\r\n  left JOIN Bakiye_Prom_Urun_Miktar h with (nolock)\r\n  on k.id=h.Stk_id and h.tip_id=3\r\n  where k.prom_urun=1"
  },
  {
    "schema": "dbo",
    "name": "RehberBarkodListesi",
    "full_name": "dbo.RehberBarkodListesi",
    "definition": "CREATE VIEW [dbo].[RehberBarkodListesi]\r\nAs \r\n  SELECT \r\n  r.Id RehberId,r.GrupId as RehberGrupId,b.Id as BarkodId,b.Barkod,\r\n  r.Unvan as RehberUnvan\r\n  FROM  RehberKart as r with (nolock) \r\n  inner join RehberBarkod as b with (nolock)  on B.RehberId=r.Id\r\n  and r.sil=0 and b.sil=0"
  },
  {
    "schema": "dbo",
    "name": "RehberGrupDetayListesi",
    "full_name": "dbo.RehberGrupDetayListesi",
    "definition": "CREATE VIEW [dbo].[RehberGrupDetayListesi]\r\nAs \r\n  SELECT \r\n  g.Id GrupId,h.Id as GrupDetayId,h.StokGrupId,\r\n  h.KomisyonYuzde,h.IndirimYuzde\r\n  FROM  RehberGrup as g with (nolock) \r\n  inner join RehberGrupDetay as h with (nolock)  on g.Id=h.GrupId\r\n  and g.sil=0 and h.sil=0"
  },
  {
    "schema": "dbo",
    "name": "RehberKartListesi",
    "full_name": "dbo.RehberKartListesi",
    "definition": "CREATE VIEW dbo.RehberKartListesi\r\nAs \r\n  SELECT \r\n  r.Id,r.FirmaNo,r.Kod,r.Unvan,r.CepNo,r.GrupId,r.OlusturmaTarihSaat,r.OlusturmaKullaniciUnvan,\r\n  r.DegistirmeTarihSaat,r.DegistirmeKullaniciUnvan,r.SilTarihSaat,r.SilKullaniciUnvan,\r\n  r.RemoteId,r.TransferStartId,r.TransferStopId,r.Sil,r.ParaBirim,r.Durum,\r\n  g.ad as Grupad,\r\n  bak.fis_bakiye as fis_bakiye,\r\n  bak.car_bakiye as car_bakiye,\r\n  round((bak.fis_bakiye+bak.car_bakiye),2) top_bakiye,\r\n  bak.sonhrk_tarih,\r\n  bak.son_fis_tarih,\r\n  bak.son_fis_tutar,\r\n  bak.fis_adet,\r\n  (bak.fis_bakiye+bak.car_bakiye) topbak  \r\n  FROM  RehberKart as r with (nolock) \r\n  left join RehberGrup as g with (nolock)  on g.Id=r.GrupId\r\n  left join Bakiye_Rehber as bak on bak.kod=r.kod"
  },
  {
    "schema": "dbo",
    "name": "sayac_tanklistesi",
    "full_name": "dbo.sayac_tanklistesi",
    "definition": "CREATE VIEW [dbo].sayac_tanklistesi\r\nAS\r\n  select k.id,k.kod sayac_kod,k.ad as sayac_ad,t.kod as tank_kod,t.ad as tank_ad,\r\n  t.bagak from sayackart as k with (nolock) inner join tankkart as t with (nolock) on t.kod=k.tankod\r\n  where t.sil=0 and k.sil=0 and k.drm='Aktif'"
  },
  {
    "schema": "dbo",
    "name": "Stok_FirmaFiyatDurum",
    "full_name": "dbo.Stok_FirmaFiyatDurum",
    "definition": "CREATE VIEW dbo.Stok_FirmaFiyatDurum\r\nAS\r\n\r\n Select S.Firmano,K.id,K.Tip,K.Kod,K.Ad,\r\n ISNULL(A.AlisFiyatKdvli,0) AlisFiyat,\r\n ISNULL(S.Fiyat,0) as SatisFiyat,\r\n ISNULL(M.Miktar,0) as MevcutMiktar\r\n From Stokkart as K with(nolock)\r\n Left Join Stok_Fiyat as S with(nolock)\r\n on S.Stk_id=K.id And S.FiyNo=1 and S.FiyTip=2\r\n Left Join _Stok_FirmaAlisFiyat as A with(nolock)\r\n on A.stktip=K.Tip and A.Stkod=K.Kod And\r\n A.Firmano=S.FirmaNo\r\n Left Join _Stok_FirmaMiktar as M with(nolock)\r\n on M.stktip=K.Tip and M.Stkod=K.Kod And\r\n M.Firmano=S.FirmaNo"
  },
  {
    "schema": "dbo",
    "name": "Stok_FirmaFiyatList",
    "full_name": "dbo.Stok_FirmaFiyatList",
    "definition": "CREATE VIEW [dbo].[Stok_FirmaFiyatList]\r\nAS\r\n\r\n Select isnull(S1.Firmano,0) Firmano,\r\n F.ad as FirmaUnvan,\r\n K.id,K.Tip,K.Kod,K.Ad,K.Grp1,K.Grp2,K.Grp3,\r\n K.Sat1Kdv SatisKdv,K.AlsKdv AlisKdv,\r\n ISNULL(A.Fiyat,0) AlisFiyat,\r\n ISNULL(S1.Fiyat,0) as SatisFiyat1,\r\n ISNULL(S2.Fiyat,0) as SatisFiyat2,\r\n ISNULL(S3.Fiyat,0) as SatisFiyat3,\r\n ISNULL(S4.Fiyat,0) as SatisFiyat4\r\n /*ISNULL(M.Miktar,0) as MevcutMiktar */\r\n From Stokkart as K with(nolock)\r\n inner join Firma as F with(nolock) on isnull(F.sil,0)=0\r\n inner Join Stok_Fiyat as S1 with(nolock)\r\n on S1.Stk_id=K.id And S1.FiyNo=1 and S1.FiyTip=2 And F.id=S1.FirmaNo\r\n inner Join Stok_Fiyat as S2 with(nolock)\r\n on S2.Stk_id=K.id And S2.FiyNo=2 and S2.FiyTip=2 And F.id=S2.FirmaNo\r\n inner Join Stok_Fiyat as S3 with(nolock)\r\n on S3.Stk_id=K.id And S3.FiyNo=3 and S3.FiyTip=2 And F.id=S3.FirmaNo\r\n inner Join Stok_Fiyat as S4 with(nolock)\r\n on S4.Stk_id=K.id And S4.FiyNo=4 and S4.FiyTip=2 And F.id=S4.FirmaNo\r\n inner Join Stok_Fiyat as A with(nolock)\r\n on A.Stk_id=K.id And A.FiyNo=1 and A.FiyTip=1 And F.id=A.FirmaNo\r\n /*\r\n Left Join _Stok_FirmaMiktar as M with(nolock)\r\n on M.stktip=K.Tip and M.Stkod=K.Kod And M.Firmano=S1.FirmaNo\r\n */"
  },
  {
    "schema": "dbo",
    "name": "Stok_Genel_Liste",
    "full_name": "dbo.Stok_Genel_Liste",
    "definition": "CREATE VIEW [dbo].Stok_Genel_Liste \r\n AS\r\n select \r\n  k.firmano,\r\n  k.id,\r\n  k.tip_id,\r\n  k.tip,\r\n  ('-') as Tipi,\r\n  k.kod AS kod,\r\n  k.ad AS ad,\r\n  k.sil,\r\n  k.grp1,k.grp2,k.grp3,\r\n  k.alskdv,\r\n  k.sat1kdv,\r\n  k.sat2kdv,\r\n  k.sat3kdv,\r\n  k.sat4kdv,\r\n  case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end sat1fiykdvli,\r\n  case when sat1kdvtip='Hariç' then sat1fiy else sat1fiy/(1+(sat1kdv/100)) end sat1fiykdvsiz,\r\n  case when sat2kdvtip='Dahil' then sat2fiy else sat2fiy*(1+(sat1kdv/100)) end sat2fiykdvli,\r\n  case when sat2kdvtip='Hariç' then sat2fiy else sat2fiy/(1+(sat1kdv/100)) end sat2fiykdvsiz,\r\n  case when alskdvtip='Dahil' then alsfiy else alsfiy*(1+(alskdv/100)) end  alsfiykdvli,\r\n  case when alskdvtip='Hariç' then alsfiy else alsfiy/(1+(alskdv/100)) end  alsfiykdvsiz,\r\n  k.Prom,k.Puan_Tip,k.Puan_Brm,k.Puan_Nakit,k.Puan_KK,k.Puan_Fis\r\n  from stokkart as k with (nolock)\r\n  \r\n  UNION\r\n  select\r\n  k.firmano, \r\n  k.id,\r\n  (3) tip_id,\r\n  'gelgid' as tip,\r\n  ('gelgidkart') as Tipi,\r\n  k.kod AS kod,\r\n  k.ad AS ad,\r\n  k.sil,\r\n  k.grp1,\r\n  k.grp2,\r\n  k.grp3,\r\n  0 alskdv,\r\n  k.kdv as sat1kdv,\r\n  0 sat2kdv,\r\n  0 sat3kdv,\r\n  0 sat4kdv,\r\n  case when k.kdvtip='Dahil' then k.fiyat else fiyat*(1+(k.kdv/100)) end sat1fiykdvli,\r\n  case when k.kdvtip='Hariç' then k.fiyat else k.fiyat/(1+(k.kdv/100)) end sat1fiykdvsiz,\r\n  0  sat2fiykdvli,\r\n  0  sat2fiykdvsiz,\r\n  0  alsfiykdvli,\r\n  0  alsfiykdvsiz,\r\n  k.Prom,k.Puan_Tip,k.Puan_Brm,k.Puan_Nakit,k.Puan_KK,k.Puan_Fis\r\n  from gelgidkart as k with (nolock)"
  },
  {
    "schema": "dbo",
    "name": "Stok_Genel_Listesi",
    "full_name": "dbo.Stok_Genel_Listesi",
    "definition": "CREATE VIEW [dbo].Stok_Genel_Listesi\r\nAS\r\n  select k.kod AS kod,k.ad AS ad,\r\n  (g.ad) as grup_ad,\r\n  case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end sat1fiykdvli,\r\n  case when sat1kdvtip='Hariç' then sat1fiy else sat1fiy/(1+(sat1kdv/100)) end sat1fiykdvsiz,\r\n  case when sat2kdvtip='Dahil' then sat2fiy else sat2fiy*(1+(sat2kdv/100)) end sat2fiykdvli,\r\n  case when sat2kdvtip='Hariç' then sat2fiy else sat2fiy/(1+(sat2kdv/100)) end sat2fiykdvsiz,\r\n  case when alskdvtip='Dahil' then alsfiy else alsfiy*(1+(alskdv/100)) end  alsfiykdvli,\r\n  case when alskdvtip='Hariç' then alsfiy else alsfiy/(1+(alskdv/100)) end  alsfiykdvsiz\r\n\r\n  from stokkart as k with (nolock)\r\n  left join Bakiye_Stok_Miktar as h with (nolock) on h.tip=k.tip and h.kod=k.kod\r\n  left join grup as g with (nolock) on g.id=case when k.grp3>0 then k.grp3\r\n  when k.grp2>0 then k.grp2\r\n  when k.grp1>0 then k.grp1 end"
  },
  {
    "schema": "dbo",
    "name": "Stok_iade_Miktar_Listesi",
    "full_name": "dbo.Stok_iade_Miktar_Listesi",
    "definition": "CREATE VIEW [dbo].Stok_iade_Miktar_Listesi\r\nAS\r\n\r\n  select k.tip,k.kod,\r\n  /*-aide miktar */\r\n  isnull(sum(aiademik),0) as alsiade_mik,\r\n  isnull(sum(aiademik*brmfiykdvli),0) alsiade_topkdvli,\r\n  isnull(sum(siademik),0) as satiade_mik,\r\n  isnull(sum(siademik*brmfiykdvli),0) as satiade_topkdvli\r\n  from stokkart as k with (nolock)\r\n  left join stkhrk as h with (nolock)\r\n  on h.stktip=k.tip and h.stkod=k.kod\r\n  and h.sil=0\r\n  group by k.tip,k.kod"
  },
  {
    "schema": "dbo",
    "name": "Stok_Kart_Akaryakit_Listesi",
    "full_name": "dbo.Stok_Kart_Akaryakit_Listesi",
    "definition": "create VIEW [dbo].Stok_Kart_Akaryakit_Listesi\r\nAS\r\n\r\n select s.id,s.remote_id,s.tip,s.kod,s.grp1,s.grp2,s.grp3,\r\n    s.firmano,\r\n    s.ad,s.sat1fiy,s.sat1kdv,s.sat1kdvtip,\r\n    s.sat2fiy,s.sat2kdv,s.sat2kdvtip,\r\n    s.alsfiy,s.alskdv,s.alskdvtip,\r\n    s.kesft,s.brim,s.otv,s.eksat,\r\n    s.minmik,s.drm,s.zrapor,\r\n    s.muhgrskod,s.muhckskod,\r\n    s.muhonkod,\r\n    s.muh_als_iad_kod,s.muh_sat_iad_kod,\r\n    s.muh_als_isk_kod,s.muh_sat_isk_kod,\r\n    s.muh_als_otv_kod,s.muh_sat_otv_kod,\r\n    s.muh_sat_mal_kod,\r\n    s.brmcarp,s.brmust,s.ykno,\r\n    s.alsmik,s.satmik,s.sil,s.olususer,s.olustarsaat,\r\n    s.deguser,s.degtarsaat,s.dataok,\r\n    s.acmik,s.karoran1,s.karoran2,s.grpkdvoran,\r\n    s.sat1pbrm,s.sat2pbrm,s.sat3pbrm,\r\n    s.sat4pbrm,s.alspbrm,s.sat3fiy,\r\n    s.sat3kdv,s.sat3kdvtip,s.sat4fiy,\r\n    s.sat4kdv,s.sat4kdvtip,s.alsiademik,s.satiademik,\r\n    s.brmust2,s.brmcarp2,S.Epdk_Tur,\r\n    \r\n    \r\n     mk.har_miktar,\r\n     mk.gir_miktar,\r\n     mk.cik_miktar,\r\n     mk.gir_topkdvli,\r\n     mk.gir_topkdvsiz,\r\n     mk.cik_topkdvli,\r\n     mk.cik_topkdvsiz,\r\n     mk.mev_miktar,\r\n\r\n     mk.alsiade_mik, /*alsiademik */\r\n     mk.satiade_mik,  /*satiademik */\r\n     mk.alsiade_topkdvli,\r\n     mk.satiade_topkdvli,\r\n     mk.ortals_fiykdvli,\r\n     mk.ortals_fiykdvsiz,\r\n\r\n \r\n case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end satfiykdvli,\r\n case when sat1kdvtip='Hariç' then sat1fiy else sat1fiy/(1+(sat1kdv/100)) end satfiykdvsiz,\r\n case when alskdvtip='Dahil' then alsfiy else alsfiy*(1+(alskdv/100)) end alsfiykdvli,\r\n case when alskdvtip='Hariç' then alsfiy else alsfiy/(1+(alskdv/100)) end alsfiykdvsiz,\r\n\r\n case when sat1kdvtip='Hariç' then (mk.mev_miktar)*sat1fiy\r\n else (mk.mev_miktar)*(sat1fiy/(1+(sat1kdv/100))) end kalsattopkdvsiz,\r\n case when sat1kdvtip='Dahil' then (mk.mev_miktar)*sat1fiy\r\n else (mk.mev_miktar)*(sat1fiy*(1+(sat1kdv/100))) end kalsattopkdvli,\r\n case when alskdvtip='Hariç' then (mk.mev_miktar)*alsfiy\r\n else (mk.mev_miktar)*(alsfiy/(1+(alskdv/100))) end kalalstopkdvsiz,\r\n case when alskdvtip='Dahil' then (mk.mev_miktar)*alsfiy\r\n else (mk.mev_miktar)*(alsfiy*(1+(alskdv/100))) end kalalstopkdvli\r\n from stokkart as s  with (nolock)\r\n inner join Bakiye_Stok_Miktar as mk with (nolock) on mk.kod=s.kod and mk.tip=s.tip\r\n where s.tip='akykt'"
  },
  {
    "schema": "dbo",
    "name": "Stok_Kart_Birim",
    "full_name": "dbo.Stok_Kart_Birim",
    "definition": "CREATE VIEW [dbo].Stok_Kart_Birim\r\nAS\r\n  SELECT  k.tip,k.kod,k.brim as brm_kod,1 as brm_carpan from stokkart as k with (nolock)\r\n  union \r\n  SELECT  k.tip,k.kod,k.brmust as brm_kod,k.brmcarp as brm_carpan from stokkart as k with (nolock)\r\n  where k.brmust<>''\r\n  union\r\n  SELECT  k.tip,k.kod,k.brmust2 as brm_kod,k.brmcarp2 as brm_carpan\r\n  from stokkart as k with (nolock) where k.brmust2<>''"
  },
  {
    "schema": "dbo",
    "name": "Stok_Kart_Listesi",
    "full_name": "dbo.Stok_Kart_Listesi",
    "definition": "create VIEW [dbo].Stok_Kart_Listesi\r\nAS\r\n  select\r\n  k.id,k.remote_id,\r\n  'S'+convert(varchar,k.id) UniqueId,\r\n  k.firmano, \r\n  K.tip_id,\r\n  k.tip,\r\n  k.kod AS kod,\r\n  k.ad AS ad,\r\n  k.sil,\r\n  k.grp1,k.grp2,k.grp3,\r\n  mk.mev_miktar,\r\n  k.alskdv,\r\n  k.sat1kdv,\r\n  k.sat2kdv,\r\n  k.sat3kdv,\r\n  k.sat4kdv,\r\n  case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end sat1fiykdvli,\r\n  case when sat1kdvtip='Hariç' then sat1fiy else sat1fiy/(1+(sat1kdv/100)) end sat1fiykdvsiz,\r\n  case when sat2kdvtip='Dahil' then sat2fiy else sat2fiy*(1+(sat1kdv/100)) end sat2fiykdvli,\r\n  case when sat2kdvtip='Hariç' then sat2fiy else sat2fiy/(1+(sat1kdv/100)) end sat2fiykdvsiz,\r\n  case when alskdvtip='Dahil' then alsfiy else alsfiy*(1+(alskdv/100)) end  alsfiykdvli,\r\n  case when alskdvtip='Hariç' then alsfiy else alsfiy/(1+(alskdv/100)) end  alsfiykdvsiz\r\n  from stokkart as k with (nolock)\r\n  inner join Bakiye_Stok_Miktar as mk with (nolock) on mk.kod=k.kod and mk.tip=k.tip\r\n  \r\n  UNION\r\n  select \r\n  k.id,k.remote_id,\r\n  'G'+convert(varchar,k.id) UniqueId,\r\n  k.firmano,\r\n  K.tip_id,\r\n  'gelgid' as tip,\r\n  k.kod AS kod,\r\n  k.ad AS ad,\r\n  k.sil,\r\n  k.grp1,\r\n  k.grp2,\r\n  k.grp3,\r\n  0 mev_miktar,\r\n  0 alskdv,\r\n  k.kdv as sat1kdv,\r\n  0 sat2kdv,\r\n  0 sat3kdv,\r\n  0 sat4kdv,\r\n  case when k.kdvtip='Dahil' then k.fiyat else fiyat*(1+(k.kdv/100)) end sat1fiykdvli,\r\n  case when k.kdvtip='Hariç' then k.fiyat else k.fiyat/(1+(k.kdv/100)) end sat1fiykdvsiz,\r\n  0  sat2fiykdvli,\r\n  0  sat2fiykdvsiz,\r\n  0  alsfiykdvli,\r\n  0  alsfiykdvsiz\r\n  from gelgidkart as k with (nolock)"
  },
  {
    "schema": "dbo",
    "name": "Stok_Kart_Market",
    "full_name": "dbo.Stok_Kart_Market",
    "definition": "create VIEW [dbo].Stok_Kart_Market\r\nAS\r\n  select s.id,s.remote_id,s.tip,s.kod,s.grp1,s.grp2,s.grp3,\r\n    s.firmano,s.ad,s.sat1fiy,s.sat1kdv,s.sat1kdvtip,\r\n    s.sat2fiy,s.sat2kdv,s.sat2kdvtip,s.alsfiy,\r\n    s.alskdv,s.alskdvtip,\r\n    s.kesft,s.brim,s.otv,s.eksat,\r\n    s.minmik,s.drm,s.muhgrskod,s.muhckskod,\r\n    s.brmcarp,s.brmust,s.ykno,\r\n    s.alsmik,s.satmik,s.sil,s.olususer,s.olustarsaat,\r\n    s.deguser,s.degtarsaat,s.dataok,\r\n    s.acmik,s.karoran1,s.karoran2,s.grpkdvoran,\r\n    s.sat1pbrm,s.sat2pbrm,s.sat3pbrm,\r\n    s.sat4pbrm,s.alspbrm,s.sat3fiy,\r\n    s.sat3kdv,s.sat3kdvtip,s.sat4fiy,\r\n    s.sat4kdv,s.sat4kdvtip,s.alsiademik,s.satiademik,\r\n    s.brmust2,s.brmcarp2,\r\n  (g.ad) as grup,\r\n  (case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end ) as satiadesiztoptut,\r\n  case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end satfiykdvli,\r\n  case when sat1kdvtip='Hariç' then sat1fiy else sat1fiy/(1+(sat1kdv/100)) end satfiykdvsiz,\r\n  ((case when sat1kdvtip='Hariç' then satkdvlitoptut else satkdvlitoptut/(1+(sat1kdv/100)) end )) sattutkdvsiz,\r\n  case when alskdvtip='Dahil' then alsfiy else alsfiy*(1+(alskdv/100)) end alsfiykdvli,\r\n  case when alskdvtip='Hariç' then alsfiy else alsfiy/(1+(alskdv/100)) end alsfiykdvsiz\r\n  from stokkart as s WITH (NOLOCK)\r\n  left join grup as g WITH (NOLOCK) on g.id=case when s.grp3>0 then s.grp3\r\n  when s.grp2>0 then s.grp2\r\n  when s.grp1>0 then s.grp1 end\r\n  where s.tip='markt'"
  },
  {
    "schema": "dbo",
    "name": "Stok_Kart_Market_Listesi",
    "full_name": "dbo.Stok_Kart_Market_Listesi",
    "definition": "CREATE VIEW [dbo].Stok_Kart_Market_Listesi\r\nAS\r\n select \r\n    s.id,s.remote_id,s.tip,s.tip_id,s.kod,s.grp1,s.grp2,s.grp3,\r\n    s.firmano,s.barkod,\r\n    s.ad,s.sat1fiy,s.sat1kdv,s.sat1kdvtip,\r\n    s.sat2fiy,s.sat2kdv,s.sat2kdvtip,s.alsfiy,\r\n    s.alskdv,s.alskdvtip,\r\n    s.kesft,s.brim,s.otv,s.eksat,\r\n    s.minmik,s.drm,s.zrapor,\r\n    s.muhgrskod,s.muhckskod,\r\n    s.muhonkod,\r\n    s.muh_als_iad_kod,s.muh_sat_iad_kod,\r\n    s.muh_als_isk_kod,s.muh_sat_isk_kod,\r\n    s.muh_als_otv_kod,s.muh_sat_otv_kod,\r\n    s.muh_sat_mal_kod,\r\n    s.gtip,s.Yk_Fiyat,\r\n    \r\n    s.Prom,s.Prom_Urun,\r\n    s.Prom_Kac_Satis,s.Prom_Sat_Tip,\r\n    s.Prom_Sat_Puan,s.Puan_Brm,\r\n    \r\n    s.ozel_kod1,s.ozel_kod2,\r\n    s.notack,\r\n    s.Yerli,s.UretimYerId,\r\n    Ul.ad as UretimYerAd,\r\n    s.OlcumBirimId,s.OlcumBirimCarpan,\r\n    s.SatisFiyat1DegisimTarih,s.SatisFiyat2DegisimTarih,\r\n    s.SatisFiyat3DegisimTarih,s.SatisFiyat4DegisimTarih,\r\n    \r\n    oz1.ad as ozel_kod1_ad,\r\n    oz2.ad as ozel_kod2_ad,\r\n    s.BagliCariKod,\r\n    c.Unvan BagliCariUnvan,\r\n    s.Restaurant,s.SatisFiyatDegistir,s.EtiketId,\r\n    s.brmcarp,s.brmust,s.ykno,s.KarYuzde,\r\n    s.alsmik,s.satmik,s.sil,s.olususer,s.olustarsaat,\r\n    s.deguser,s.degtarsaat,s.dataok,\r\n    s.acmik,s.karoran1,s.karoran2,s.grpkdvoran,\r\n    s.sat1pbrm,s.sat2pbrm,s.sat3pbrm,\r\n    s.sat4pbrm,s.alspbrm,s.sat3fiy,\r\n    s.sat3kdv,s.sat3kdvtip,s.sat4fiy,\r\n    s.sat4kdv,s.sat4kdvtip,s.alsiademik,s.satiademik,\r\n    s.brmust2,s.brmcarp2,\r\n\r\n/*s.alskdvlitoptut,s.satkdvlitoptut,s.alsiadekdvlitoptut, */\r\n/*s.satiadekdvlitoptut,s.ortalsfiykdvli, */\r\n\r\n    mk.har_miktar,\r\n    mk.gir_miktar,\r\n    mk.cik_miktar,\r\n    mk.gir_topkdvli,\r\n    mk.gir_topkdvsiz,\r\n    mk.cik_topkdvli,\r\n    mk.cik_topkdvsiz,\r\n    mk.mev_miktar,\r\n\r\n    mk.alsiade_mik, /*alsiademik */\r\n    mk.satiade_mik,  /*satiademik */\r\n    mk.alsiade_topkdvli,\r\n    mk.satiade_topkdvli,\r\n    mk.ortals_fiykdvli,\r\n    mk.ortals_fiykdvsiz,\r\n\r\n\r\n    (g.ad) as grup,\r\n    (mk.gir_miktar-(mk.satiade_mik+mk.alsiade_mik)) as alsiadesiztopmik,\r\n    (mk.cik_miktar-(mk.satiade_mik+mk.alsiade_mik)) as satiadesiztopmik,\r\n    (mk.gir_miktar-(mk.satiade_mik+mk.alsiade_mik))*(alsfiy) as alsiadesiztoptut,\r\n    (mk.cik_miktar-(mk.satiade_mik+mk.alsiade_mik))*\r\n    (case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end ) as satiadesiztoptut,\r\n    (mk.mev_miktar)*(mk.ortals_fiykdvli) as agirorttoptut,\r\n    case when sat1kdvtip='Dahil' then sat1fiy else sat1fiy*(1+(sat1kdv/100)) end satfiykdvli,\r\n    case when sat1kdvtip='Hariç' then sat1fiy else sat1fiy/(1+(sat1kdv/100)) end satfiykdvsiz,\r\n    \r\n    case when sat2kdvtip='Dahil' then sat2fiy else sat2fiy*(1+(sat2kdv/100)) end sat2fiykdvli,\r\n    case when sat2kdvtip='Hariç' then sat2fiy else sat2fiy/(1+(sat2kdv/100)) end sat2fiykdvsiz,\r\n    \r\n    \r\n    case when sat3kdvtip='Dahil' then sat3fiy else sat3fiy*(1+(sat3kdv/100)) end sat3fiykdvli,\r\n    case when sat3kdvtip='Hariç' then sat3fiy else sat3fiy/(1+(sat3kdv/100)) end sat3fiykdvsiz,\r\n    \r\n    \r\n    case when sat4kdvtip='Dahil' then sat4fiy else sat4fiy*(1+(sat4kdv/100)) end sat4fiykdvli,\r\n    case when sat4kdvtip='Hariç' then sat4fiy else sat4fiy/(1+(sat4kdv/100)) end sat4fiykdvsiz,\r\n    \r\n    \r\n    \r\n    ((case when sat1kdvtip='Hariç' then satkdvlitoptut else satkdvlitoptut/(1+(sat1kdv/100)) end )) sattutkdvsiz,\r\n    case when alskdvtip='Dahil' then alsfiy else alsfiy*(1+(alskdv/100)) end alsfiykdvli,\r\n    case when alskdvtip='Hariç' then alsfiy else alsfiy/(1+(alskdv/100)) end alsfiykdvsiz,\r\n    (mk.gir_miktar) as alstopmik,\r\n    (mk.mev_miktar) as kaltopmik,\r\n    case when sat1kdvtip='Hariç' then (mk.mev_miktar)*sat1fiy\r\n    else (mk.mev_miktar)*(sat1fiy/(1+(sat1kdv/100))) end kalsattopkdvsiz,\r\n    case when sat1kdvtip='Dahil' then (mk.mev_miktar)*sat1fiy\r\n    else (mk.mev_miktar)*(sat1fiy*(1+(sat1kdv/100))) end kalsattopkdvli,\r\n    case when alskdvtip='Hariç' then (mk.mev_miktar)*alsfiy\r\n    else (mk.mev_miktar)*(alsfiy/(1+(alskdv/100))) end kalalstopkdvsiz,\r\n    case when alskdvtip='Dahil' then (mk.mev_miktar)*alsfiy\r\n    else (mk.mev_miktar)*(alsfiy*(1+(alskdv/100))) end kalalstopkdvli\r\n\r\n  from stokkart as s WITH (NOLOCK)\r\n  inner join Bakiye_Stok_Miktar as mk WITH (NOLOCK)\r\n  on mk.kod=s.kod and mk.tip=s.tip\r\n  left join carikart as c on s.BagliCariKod=c.kod and c.sil=0\r\n  left join UlkeList as Ul WITH (NOLOCK) on Ul.Id=s.UretimYerId\r\n  left join ozel_kod as oz1 WITH (NOLOCK) on oz1.id=s.ozel_kod1\r\n  left join ozel_kod as oz2 WITH (NOLOCK) on oz2.id=s.ozel_kod2\r\n  left join grup as g WITH (NOLOCK) on g.id=case when s.grp3>0 then s.grp3\r\n  when s.grp2>0 then s.grp2\r\n  when s.grp1>0 then s.grp1 end\r\n  where s.tip='markt'\r\n  /*order by s.tip,s.kod */"
  },
  {
    "schema": "dbo",
    "name": "StokDepoDurum",
    "full_name": "dbo.StokDepoDurum",
    "definition": "CREATE VIEW dbo.StokDepoDurum \r\nAS\r\n   select TOP 100 PERCENT \r\n      stktip,stkod,depkod,\r\n      isnull(Sum(case when islmtip='HARGIRCIK' then \r\n      round((giren-cikan),2) else 0 end),0) as har_miktar,\r\n      isnull(sum(giren),0) gir_miktar,\r\n      isnull(sum(cikan),0) cik_miktar,\r\n      isnull(sum(giren*brmfiykdvli),0) gir_topkdvli,\r\n      isnull(sum(giren*(brmfiykdvli/(1+kdvyuz))),0) as gir_topkdvsiz,\r\n      isnull(sum(cikan*brmfiykdvli),0) as cik_topkdvli,\r\n      isnull(sum(cikan*(brmfiykdvli/(1+kdvyuz))),0) as cik_topkdvsiz,\r\n      isnull(sum(giren-cikan),0) mev_miktar,\r\n      \r\n      isnull(sum(round(aiademik,2)),0) as alsiade_mik,\r\n      isnull(sum(aiademik*brmfiykdvli),0) alsiade_topkdvli,\r\n      isnull(sum(round(siademik,2)),0) as satiade_mik,\r\n      isnull(sum(siademik*brmfiykdvli),0) as satiade_topkdvli,\r\n     \r\n      isnull( case when sum(giren)>0 then\r\n      (sum(giren*brmfiykdvli)) / sum(giren)\r\n      else 0 end , 0)  ortals_fiykdvli,\r\n      isnull(case when sum(giren)>0 then\r\n      (sum(giren*(brmfiykdvli / (1+kdvyuz)) )) / sum(giren)\r\n      else 0 end , 0)  ortals_fiykdvsiz\r\n      from  stkhrk as mk WITH (NOLOCK, INDEX = stkhrk_idx4)\r\n      where  mk.sil=0  \r\n      group by stktip,stkod,depkod\r\n      ORDER BY depkod"
  },
  {
    "schema": "dbo",
    "name": "StokFirmaDepoDurum",
    "full_name": "dbo.StokFirmaDepoDurum",
    "definition": "CREATE VIEW dbo.StokFirmaDepoDurum \r\nAS\r\n   select TOP 100 PERCENT \r\n      stktip,stkod,Firmano,depkod,\r\n      isnull(Sum(case when islmtip='HARGIRCIK' then \r\n      round((giren-cikan),2) else 0 end),0) as har_miktar,\r\n      isnull(sum(giren),0) gir_miktar,\r\n      isnull(sum(cikan),0) cik_miktar,\r\n      isnull(sum(giren*brmfiykdvli),0) gir_topkdvli,\r\n      isnull(sum(giren*(brmfiykdvli/(1+kdvyuz))),0) as gir_topkdvsiz,\r\n      isnull(sum(cikan*brmfiykdvli),0) as cik_topkdvli,\r\n      isnull(sum(cikan*(brmfiykdvli/(1+kdvyuz))),0) as cik_topkdvsiz,\r\n      isnull(sum(giren-cikan),0) mev_miktar,\r\n      \r\n      isnull(sum(round(aiademik,2)),0) as alsiade_mik,\r\n      isnull(sum(aiademik*brmfiykdvli),0) alsiade_topkdvli,\r\n      isnull(sum(round(siademik,2)),0) as satiade_mik,\r\n      isnull(sum(siademik*brmfiykdvli),0) as satiade_topkdvli,\r\n     \r\n      isnull( case when sum(giren)>0 then\r\n      (sum(giren*brmfiykdvli)) / sum(giren)\r\n      else 0 end , 0)  ortals_fiykdvli,\r\n      isnull(case when sum(giren)>0 then\r\n      (sum(giren*(brmfiykdvli / (1+kdvyuz)) )) / sum(giren)\r\n      else 0 end , 0)  ortals_fiykdvsiz\r\n      from  stkhrk as mk WITH (NOLOCK, INDEX = stkhrk_idx3)\r\n      where  mk.sil=0  \r\n      group by stktip,stkod,firmano,depkod\r\n      ORDER BY firmano,depkod"
  },
  {
    "schema": "dbo",
    "name": "StokFirmaDurum",
    "full_name": "dbo.StokFirmaDurum",
    "definition": "CREATE VIEW dbo.StokFirmaDurum \r\nAS\r\n   select TOP 100 PERCENT \r\n      stktip,stkod,Firmano,\r\n      isnull(Sum(case when islmtip='HARGIRCIK' then \r\n      round((giren-cikan),2) else 0 end),0) as har_miktar,\r\n      isnull(sum(giren),0) gir_miktar,\r\n      isnull(sum(cikan),0) cik_miktar,\r\n      isnull(sum(giren*brmfiykdvli),0) gir_topkdvli,\r\n      isnull(sum(giren*(brmfiykdvli/(1+kdvyuz))),0) as gir_topkdvsiz,\r\n      isnull(sum(cikan*brmfiykdvli),0) as cik_topkdvli,\r\n      isnull(sum(cikan*(brmfiykdvli/(1+kdvyuz))),0) as cik_topkdvsiz,\r\n      isnull(sum(giren-cikan),0) mev_miktar,\r\n      \r\n      isnull(sum(round(aiademik,2)),0) as alsiade_mik,\r\n      isnull(sum(aiademik*brmfiykdvli),0) alsiade_topkdvli,\r\n      isnull(sum(round(siademik,2)),0) as satiade_mik,\r\n      isnull(sum(siademik*brmfiykdvli),0) as satiade_topkdvli,\r\n     \r\n      isnull( case when sum(giren)>0 then\r\n      (sum(giren*brmfiykdvli)) / sum(giren)\r\n      else 0 end , 0)  ortals_fiykdvli,\r\n      isnull(case when sum(giren)>0 then\r\n      (sum(giren*(brmfiykdvli / (1+kdvyuz)) )) / sum(giren)\r\n      else 0 end , 0)  ortals_fiykdvsiz\r\n      from  stkhrk as mk WITH (NOLOCK, INDEX = stkhrk_idx5)\r\n      where  mk.sil=0  \r\n      group by stktip,stkod,firmano,depkod\r\n      ORDER BY firmano"
  },
  {
    "schema": "dbo",
    "name": "Tank_Kart_Listesi",
    "full_name": "dbo.Tank_Kart_Listesi",
    "definition": "CREATE VIEW [dbo].Tank_Kart_Listesi\r\nAS\r\n\r\n select t.*,\r\n mk.gir_miktar,\r\n mk.cik_miktar,\r\n mk.mev_miktar,\r\n mk.gir_topkdvli,\r\n mk.gir_topkdvsiz,\r\n mk.cik_topkdvli,\r\n mk.cik_topkdvsiz,\r\n\r\n case when sat1kdvtip='Dahil' then\r\n sat1fiy else sat1fiy*(1+(sat1kdv/100)) end satfiykdvli,\r\n case when sat1kdvtip='Hariç' then\r\n sat1fiy else sat1fiy/(1+(sat1kdv/100)) end satfiykdvsiz,\r\n case when alskdvtip='Dahil' then alsfiy\r\n else alsfiy*(1+(alskdv/100)) end alsfiykdvli,\r\n case when alskdvtip='Hariç' then\r\n alsfiy else alsfiy/(1+(alskdv/100)) end alsfiykdvsiz,\r\n case when sat1kdvtip='Hariç' then (mev_miktar)*sat1fiy\r\n else (mev_miktar)*(sat1fiy/(1+(sat1kdv/100))) end kalsattopkdvsiz,\r\n case when sat1kdvtip='Dahil' then (mev_miktar)*sat1fiy\r\n else (mev_miktar)*(sat1fiy*(1+(sat1kdv/100))) end kalsattopkdvli,\r\n case when alskdvtip='Hariç' then (mev_miktar)*alsfiy\r\n else (mev_miktar)*(alsfiy/(1+(alskdv/100))) end kalalstopkdvsiz,\r\n case when alskdvtip='Dahil' then (mev_miktar)*alsfiy\r\n else (mev_miktar)*(alsfiy*(1+(alskdv/100))) end kalalstopkdvli\r\n from tankkart as t with (NOLOCK)\r\n left join stokkart as s with (NOLOCK)\r\n on t.bagak=s.kod and tip=t.stktip\r\n left join Bakiye_Tank as mk with (NOLOCK) on mk.kod=t.kod"
  },
  {
    "schema": "dbo",
    "name": "V_MarketSatisUrunIdReceteMaliyet",
    "full_name": "dbo.V_MarketSatisUrunIdReceteMaliyet",
    "definition": "CREATE VIEW dbo.V_MarketSatisUrunIdReceteMaliyet \r\nAS\r\n  SELECT rh.MarSatId,rh.MarSatHrkId,Max(Id) as MarSatRecHrkId,\r\n  UrunId,Sum(BirimMaliyetFiyat*Miktar) BirimMaliyetFiyat\r\n  From MarSatRecHrk  as rh with (nolock) \r\n  Where Sil=0 \r\n  Group by MarSatId,MarSatHrkId,UrunId"
  },
  {
    "schema": "dbo",
    "name": "V_ResGrup",
    "full_name": "dbo.V_ResGrup",
    "definition": "CREATE VIEW [dbo].[V_ResGrup]\r\nAS\r\nSELECT     id AS Id, sr AS Sr, sil AS Sil, firmano AS FirmaNo, tabload AS TabloAd, grp1 AS Grp1, grp2 AS Grp2, ad AS Ad, dataok AS DataOk, kar1 AS Kar1, kar2 AS Kar2, kdv AS Kdv, ykkisno AS YkkIsNo, \r\n                      kar3 AS Kar3, kar4 AS Kar4, Restaurant\r\nFROM         dbo.grup\r\nWHERE     (ISNULL(Sil, 0) = 0) AND (ISNULL(Restaurant, 0) = 1)"
  },
  {
    "schema": "dbo",
    "name": "V_ResSatHrk",
    "full_name": "dbo.V_ResSatHrk",
    "definition": "CREATE VIEW [dbo].[V_ResSatHrk]\r\nAS\r\nSELECT *, TutarKdvli - Tutar AS KdvTutar, ((Tutar / Miktar) - IndTutar) * (1 + KdvYuz)  AS NetBirimFiyat, (Tutar - IndTutar) * (1 + KdvYuz)  AS NetTutar\r\nFROM (\r\nSELECT     RSH.Id, RSH.OlusUser, RSH.OlusTarSaat, RSH.DegisUser, RSH.DegisTarSaat, RSH.Sil, RSH.VarNo, RSH.ResSatId, RSH.StkTipId, RSH.StkId, RS.Kod, RS.Ad, RSH.Miktar\r\n\t\t\t, RSH.Birim, RSH.BirimCarpan, RSH.BirimFiyat, RSH.KdvYuz, RSH.ParaBirim, RSH.Kur, RSH.Barkod, RSH.SatFiyNo, RSH.IndYuz\r\n\t\t\t, (RSH.Miktar * RSH.BirimFiyat) / (1 + RSH.KdvYuz) AS Tutar\r\n\t\t\t, RSH.Miktar * RSH.BirimFiyat AS TutarKdvli\t\r\n\t\t\t, ((RSH.Miktar * RSH.BirimFiyat) / (1 + RSH.KdvYuz)) * IndYuz AS IndTutar\t\r\nFROM         dbo.ResSatHrk AS RSH INNER JOIN\r\n             dbo.V_ResStok_01 AS RS ON RSH.StkId = RS.Id AND RSH.StkTipId = RS.TipId\r\nWHERE     (ISNULL(RSH.Sil, 0) = 0)) AS TBL"
  },
  {
    "schema": "dbo",
    "name": "V_ResSatisUrunIdReceteMaliyet",
    "full_name": "dbo.V_ResSatisUrunIdReceteMaliyet",
    "definition": "CREATE VIEW [dbo].[V_ResSatisUrunIdReceteMaliyet] \r\nAS\r\n  SELECT rh.ResSatId,rh.ResSatHrkId,Max(Id) as ResSatRecHrkId,\r\n  UrunId,Sum(BirimMaliyetFiyat*Miktar) BirimMaliyetFiyat\r\n  From ResSatRecHrk  as rh with (nolock) \r\n  Where Sil=0 \r\n  Group by ResSatId,ResSatHrkId,UrunId"
  },
  {
    "schema": "dbo",
    "name": "V_ResSatMas",
    "full_name": "dbo.V_ResSatMas",
    "definition": "CREATE VIEW [dbo].[V_ResSatMas]\r\nAS\r\nSELECT     Id, OlusUser, OlusTarSaat, DegisUser, DegisTarSaat, Sil, VarNo, FirmaNo, Tarih, Saat,  Iade, DepoKod,\r\nParaBirim \r\nFROM         dbo.ResSatMas WITH (NOLOCK)\r\nWHERE     (ISNULL(Sil, 0) = 0) AND (Iade = 0)"
  },
  {
    "schema": "dbo",
    "name": "V_ResStok_01",
    "full_name": "dbo.V_ResStok_01",
    "definition": "CREATE VIEW [dbo].[V_ResStok_01] AS\r\nSELECT sk.id AS Id, sk.tip_id AS TipId, sk.firmano AS FirmaNo, \r\n      CASE WHEN sk.grp3 > 0 THEN sk.grp3 WHEN sk.grp2 > 0 THEN sk.grp2 WHEN sk.grp1 > 0 THEN sk.grp1 END AS GrupId,\r\n\t   sk.kod AS Kod, sk.ad AS Ad, 1 AS FiyNo, sk.sat1kdv AS SatKdv, sk.sat1pbrm AS ParaBrm,\r\n\t\tCASE WHEN sk.sat1kdvtip = 'Dahil' THEN 1 ELSE 0 END AS SatKdvTip, sk.sat1kdvtip AS SatKdvTipAd,\r\n\t\tROUND(CASE WHEN sk.sat1kdvtip = 'Dahil' THEN sk.sat1fiy ELSE sk.sat1fiy * (1 + (sk.sat1kdv / 100)) END, 2) AS SatFiy,\r\n        sk.brim AS Birim,\r\n        case when (Select top 1 id From Stok_Recete  with (nolock)  \r\n        Where Urun_id=sk.id and Sil=0 )>0 then 1 else 0 end Receteli\r\nFROM stokkart AS sk with (nolock) \r\nWHERE ISNULL(sk.sil, 0) = 0 AND sk.tip_id = 2 and isnull(sk.Restaurant,0)=1\r\nUNION ALL\r\nSELECT sk.id AS Id, sk.tip_id AS TipId, sk.firmano AS FirmaNo,\r\n       CASE WHEN sk.grp3 > 0 THEN sk.grp3 WHEN sk.grp2 > 0 THEN sk.grp2 WHEN sk.grp1 > 0 THEN sk.grp1 END AS GrupId,\r\n\t   sk.kod AS Kod, sk.ad AS Ad, sf.FiyNo, sf.Kdv AS SatKdv, sf.ParaBrm,\r\n\t   sf.KdvTip AS SatKdvTip, CASE WHEN sf.KdvTip=0 then 'Hariç' ELSE 'Dahil' END AS SatKdvTipAd,\r\n\t   ROUND(CASE sf.KdvTip WHEN 1 THEN sf.Fiyat ELSE sf.Fiyat * (1 + (sf.Kdv / 100)) END, 2) AS SatFiy, sk.brim AS Birim,\r\n        case when (Select top 1 id From Stok_Recete  with (nolock)  \r\n        Where Urun_id=sk.id and Sil=0 )>0 then 1 else 0 end Receteli\r\n FROM stokkart AS sk with (nolock)  INNER JOIN\r\n\tStok_fiyat AS sf with (nolock)  \r\n    ON sk.tip_id = sf.Stktip_id AND sk.id = sf.Stk_id AND sf.FiyTip = 2 AND sf.FiyNo=1 AND sk.firmano=sf.FirmaNo\r\nWHERE ISNULL(sk.sil, 0) = 0 AND sk.tip_id = 2  and isnull(sk.Restaurant,0)=1"
  },
  {
    "schema": "dbo",
    "name": "V_StokFirmaSubeFiyat",
    "full_name": "dbo.V_StokFirmaSubeFiyat",
    "definition": "CREATE VIEW dbo.V_StokFirmaSubeFiyat \r\nAS\r\n Select f.id as Firmano,k.id StkId,k.Kod StkKod,\r\n k.sat1kdv SatisFiyat1Kdv,\r\n   isnull((Select case \r\n      when  KdvTip=1 then Fiyat \r\n      when  KdvTip=0 then Fiyat*(1+(Kdv/100)) end\r\n        From Stok_Fiyat as sf with (nolock) \r\n      Where sf.Stk_id=k.id and sf.FirmaNo=f.id \r\n      and sf.FiyTip=2 and sf.FiyNo=1 ) ,0) SatisFiyat1KdvDahil,\r\n   k.sat2kdv SatisFiyat2Kdv,     \r\n   isnull((Select case \r\n      when  KdvTip=1 then Fiyat \r\n      when  KdvTip=0 then Fiyat*(1+(Kdv/100)) end\r\n        From Stok_Fiyat as sf with (nolock) \r\n      Where sf.Stk_id=k.id and sf.FirmaNo=f.id \r\n      and sf.FiyTip=2 and sf.FiyNo=2 ),0) SatisFiyat2KdvDahil,\r\n      \r\n   k.sat3kdv SatisFiyat3Kdv,     \r\n    isnull((Select case \r\n      when  KdvTip=1 then Fiyat \r\n      when  KdvTip=0 then Fiyat*(1+(Kdv/100)) end\r\n        From Stok_Fiyat as sf with (nolock) \r\n      Where sf.Stk_id=k.id and sf.FirmaNo=f.id \r\n      and sf.FiyTip=2 and sf.FiyNo=3 ),0) SatisFiyat3KdvDahil,\r\n      \r\n    k.sat4kdv SatisFiyat4Kdv,  \r\n      isnull( (Select case \r\n      when  KdvTip=1 then Fiyat \r\n      when  KdvTip=0 then Fiyat*(1+(Kdv/100)) end\r\n        From Stok_Fiyat as sf with (nolock) \r\n      Where sf.Stk_id=k.id and sf.FirmaNo=f.id \r\n      and sf.FiyTip=2 and sf.FiyNo=4 ),0) SatisFiyat4KdvDahil,\r\n      \r\n    k.alskdv AlisFiyatKdv,   \r\n      isnull((Select case \r\n      when  KdvTip=1 then Fiyat \r\n      when  KdvTip=0 then Fiyat*(1+(Kdv/100)) end\r\n        From Stok_Fiyat as sf with (nolock) \r\n      Where sf.Stk_id=k.id and sf.FirmaNo=f.id \r\n      and sf.FiyTip=1 and sf.FiyNo=1 ),0) AlisFiyatKdvDahil\r\n\r\nfrom stokkart as k with (nolock)\r\nleft join Firma as f  with (nolock) on 1=1\r\nwhere k.sil=0"
  },
  {
    "schema": "dbo",
    "name": "V_StokSonKullanimList",
    "full_name": "dbo.V_StokSonKullanimList",
    "definition": "CREATE VIEW dbo.V_StokSonKullanimList \r\nAS\r\n    \r\n  SELECT  S.Id,S.FirmaNo,\r\n  S.StokId,\r\n  K.barkod,k.kod StokKod,k.ad StokAd,\r\n  K.grp1,K.grp2,K.grp3,\r\n  S.Tarih,S.Miktar,S.OlusturmaTarihSaat,S.OlusturmaKullaniciUnvan,\r\n  S.DegistirmeTarihSaat,S.DegistirmeKullaniciUnvan,S.SilTarihSaat,S.SilKullaniciUnvan,S.Sil\r\nFROM \r\n  StokSonKullanim as S \r\n  inner join stokkart as k on k.id=S.StokId"
  },
  {
    "schema": "dbo",
    "name": "Vardiya_Cek_Kartlar",
    "full_name": "dbo.Vardiya_Cek_Kartlar",
    "definition": "CREATE VIEW [dbo].Vardiya_Cek_Kartlar\r\nAS\r\n   SELECT 1 id,0 as sil,'VRDCEK' kod,\r\n   'VARDİYA ÇEK GİRİŞ' as ad,'vardicek' as cartp,\r\n   'TL' parabrm,\r\n   (1) as crno,('')tcno,('') as grupad1,('VARDİYA ÇEK') as tip,\r\n   ('')adres,('')adres2,('')evil,('')evilce,('')vergidaire,('') vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto"
  },
  {
    "schema": "dbo",
    "name": "Vardiya_Kasa_Kartlar",
    "full_name": "dbo.Vardiya_Kasa_Kartlar",
    "definition": "CREATE VIEW [dbo].Vardiya_Kasa_Kartlar\r\nAS\r\n   SELECT 1 id,0 as sil,'VRDKASA' kod,\r\n   'VARDİYA KASALARI' as ad,'vardikasa' as cartp,\r\n   'TL' parabrm,\r\n   (1) as crno,('')tcno,('') as grupad1,('VARDİYA KASA') as tip,\r\n   ('')adres,('')adres2,('')evil,('')evilce,('')vergidaire,('') vergino,\r\n   (0) fis_iskonto,(0) as fat_iskonto"
  },
  {
    "schema": "dbo",
    "name": "view_cari_hrk_fis_Isk_listesi",
    "full_name": "dbo.view_cari_hrk_fis_Isk_listesi",
    "definition": "CREATE VIEW view_cari_hrk_fis_Isk_listesi\r\nAS\r\n    select h.tarih,h.saat,MONTH(h.tarih) ay,YEAR(h.tarih) yil,\r\n    h.carkod,vc.ad as unvan,h.cartip,\r\n    ROUND(h.borc,sis.Para_Ondalik) borc,\r\n    ROUND(h.alacak,sis.Para_Ondalik) alacak,\r\n    0 as fisbakiye,h.kur,h.islmtip,h.islmtipad,h.islmhrk,h.islmhrkad,\r\n    ('BK') aktip\r\n    from carihrk as h  with (nolock)\r\n    inner join Genel_Kart \r\n    as vc on vc.cartp=h.cartip and vc.kod=h.carkod and h.sil=0\r\n    left join sistemtanim sis on 1=1\r\n    union all\r\n    select v.tarih,v.saat,MONTH(v.tarih) ay,YEAR(v.tarih) yil,\r\n    v.carkod,vc.ad as unvan,v.cartip,0 borc,0 alacak,   \r\n    ROUND(  ISNULL(SUM(\r\n    CASE \r\n     WHEN v.fistip='FISVERSAT' THEN  \r\n    (h.brmfiy*(1-(h.Fat_IskYuz/100)))*h.mik \r\n     WHEN v.fistip='FISALCSAT' THEN\r\n     -1*((h.brmfiy*(1-(h.Fat_IskYuz/100)))*h.mik) \r\n     else 0 end ),0),sis.Para_Ondalik) as fisbakiye,    \r\n    1 as kur,\r\n    v.fistip as islmtip,v.fisad as islmtipad,'-' as islmhrk,'-'as islmhrkad,\r\n    v.aktip\r\n    from veresimas as v with (nolock)\r\n    inner join veresihrk h with (nolock) on\r\n    v.verid=h.verid and h.sil=0 and isnull(v.devir,0)=0 \r\n    inner join Genel_Kart  as vc on \r\n    vc.cartp=v.cartip and vc.kod=v.carkod and v.sil=0\r\n    left join sistemtanim sis  on 1=1\r\n    group by v.tarih,v.saat,v.carkod,vc.ad,v.cartip,\r\n    v.fistip,v.fisad,v.aktip,sis.Para_Ondalik"
  },
  {
    "schema": "dbo",
    "name": "view_cari_hrk_fis_listesi",
    "full_name": "dbo.view_cari_hrk_fis_listesi",
    "definition": "CREATE VIEW view_cari_hrk_fis_listesi\r\nAS\r\n    select h.tarih,h.saat,MONTH(h.tarih) ay,YEAR(h.tarih) yil,\r\n    h.carkod,vc.ad as unvan,h.cartip,\r\n    ROUND(h.borc,sis.Para_Ondalik) borc,\r\n    ROUND(h.alacak,sis.Para_Ondalik) alacak,\r\n    0 as fisbakiye,h.kur,h.islmtip,h.islmtipad,h.islmhrk,h.islmhrkad,\r\n    ('BK') aktip\r\n    from carihrk as h  with (nolock)\r\n    inner join Genel_Kart as vc \r\n    on vc.cartp=h.cartip and vc.kod=h.carkod and h.sil=0\r\n    left join sistemtanim sis on 1=1\r\n    union all\r\n    select v.tarih,v.saat,MONTH(v.tarih) ay,YEAR(v.tarih) yil,\r\n    v.carkod,vc.ad as unvan,v.cartip,0 borc,0 alacak,\r\n    case\r\n    when fistip='FISVERSAT' THEN round(toptut-isktop,sis.Para_Ondalik)\r\n    when fistip='FISALCSAT' THEN round(-1*(toptut-isktop),sis.Para_Ondalik)\r\n    else 0 end fisbakiye,1 as kur,\r\n    v.fistip as islmtip,v.fisad as islmtipad,'-' as islmhrk,'-'as islmhrkad,\r\n    v.aktip\r\n    from veresimas as v with (nolock)\r\n    inner join Genel_Kart  as vc on \r\n    vc.cartp=v.cartip and vc.kod=v.carkod and v.sil=0\r\n    left join sistemtanim sis  on 1=1"
  },
  {
    "schema": "dbo",
    "name": "View_Cariler_Kart_Bakiye",
    "full_name": "dbo.View_Cariler_Kart_Bakiye",
    "definition": "CREATE VIEW [dbo].View_Cariler_Kart_Bakiye\r\nAS\r\n  SELECT k.id,k.sil as sl,k.kod as kod,k.unvan as ad,k.grp1,k.grp2,k.grp3,\r\n  k.fatunvan as fatunvan,'carikart' as cartp,fisvadfark,fatvadfark,\r\n  (1) as crno,k.tcno, ('CARİ KARTLAR') as tip,k.adres,k.adres2,\r\n  k.evil,k.evilce,k.vergidaire,k.vergino,\r\n  k.ykt_alm_def_no,k.Arac_Ad,\r\n  k.tel,k.cep,k.fax,k.mail,\r\n  fis_bakiye as fisbak,car_bakiye as carbak,top_bakiye as topbak,\r\n  k.toplamlimit as Toplimit,cekharc_bakiye,cek_bakiye,\r\n  k.Grup as Grup_Ad\r\n  from Cari_Kart_Listesi as k\r\n\r\n  UNION all\r\n   SELECT k.id,k.sil as sl,k.kod,k.ad+' '+k.soyad as ad,k.grp1,k.grp2,k.grp3,\r\n   k.ad+' '+k.soyad as fatunvan,'perkart' as cartp,0,0,\r\n  (1) as crno,('')tcno,('PERSONEL KARTLARI') as tip,\r\n  ('') as adres,('') as adres2,evil,evilce,('') as vergidaire,('') as vergino,\r\n  ('') ykt_alm_def_no,('') Arac_Ad,\r\n  k.tel,k.cep,k.fax,k.mail,\r\n  fis_bakiye as fisbak,car_bakiye as carbak,top_bakiye as topbak,\r\n  0 as Toplimit,0 cekharc_bakiye,0 cek_bakiye,\r\n  k.grup as Grup_Ad\r\n  from Personel_Kart_Listesi as k\r\n   \r\n  UNION all\r\n  SELECT k.id,k.sil as sl,k.kod,k.unvan as ad,k.grp1,k.grp2,k.grp3,\r\n  k.unvan as fatunvan,'perakendekart' as cartp,0,0,\r\n  (6) as crno,k.tcno,('PERAKENDE KARTLAR') as tip,\r\n  k.adres,k.adres2,evil,evilce,k.vergidaire,k.vergino,\r\n  ('') ykt_alm_def_no,('') Arac_Ad,\r\n  k.tel,k.cep,k.fax,k.mail,\r\n  fis_bakiye as fisbak,car_bakiye as carbak,top_bakiye as topbak,\r\n  0 as Toplimit,0 cekharc_bakiye,0 cek_bakiye,\r\n  k.grup as Grup_Ad\r\n  from Perakende_Kart_listesi as k\r\n   UNION all\r\n  SELECT k.id,k.sil as sl,k.kod,k.ad,k.grp1,k.grp2,k.grp3,\r\n  k.ad as fatunvan,'gelgidkart' as cartp,0,0,\r\n  (1) as crno,('')tcno,('GELİR-GİDER KARTLARI') as tip,\r\n  ('') as adres,('') as adres2,('') as evil,('') as evilce,('') as vergidaire,\r\n  ('') as vergino,\r\n  ('') ykt_alm_def_no,('') Arac_Ad,\r\n  ('')tel,('')cep,('')fax,('') mail,\r\n  fis_bakiye as fisbak,car_bakiye as carbak,top_bakiye as topbak,\r\n  0 as Toplimit,0 cekharc_bakiye,0 cek_bakiye,\r\n  k.grup as Grup_Ad\r\n  from Gel_Gid_Kart_Listesi as k\r\n  UNION all\r\n  SELECT k.id,k.sil as sl,k.kod,k.ad,k.grp1,k.grp2,k.grp3,\r\n  k.ad as fatunvan,'bankakart' as cartp,0,0,\r\n  (3) as crno,('')tcno,('BANKA KARTLARI') as tip,\r\n  ('') as adres,('') as adres2,('') as evil,('') as evilce,\r\n  ('') as vergidaire,('') as vergino,\r\n   ('') ykt_alm_def_no,('') Arac_Ad,\r\n  k.tel,('') cep,k.fax,('') mail,\r\n  0 as fisbak,0 as carbak,top_bakiye as topbak,\r\n  0 as Toplimit,0 cekharc_bakiye,0 cek_bakiye,\r\n  k.grup as Grup_Ad\r\n  from Banka_Kart_Listesi as k\r\n  \r\n  \r\n  UNION all\r\n  SELECT k.id,k.sil as sl,k.kod,k.ad,0 grp1,0 grp2, 0 grp3,\r\n  k.ad as fatunvan,'poskart' as cartp,0,0,\r\n  (3) as crno,('')tcno,('POS KARTLARI') as tip,\r\n  ('') as adres,('') as adres2,('') as evil,('') as evilce,\r\n  ('') as vergidaire,('') as vergino,\r\n   ('') ykt_alm_def_no,('') Arac_Ad,\r\n  ('') tel,('') cep,('') fax,('') mail,\r\n  0 as fisbak,0 as carbak,nettutar as topbak,\r\n  0 as Toplimit,0 cekharc_bakiye,0 cek_bakiye,\r\n  ('') Grup_Ad\r\n  from Pos_Kart_Listesi as k\r\n  \r\n  \r\n  \r\n   \r\n  UNION all\r\n  SELECT k.id,k.sil as sl,k.kod,k.ad,0 grp1,0 grp2, 0 grp3,\r\n  k.ad as fatunvan,'istkart' as cartp,0,0,\r\n  (3) as crno,('')tcno,('İSLETME K. KARTLARI') as tip,\r\n  ('') as adres,('') as adres2,('') as evil,('') as evilce,\r\n  ('') as vergidaire,('') as vergino,\r\n   ('') ykt_alm_def_no,('') Arac_Ad,\r\n  ('') tel,('') cep,('') fax,('') mail,\r\n  0 as fisbak,0 as carbak,top_bakiye as topbak,\r\n  0 as Toplimit,0 cekharc_bakiye,0 cek_bakiye,\r\n  ('') Grup_Ad\r\n  from istkredi_Kart_Listesi as k\r\n  \r\n  \r\n   union all\r\n   SELECT k.id,k.sil as sl,k.kod,k.ad,0 grp1,0 grp2,0 grp3,\r\n   k.ad as fatunvan,'kasakart' as cartp,0,0,\r\n   (4) as crno,('')tcno,('KASA KARTLARI') as tip,\r\n   ('') as adres,('') as adres2,('') as evil,('') as evilce,\r\n   ('') as vergidaire,('') as vergino,\r\n    ('') ykt_alm_def_no,('') Arac_Ad,\r\n   ('') tel,('') cep,('') fax,('') mail,\r\n   0 as fisbak,0 as carbak,0 as topbak,\r\n   0 as Toplimit,0 cekharc_bakiye,0 cek_bakiye,\r\n   ('') Grup_Ad from KasaKart as k"
  },
  {
    "schema": "dbo",
    "name": "view_grp1",
    "full_name": "dbo.view_grp1",
    "definition": "CREATE VIEW [dbo].view_grp1\r\nAS\r\n  SELECT * from grup where sr=0"
  },
  {
    "schema": "dbo",
    "name": "view_grp2",
    "full_name": "dbo.view_grp2",
    "definition": "CREATE VIEW [dbo].view_grp2\r\nAS\r\n  SELECT * from grup where sr=1"
  },
  {
    "schema": "dbo",
    "name": "view_grp3",
    "full_name": "dbo.view_grp3",
    "definition": "CREATE VIEW [dbo].view_grp3\r\nAS\r\n  SELECT * from grup where sr=2"
  },
  {
    "schema": "dbo",
    "name": "view_hrklistesi",
    "full_name": "dbo.view_hrklistesi",
    "definition": "CREATE VIEW [dbo].view_hrklistesi\r\nAS\r\n  SELECT 'Kasa İşlemleri' as grp,'kasahrk' as grptip,('kashrkid') hrkidad,masterid,gctip,kashrkid as hrkid,varno,\r\n  varok,kasahrk.sil,yerad,perkod,adaid,tarih,saat,islmtipad as tipad,islmhrkad as hrkad,islmtip,\r\n  islmhrk,yertip,belno,kasahrk.id,kasahrk.kaskod as kod,carkod,cartip,car.tip as cartur,car.ad as unvan,\r\n  (perkart.ad+' '+perkart.soyad) perad,(grup.ad) ada,kasahrk.giren,kasahrk.cikan,kur,\r\n  kasahrk.kaskod as kaskod,kasakart.ad as kasad,('') as bankod,('') as bankad,ack,null as vadetar,kasahrk.parabrm,\r\n  kasahrk.olustarsaat,kasahrk.olususer \r\n  from kasahrk with (nolock) left join Genel_Kart as car with (nolock) on kasahrk.carkod=car.kod and kasahrk.cartip=car.cartp\r\n  left join perkart with (nolock) on perkart.kod=perkod left join grup with (nolock) on adaid=grup.id\r\n  inner join kasakart with (nolock) on kasahrk.kaskod=kasakart.kod\r\n  where kasahrk.masterid=0\r\n  UNION ALL\r\n  SELECT 'Pos İşlemleri' as grp,'poshrk' as grptip,('poshrkid') hrkidad,masterid,gctip,\r\n  poshrkid as hrkid,varno,varok,poshrk.sil,yerad,perkod,adaid,tarih,saat,islmtipad as tipad,\r\n  islmhrkad as hrkad,islmtip,islmhrk,yertip,belno,poshrk.id,poshrk.poskod as kod,carkod,cartip,cartur,car.ad as unvan,\r\n  (perkart.ad+' '+perkart.soyad) perad,(grup.ad) ada,poshrk.giren,poshrk.cikan,kur,('') as kaskod,('') as kasad,\r\n  poshrk.bankod as bankod,bankakart.ad as bankad,ack,poshrk.vadetar as vadetar,\r\n  poshrk.parabrm,poshrk.olustarsaat,poshrk.olususer from poshrk with (nolock) left join Genel_Kart as car  with (nolock)\r\n  on poshrk.carkod=car.kod and poshrk.cartip=car.cartp\r\n  left join perkart with (nolock) on perkart.kod=perkod left join grup with (nolock) on adaid=grup.id\r\n  left join bankakart with (nolock) on bankakart.kod=poshrk.bankod\r\n  where poshrk.masterid=0"
  },
  {
    "schema": "dbo",
    "name": "Zrapor_UrunKart_Listesi",
    "full_name": "dbo.Zrapor_UrunKart_Listesi",
    "definition": "CREATE VIEW [dbo].Zrapor_UrunKart_Listesi\r\nAS\r\n\r\n SELECT firmano,kod,ad,sat1kdv as kdv,('akykt') tip,1 tip_id,\r\n  case when sat1kdvtip='Dahil' then sat1fiy \r\n  else sat1fiy*(1+(sat1kdv/100)) end brimfiy,K.brim,\r\n  isnull(k.muhonkod,'') as muhonkod,k.muhgrskod,k.muhckskod  \r\n  from stokkart as k  with (nolock) where k.tip='akykt' and k.sil=0\r\n  union\r\n  SELECT firmano,cast(id as varchar(20))kod,cast(ad as varchar(100)),kdv,\r\n  ('markt')tip,2 tip_id,\r\n  0 brimfiy,'AD' brim,\r\n  isnull(k.muhonkod,'') muhonkod,k.muhgrskod,k.muhckskod   \r\n  from grup as k with (nolock) where k.tabload='markgrp' and k.sil=0"
  }
]