{% load static %}
<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Yeni Telerik Projesi{% endblock %}</title>
  <link rel="icon" href="data:,">
  <style>
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;height:100%;font-size:11px;overflow-x:hidden !important;overflow-y:auto;width:100%;max-width:100vw}
    /* Operasyon sayfasÄ± aÃ§Ä±kken boÅŸ sayfada kaydÄ±rma Ã§ubuÄŸunu gizle */
    body.operasyon-sayfasi-acik {
      overflow-y: hidden !important;
    }
    body.operasyon-sayfasi-acik html {
      overflow-y: hidden !important;
    }
    
    /* main-content overflow kontrolÃ¼ - horizontal scroll olmasÄ±n */
    #main-content{overflow-x:hidden !important;overflow-y:auto;width:100% !important;max-width:100vw !important;position:relative;min-height:auto !important;height:auto !important}
    /* Operasyon sayfasÄ± aÃ§Ä±kken main-content kaydÄ±rmasÄ±nÄ± gizle */
    body.operasyon-sayfasi-acik #main-content {
      overflow-y: hidden !important;
    }
    #main-content > * {max-width:100% !important;overflow-x:hidden !important;width:100% !important}
    
    /* Telerik Grid overflow kontrolÃ¼ - tÃ¼m grid elementlerinde */
    .k-grid, .k-grid-content, .k-grid-header, .k-grid-header-wrap, .k-grid-content-wrap,
    .k-grid table, .k-grid-header table {overflow-x:hidden !important;max-width:100% !important}
    .k-grid-content-locked, .k-grid-header-locked {overflow-x:hidden !important}
    
    /* 3 Sabit Alan - Basit HTML ile */
    #fixed-area-1-container,
    #fixed-area-2-container,
    #fixed-area-3-container {
      font-family: 'Segoe UI', Arial, sans-serif;
    }
    
    /* Tab Container - Basit HTML Tab Sistemi */
    #tabs-container {
      width: 100%;
      margin: 0;
      padding: 0;
      display: flex !important;
      visibility: visible !important;
      overflow-x: auto;
    }
    #tabs-list {
      display: flex !important;
      align-items: center;
      gap: 2px;
      padding: 0;
      margin: 0;
      height: 100%;
      list-style: none;
    }
    /* Flash sorunu Ã§Ã¶zÃ¼mÃ¼: TÃ¼m sabit alanlarÄ± ve iÃ§eriÄŸi sayfa yÃ¼klenene kadar gizle */
    #fixed-area-1-container,
    #fixed-area-2-container,
    #tabs-container,
    #main-content {
      opacity: 0;
      transition: opacity 0.05s;
    }
    /* Sayfa yÃ¼klendikten sonra gÃ¶ster */
    body.loaded #fixed-area-1-container,
    body.loaded #fixed-area-2-container,
    body.loaded #tabs-container,
    body.loaded #main-content {
      opacity: 1 !important;
    }
    
    /* ALAN 1 - Ana MenÃ¼ ButonlarÄ± */
    #fixed-area-1-container {
      display: flex;
      align-items: center;
      justify-content: flex-start;
      padding: 0;
    }

    /* ALAN 1 - Ana menÃ¼ yazÄ± boyutu */
    #ana-menu-bar .k-menu-item-text,
    #ana-menu-bar .k-link,
    #ana-menu-bar li span {
      font-size: 19px !important;
    }

    /* Alt menÃ¼ yazÄ±larÄ± - 16px ve sol hizalÄ± */
    #ana-menu-bar .k-menu-group .k-menu-item-text,
    #ana-menu-bar .k-menu-group .k-link,
    #ana-menu-bar .k-popup .k-menu-item-text,
    #ana-menu-bar .k-popup .k-link {
      font-size: 16px !important;
      text-align: left !important;
      justify-content: flex-start !important;
    }

    /* Alt menÃ¼ yazÄ± boyutu - en gÃ¼Ã§lÃ¼ zorlamalar */
    #ana-menu-bar .k-menu-group .k-item,
    #ana-menu-bar .k-popup .k-item,
    #ana-menu-bar .k-menu-group .k-item .k-link,
    #ana-menu-bar .k-popup .k-item .k-link,
    #ana-menu-bar .k-menu-group .k-item .k-menu-item-text,
    #ana-menu-bar .k-popup .k-item .k-menu-item-text,
    #ana-menu-bar .k-menu-group .k-item span,
    #ana-menu-bar .k-popup .k-item span {
      font-size: 16px !important;
    }

    /* Alt menÃ¼ arka planÄ± - aÃ§Ä±k gri */
    #ana-menu-bar .k-menu-group,
    #ana-menu-bar .k-popup,
    #ana-menu-bar .k-menu-group .k-item,
    #ana-menu-bar .k-popup .k-item {
      background: #f0f0f0 !important;
      background-color: #f0f0f0 !important;
    }

    /* Alt menÃ¼ yazÄ± hizasÄ± - sol baÅŸtan */
    #ana-menu-bar .k-menu-group .k-item,
    #ana-menu-bar .k-popup .k-item,
    #ana-menu-bar .k-menu-group .k-item .k-link,
    #ana-menu-bar .k-popup .k-item .k-link {
      text-align: left !important;
      justify-content: flex-start !important;
      align-items: center !important;
      padding-left: 12px !important;
    }

    /* Alt menÃ¼ yumuÅŸak geÃ§iÅŸ */
    #ana-menu-bar .k-menu-group .k-item,
    #ana-menu-bar .k-popup .k-item,
    #ana-menu-bar .k-menu-group .k-item .k-link,
    #ana-menu-bar .k-popup .k-item .k-link {
      transition: background-color 0.15s ease, border-color 0.15s ease;
    }

    /* Ã‡erÃ§eve sabit dursun, sadece rengi deÄŸiÅŸsin */
    #ana-menu-bar .k-menu-group .k-item,
    #ana-menu-bar .k-popup .k-item {
      box-sizing: border-box !important;
      border: 1px solid transparent !important;
    }

    /* Alt menÃ¼de sol hizayÄ± zorla sabitle */
    #ana-menu-bar .k-menu-group,
    #ana-menu-bar .k-popup {
      text-align: left !important;
    }
    #ana-menu-bar .k-menu-group .k-item,
    #ana-menu-bar .k-popup .k-item {
      display: flex !important;
      justify-content: flex-start !important;
      align-items: center !important;
      width: 100% !important;
    }
    #ana-menu-bar .k-menu-group .k-link,
    #ana-menu-bar .k-popup .k-link,
    #ana-menu-bar .k-menu-group .k-menu-link,
    #ana-menu-bar .k-popup .k-menu-link {
      display: flex !important;
      justify-content: flex-start !important;
      align-items: center !important;
      width: 100% !important;
      text-align: left !important;
      padding-left: 12px !important;
      margin-left: 0 !important;
    }
    #ana-menu-bar .k-menu-group .k-menu-item-text,
    #ana-menu-bar .k-popup .k-menu-item-text {
      display: inline-block !important;
      text-align: left !important;
      margin-left: 0 !important;
    }
    
    /* Telerik TabStrip iÃ§in font boyutu (ALAN 3) */
    #tabs .k-tabstrip-item {
      font-size: 12px !important;
    }
    #tabs .k-tabstrip-item .k-link {
      font-size: 12px !important;
      padding: 4px 12px !important;
    }
    /* Eski CSS'ler temizlendi - ArtÄ±k Telerik kullanÄ±lÄ±yor */
    /* Ribbon buton stili - Resimdeki gibi kompakt */
    .ribbon-button {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 4px 6px;
      min-width: 70px;
      max-width: 70px;
      cursor: pointer;
      border-radius: 2px;
      transition: all 0.15s;
      background: transparent;
      border: 1px solid transparent;
    }
    .ribbon-button:hover {
      background: rgba(255,255,255,0.5);
      border: 1px solid #C0C0C0;
    }
    .ribbon-button.active {
      background: rgba(255,255,255,0.8);
      border: 1px solid #808080;
      box-shadow: inset 0 0 2px rgba(0,0,0,0.1);
    }
  </style>
  
  <!-- Telerik Kendo UI CSS -->
  <link rel="stylesheet" href="{% static 'dashboard/kendo/styles/default-main.css' %}" />
  
  <!-- jQuery (Telerik iÃ§in gerekli) -->
  <script src="{% static 'dashboard/js/jquery-3.6.0.min.js' %}"></script>
  
  <!-- Telerik Kendo UI JavaScript (TÃ¼m bileÅŸenler) -->
  <script src="{% static 'dashboard/js/kendo.all.min.js' %}"></script>
  
  <!-- Telerik TÃ¼rkÃ§e KÃ¼ltÃ¼r -->
  <script src="{% static 'dashboard/js/cultures/kendo.culture.tr-TR.min.js' %}"></script>
  <script>
    kendo.culture("tr-TR");
  </script>
  
  <!-- Telerik Lisans -->
  <script src="{% static 'dashboard/kendo/telerik-license.js' %}"></script>
  
  {% block extra_head %}{% endblock %}
</head>

<body>
    <!-- 1. SABÄ°T ALAN: ALAN 1 (En Ãœst) - Ana MenÃ¼ ButonlarÄ± -->
  <div id="fixed-area-1-container" style="position:fixed;top:0;left:0;right:0;z-index:10000;background:linear-gradient(to bottom, #f5f5f5, #eeeeee);height:28px;border-bottom:1px solid #e0e0e0;font-family:'Segoe UI',Arial,sans-serif;opacity:0;">
    <!-- Telerik Kendo UI Menu -->
    <ul id="ana-menu-bar" style="margin:0;padding:0;list-style:none;display:flex;height:100%;align-items:center;font-family:'Segoe UI',Arial,sans-serif !important;">
      <li>
        <span>TanÄ±mlar</span>
        <ul>
          <li><span>Firma TanÄ±mlarÄ±</span></li>
          <li><span>ÃœrÃ¼n TanÄ±mlarÄ±</span></li>
          <li><span>Whatsapp TanÄ±mlarÄ±</span></li>
          <li><span>Sistem TanÄ±mlarÄ±</span></li>
          <li><span>KullanÄ±cÄ± TanÄ±mlarÄ±</span></li>
          <li><span>Ã‡Ä±kÄ±ÅŸ</span></li>
        </ul>
      </li>
      <li>
        <span>Kartlar</span>
        <ul>
          <li><span>Cari Kartlar</span></li>
        </ul>
      </li>
      <li>
        <span>Operasyon</span>
        <ul></ul>
      </li>
      <li>
        <span>Raporlar</span>
        <ul></ul>
      </li>
    </ul>
  </div>
  
  <!-- 2. SABÄ°T ALAN: ALAN 2 (Ä°konlu Butonlar) - AÃ§Ä±k Gri -->
  <div id="fixed-area-2-container" style="position:fixed;top:28px;left:0;right:0;z-index:9999;background:linear-gradient(to bottom, #f5f5f5, #eeeeee);height:80px;display:flex;align-items:center;justify-content:flex-start;padding:8px 6px;gap:4px;font-family:'Segoe UI',Arial,sans-serif;border-bottom:1px solid #e0e0e0;opacity:0;">
    <!-- Ä°konlu Butonlar (ALAN 2'nin iÃ§inde) -->
    <div id="main-ribbon-container" style="display:flex;align-items:center;gap:4px;overflow-x:auto;flex:1;justify-content:flex-start;">
      <div id="ribbon-buttons" style="display:flex;gap:4px;align-items:center;flex-wrap:nowrap"></div>
    </div>
    <!-- ALAN 2 Etiketi (Proje anlatÄ±mÄ± iÃ§in) -->
    <span style="position:absolute;left:50%;transform:translateX(-50%);color:#FF0000;font-size:12pt;font-weight:bold;pointer-events:none;z-index:1;white-space:nowrap;">
      ALAN 2 
      <span style="color:#FF0000;font-size:10pt;margin-left:10px;">â†• 80px</span>
      <span style="color:#FF0000;font-size:10pt;margin-left:10px;">â†” 100%</span>
    </span>
  </div>
  
  <!-- 3. Tab Container - Telerik TabStrip - AÃ§Ä±k Gri (ALAN 2 ile aynÄ±) -->
  <div id="tabs-container" style="position:fixed;top:108px;left:0;right:0;z-index:9998;height:26px;background:#f5f5f5;border-bottom:1px solid #e0e0e0;padding:0;opacity:0;">
    <div id="tabs"></div>
    <!-- ALAN 3 Etiketi (Proje anlatÄ±mÄ± iÃ§in) -->
    <span style="position:absolute;left:50%;transform:translateX(-50%);color:#FF0000;font-size:12pt;font-weight:bold;pointer-events:none;z-index:1;white-space:nowrap;">
      ALAN 3 
      <span style="color:#FF0000;font-size:10pt;margin-left:10px;">â†• 26px</span>
      <span style="color:#FF0000;font-size:10pt;margin-left:10px;">â†” 100%</span>
    </span>
  </div>
  
  <!-- TANIMLAR ALT MENÃœ -->
  <div id="tanimlar-menu" style="position:fixed;top:28px;left:0;background:#FFFFFF;border:1px solid #E0E0E0;box-shadow:0 2px 4px rgba(0,0,0,0.1);z-index:10001;display:none;min-width:200px;">
    <div id="tanimlar-firmalar" style="padding:5px 15px;cursor:pointer;">Firmalar</div>
  </div>
  
  <!-- FIRMA TANIMLARI WINDOW -->
  <div id="firma-tanimlari-window" style="display:none;">
    <div style="padding:12px;">
      <label for="firma-adi-input" style="display:block;margin-bottom:6px;font-weight:600;">Firma Ä°smi</label>
      <input id="firma-adi-input" style="width:100%;" />
    </div>
  </div>
  
  <!-- ÃœRÃœN TANIMLARI WINDOW -->
  <div id="urun-tanimlari-window" style="display:none;">
    <div style="padding:12px;">
      <label for="urun-adi-input" style="display:block;margin-bottom:6px;font-weight:600;">ÃœrÃ¼n Ä°smi</label>
      <input id="urun-adi-input" style="width:100%;" />
    </div>
  </div>

  <!-- FIRMA YÃ–NETÄ°MÄ° WINDOW -->
  <div id="firma-window" style="display:none;">
    <div id="firma-grid-container" style="padding:10px;height:100%;">
      <div id="firma-grid" style="height:300px;"></div>
    </div>
  </div>
  
  <!-- ÃœRÃœN YÃ–NETÄ°MÄ° WINDOW -->
  <div id="urun-window" style="display:none;">
    <div id="urun-grid-container" style="padding:10px;height:100%;">
      <div id="urun-grid" style="height:300px;"></div>
    </div>
  </div>
  
  <!-- Ä°Ã‡ERÄ°K ALANI -->
  <div id="main-content" style="margin-top:134px;padding-top:0;opacity:0;">
    {% block content %}{% endblock %}
  </div>
  
  <!-- TELERÄ°K NOTIFICATION BÄ°LEÅžENÄ° -->
  <div id="notification"></div>
  
  <script>
    // MenÃ¼ Ã¶ÄŸelerini veritabanÄ±ndan yÃ¼kle
    var menuItems = {{ menu_items|safe }};

    // TanÄ±mlar menÃ¼sÃ¼ - geÃ§iÅŸ iÃ§in Ã¶rnek veri (Petronet mantÄ±ÄŸÄ±na hazÄ±rlÄ±k)
    // Åžimdilik mevcut TanÄ±mlar alt baÅŸlÄ±klarÄ±yla aynÄ± iÃ§erik verildi.
    var tanimlarMenuData = [
      { text: "Firma TanÄ±mlarÄ±", key: "firma_tanimlari" },
      { text: "ÃœrÃ¼n TanÄ±mlarÄ±", key: "urun_tanimlari" },
      { text: "Whatsapp TanÄ±mlarÄ±", key: "whatsapp_tanimlari" },
      { text: "Ã‡Ä±kÄ±ÅŸ", key: "cikis" }
    ];

    // Bu bayrak true olduÄŸunda TanÄ±mlar alt menÃ¼sÃ¼ veriden doldurulur.
    // Åžu an iÃ§erik aynÄ± olduÄŸu iÃ§in ekranda fark yoktur.
    var useTanimlarMenuData = true;

    function renderTanimlarMenuFromData() {
      if (!useTanimlarMenuData || !Array.isArray(tanimlarMenuData) || tanimlarMenuData.length === 0) {
        return;
      }

      var tanimlarMenu = $("#ana-menu-bar > li").filter(function() {
        return $(this).children("span").first().text().trim() === "TanÄ±mlar";
      }).first();

      if (!tanimlarMenu.length) {
        return;
      }

      var subList = tanimlarMenu.children("ul");
      if (!subList.length) {
        subList = $("<ul></ul>").appendTo(tanimlarMenu);
      }

      subList.empty();
      tanimlarMenuData.forEach(function(item) {
        var li = $("<li></li>");
        if (item.key) {
          li.attr("data-menu-key", item.key);
        }
        li.append($("<span></span>").text(item.text));
        subList.append(li);
      });
    }
    
    // Tab yÃ¶netimi - Sadece Operasyon sayfasÄ± iÃ§in test
    var tabStrip = null;
    var ignoreSelectEvent = false; // Tab kapatÄ±lÄ±rken select event'ini ignore et
    var activeTabIdToKeep = null; // Pasif tab kapatÄ±ldÄ±ÄŸÄ±nda aktif tab ID'sini korumak iÃ§in
    
    // Ribbon butonlarÄ±nÄ± baÅŸlat
    // TELERÄ°K NOTIFICATION BÄ°LEÅžENÄ° - TÃ¼m sayfalarda kullanÄ±labilir
    var notification = null;
    
    // Bildirim gÃ¶sterme fonksiyonlarÄ±
    function showSuccess(message) {
      if (notification) {
        notification.show(message, "success");
      } else {
        // Fallback: Notification henÃ¼z hazÄ±r deÄŸilse alert kullan
        setTimeout(function() {
          if (notification) {
            notification.show(message, "success");
          } else {
            alert(message);
          }
        }, 100);
      }
    }
    
    function showError(message) {
      if (notification) {
        // Hata mesajlarÄ± iÃ§in daha uzun sÃ¼re gÃ¶ster (5 saniye)
        var errorNotification = notification.show(message, "error");
        setTimeout(function() {
          if (errorNotification && notification) {
            notification.hide(errorNotification);
          }
        }, 5000);
      } else {
        // Fallback: Notification henÃ¼z hazÄ±r deÄŸilse alert kullan
        setTimeout(function() {
          if (notification) {
            var errorNotification = notification.show(message, "error");
            setTimeout(function() {
              if (errorNotification && notification) {
                notification.hide(errorNotification);
              }
            }, 5000);
          } else {
            alert(message);
          }
        }, 100);
      }
    }
    
    function showInfo(message) {
      if (notification) {
        notification.show(message, "info");
      } else {
        // Fallback: Notification henÃ¼z hazÄ±r deÄŸilse alert kullan
        setTimeout(function() {
          if (notification) {
            notification.show(message, "info");
          } else {
            alert(message);
          }
        }, 100);
      }
    }
    
    function showWarning(message) {
      if (notification) {
        // UyarÄ± mesajlarÄ± iÃ§in orta sÃ¼re gÃ¶ster (4 saniye)
        var warningNotification = notification.show(message, "warning");
        setTimeout(function() {
          if (warningNotification && notification) {
            notification.hide(warningNotification);
          }
        }, 4000);
      } else {
        // Fallback: Notification henÃ¼z hazÄ±r deÄŸilse alert kullan
        setTimeout(function() {
          if (notification) {
            var warningNotification = notification.show(message, "warning");
            setTimeout(function() {
              if (warningNotification && notification) {
                notification.hide(warningNotification);
              }
            }, 4000);
          } else {
            alert(message);
          }
        }, 100);
      }
    }
    
    $(document).ready(function() {
      // Flash sorunu Ã§Ã¶zÃ¼mÃ¼: Sayfa yÃ¼klendiÄŸinde body'ye 'loaded' class'Ä± ekle
      $('body').addClass('loaded');

      // TanÄ±mlar menÃ¼sÃ¼nÃ¼ veriden doldur (geÃ§iÅŸ hazÄ±rlÄ±ÄŸÄ±)
      renderTanimlarMenuFromData();

      // TELERÄ°K NOTIFICATION BAÅžLAT
      if (typeof kendo !== 'undefined' && typeof $.fn.kendoNotification !== 'undefined') {
        try {
          notification = $("#notification").kendoNotification({
            position: { top: 50, right: 50 },
            stacking: "down",
            hideAfter: 3000  // VarsayÄ±lan 3 saniye
          }).data("kendoNotification");
          
          // TEST Ä°Ã‡Ä°N: Konsoldan test edebilmek iÃ§in global fonksiyonlar
          // TarayÄ±cÄ± konsolunda (F12) ÅŸunlarÄ± yazabilirsiniz:
          // showSuccess("Test baÅŸarÄ± mesajÄ±")
          // showError("Test hata mesajÄ±")
          // showWarning("Test uyarÄ± mesajÄ±")
          // showInfo("Test bilgi mesajÄ±")
        } catch(error) {
          console.error("Notification baÅŸlatÄ±lÄ±rken hata:", error);
        }
      }

      // ALAN 1 - Ana MenÃ¼ ButonlarÄ± (Telerik Kendo UI Menu)
      var anaMenu = null;
      var enablePetronetMenuStyles = false;
      var allowHoverOpen = false;
      function applyAltMenuFontSize() {
        $("#ana-menu-bar .k-menu-group .k-item, #ana-menu-bar .k-popup .k-item").each(function() {
          this.style.setProperty('font-size', '16px', 'important');
        });
        $("#ana-menu-bar .k-menu-group .k-link, #ana-menu-bar .k-popup .k-link").each(function() {
          this.style.setProperty('font-size', '16px', 'important');
        });
        $("#ana-menu-bar .k-menu-group .k-menu-item-text, #ana-menu-bar .k-popup .k-menu-item-text").each(function() {
          this.style.setProperty('font-size', '16px', 'important');
        });
        $("#ana-menu-bar .k-menu-group span, #ana-menu-bar .k-popup span").each(function() {
          this.style.setProperty('font-size', '16px', 'important');
        });
      }
      function initAnaMenu() {
        if (typeof kendo !== 'undefined' && typeof $.fn.kendoMenu !== 'undefined') {
          try {
            anaMenu = $("#ana-menu-bar").kendoMenu({
              orientation: "horizontal",
              openOnClick: true,
              highlightFirst: false, // COPILOT Ã‡Ã–ZÃœMÃœ - VarsayÄ±lan hover'larÄ± engelle
              animation: {
                open: {
                  effects: "fadeIn",
                  duration: 150
                },
                close: {
                  effects: "fadeOut",
                  duration: 100
                }
              },
              open: function(e) {
                applyAltMenuFontSize();
                if (!enablePetronetMenuStyles) {
                  return;
                }
                // MenÃ¼ aÃ§Ä±ldÄ±ÄŸÄ±nda tÄ±klanan butonu koyu mavi yap (#64B5F6)
                var $item = $(e.item);
                $item.addClass('menu-acik');
                $item.css({
                  'background': '#64B5F6 !important',
                  'background-color': '#64B5F6 !important'
                });
                // DiÄŸer tÃ¼m ana menÃ¼ butonlarÄ±nÄ± aÃ§Ä±k mavi yap
                $("#ana-menu-bar > li").not($item).css({
                  'background': '#E3F2FD !important',
                  'background-color': '#E3F2FD !important'
                });
                // Alt menÃ¼ stillerini uygula - daha uzun bekleme
                setTimeout(function() {
                  if (typeof applyPetronetStyles === 'function' && !isApplyingStyles) {
                    applyPetronetStyles();
                  }
                  // Ekstra kontrol - alt menÃ¼ .k-link'leri zorla dÃ¼zelt
                  setTimeout(function() {
                    $("#ana-menu-bar .k-menu-group .k-link, #ana-menu-bar .k-popup .k-link").each(function() {
                      this.style.setProperty('font-size', '15px', 'important');
                      this.style.setProperty('font-weight', 'normal', 'important');
                      this.style.setProperty('color', '#333333', 'important');
                      // VarsayÄ±lan arka planÄ± transparent yap
                      this.style.setProperty('background', 'transparent', 'important');
                      this.style.setProperty('background-color', 'transparent', 'important');
                    });
                  }, 100);
                  // Telerik kontrolÃ¼ yap
                  setTimeout(checkTelerikMenuStyles, 300);
                }, 300);
              },
              close: function(e) {
                if (!enablePetronetMenuStyles) {
                  return;
                }
                // MenÃ¼ kapandÄ±ÄŸÄ±nda tÃ¼m butonlarÄ± aÃ§Ä±k mavi yap
                var $item = $(e.item);
                $item.removeClass('menu-acik');
                $item.css({
                  'background': '#E3F2FD',
                  'background-color': '#E3F2FD'
                });
                // TÃ¼m ana menÃ¼ butonlarÄ±nÄ± aÃ§Ä±k mavi yap
                $("#ana-menu-bar > li").css({
                  'background': '#E3F2FD',
                  'background-color': '#E3F2FD'
                });
                // Stilleri tekrar uygula (sadece bir kez)
                setTimeout(function() {
                  if (typeof applyPetronetStyles === 'function' && !isApplyingStyles) {
                    applyPetronetStyles();
                  }
                }, 150);
                console.log("MenÃ¼ kapandÄ±:", $item.text());
              },
              select: function(e) {
                var menuText = $(e.item).text().trim();
                console.log("Ana menÃ¼ tÄ±klandÄ±:", menuText);
                // Alt menÃ¼ Ã¶ÄŸelerine tÄ±klama iÅŸlemleri
                if (menuText === "Firma TanÄ±mlarÄ±") {
                  openFirmaTanimlariTab();
                } else if (menuText === "ÃœrÃ¼n TanÄ±mlarÄ±") {
                  openUrunTanimlariWindow();
                } else if (menuText === "Sistem TanÄ±mlarÄ±") {
                  openSistemTanimlariWindow();
                } else if (menuText === "KullanÄ±cÄ± TanÄ±mlarÄ±") {
                  openKullaniciTanimlariWindow();
                } else if (menuText === "Cari Kartlar" || menuText === "Cari Kart") {
                  // Cari Kart sayfasÄ± devre dÄ±ÅŸÄ±
                }
              }
            }).data("kendoMenu");
            console.log("âœ… Ana menÃ¼ baÅŸarÄ±yla oluÅŸturuldu!");
            setTimeout(applyAltMenuFontSize, 50);

            // Hover ile aÃ§ma sadece tÄ±klamadan sonra aktif olsun
            $("#ana-menu-bar").on("click", "li.k-item", function(e) {
              if ($(this).closest(".k-menu-group, .k-popup").length > 0) {
                return;
              }
              allowHoverOpen = true;
            });

            $("#ana-menu-bar").on("mouseenter", "li.k-item", function() {
              if (!allowHoverOpen || !anaMenu) {
                return;
              }
              if ($(this).closest(".k-menu-group, .k-popup").length > 0) {
                return;
              }
              var $item = $(this);
              $item.siblings("li.k-item").each(function() {
                anaMenu.close($(this));
              });
              anaMenu.open($item);
            });

            // ALAN 1 dÄ±ÅŸÄ±na tÄ±klanÄ±nca hover aÃ§ma kapansÄ±n
            $(document).on("click", function(e) {
              if ($(e.target).closest("#fixed-area-1-container").length === 0) {
                allowHoverOpen = false;
                if (anaMenu) {
                  $("#ana-menu-bar > li.k-item").each(function() {
                    anaMenu.close($(this));
                  });
                }
              }
            });
            
            // MenÃ¼ oluÅŸturulduktan sonra Petronet gÃ¶rÃ¼ntÃ¼sÃ¼ne gÃ¶re tÃ¼m stilleri uygula
            var isApplyingStyles = false; // Sonsuz dÃ¶ngÃ¼ Ã¶nleme
            var lastApplyTime = 0; // Throttle iÃ§in
            
            function applyPetronetStyles() {
              if (!enablePetronetMenuStyles) {
                return;
              }
              // Throttle: 300ms iÃ§inde tekrar Ã§aÄŸrÄ±lÄ±rsa Ã§Ä±k
              var now = Date.now();
              if (now - lastApplyTime < 300) return;
              lastApplyTime = now;
              
              if (isApplyingStyles) return; // Zaten uygulanÄ±yorsa Ã§Ä±k
              isApplyingStyles = true;
              
              try {
                // Ana menÃ¼ container arka planÄ±
                $("#fixed-area-1-container").css({
                  'background': '#E3F2FD',
                  'background-color': '#E3F2FD',
                  'background-image': 'none'
                });
                
                // Ana menÃ¼ butonlarÄ±
                $("#ana-menu-bar > li, #ana-menu-bar .k-menu-item, #ana-menu-bar li").each(function() {
                  var $item = $(this);
                  $item.css({
                    'background': '#E3F2FD',
                    'background-color': '#E3F2FD',
                    'padding': '0 12px',
                    'margin': '0',
                    'height': '28px',
                    'line-height': '28px',
                    'font-family': "'Segoe UI', Arial, sans-serif",
                    'border-right': '1px solid #90caf9'
                  });
                  // Ana menÃ¼ yazÄ± - Telerik .k-link'i zorla override et
                  $item.find('.k-menu-item-text, .k-link, span').css({
                    'font-size': '16px',
                    'font-weight': '600',
                    'font-family': "'Segoe UI', Arial, sans-serif",
                    'color': '#333333',
                    'letter-spacing': '0.3px',
                    'line-height': '28px'
                  });
                  
                  // .k-link'i Ã¶zellikle hedefle ve zorla uygula
                  var kLink = $item.find('.k-link').first();
                  if (kLink.length > 0) {
                    kLink[0].style.setProperty('font-size', '16px', 'important');
                    kLink[0].style.setProperty('font-weight', '600', 'important');
                    kLink[0].style.setProperty('color', '#333333', 'important');
                    kLink[0].style.setProperty('font-family', "'Segoe UI', Arial, sans-serif", 'important');
                  }
                });
                
                // Alt menÃ¼ container
                $("#ana-menu-bar .k-menu-group, #ana-menu-bar .k-popup").css({
                  'background': '#D9D9FF',
                  'background-color': '#D9D9FF',
                  'padding': '0'
                });
                
                // Alt menÃ¼ Ã¶ÄŸeleri - ayÄ±rÄ±cÄ± Ã§izgi YOK, sol tarafta mavi Ã§izgi VAR
                $("#ana-menu-bar .k-menu-group .k-menu-item, #ana-menu-bar .k-popup .k-menu-item, #ana-menu-bar .k-menu-group .k-item").each(function() {
                  var item = this; // DOM elementi
                  var $item = $(this);
                  
                  // Alt menÃ¼ Ã¶ÄŸesi padding'i zorla uygula - DOM elementine direkt - DÄ°KEY ORTALANMIÅž
                  item.style.setProperty('padding', '0 20px 0 25px', 'important'); /* Ãœst ve alt padding 0, sol padding 25px - YAZILAR DAHA SOLDAN BAÅžLAR */
                  item.style.setProperty('padding-left', '25px', 'important'); /* Sol padding 25px (20px mavi Ã§izgi + 5px boÅŸluk) */
                  item.style.setProperty('margin', '0', 'important');
                  item.style.setProperty('min-height', '28px', 'important');
                  item.style.setProperty('line-height', '28px', 'important'); /* min-height ile aynÄ± - dikey ortalama iÃ§in */
                  item.style.setProperty('font-family', "'Segoe UI', Arial, sans-serif", 'important');
                  item.style.setProperty('background', '#D9D9FF', 'important');
                  item.style.setProperty('background-color', '#D9D9FF', 'important');
                  item.style.setProperty('border-bottom', 'none', 'important');
                  item.style.setProperty('border-top', 'none', 'important');
                  item.style.setProperty('position', 'relative', 'important');
                  item.style.setProperty('font-size', '15px', 'important'); // li elementinin font boyutu
                  item.style.setProperty('display', 'flex', 'important'); /* Flexbox ile dikey ortalama */
                  item.style.setProperty('align-items', 'center', 'important'); /* Dikey ortalama */
                  item.style.setProperty('justify-content', 'flex-start', 'important'); /* Sol baÅŸtan hizalama */
                  
                  // COPILOT Ã‡Ã–ZÃœMÃœ - Runtime inline stillerini kaldÄ±r (SADECE background stilleri)
                  $item.off('mouseenter mouseleave').on('mouseenter', function() {
                    var item = this;
                    
                    // SADECE background ile ilgili inline stilleri temizle (padding/margin korunmalÄ±)
                    var currentStyle = item.getAttribute('style') || '';
                    var styleParts = currentStyle.split(';');
                    var newStyleParts = [];
                    for (var i = 0; i < styleParts.length; i++) {
                      var part = styleParts[i].trim();
                      if (part && 
                          !part.toLowerCase().includes('background') && 
                          !part.toLowerCase().includes('box-shadow') &&
                          !part.toLowerCase().includes('border-color')) {
                        newStyleParts.push(part);
                      }
                    }
                    item.setAttribute('style', newStyleParts.join('; '));
                    
                    // DÃ¼z sarÄ±-turuncu arka plan uygula
                    item.style.setProperty('background', '#F3E9C9', 'important');
                    item.style.setProperty('background-color', '#F3E9C9', 'important');
                    item.style.setProperty('border-color', '#E5C76B', 'important');
                    item.style.setProperty('background-image', 'none', 'important');
                    item.style.setProperty('box-shadow', 'none', 'important');
                    item.style.setProperty('border', 'none', 'important');
                    
                    // TÃœM Ã§ocuk elementlerin SADECE background stillerini temizle (padding/margin korunmalÄ±)
                    $(item).find('*').each(function() {
                      // SADECE background stillerini temizle
                      this.style.background = 'transparent';
                      this.style.backgroundColor = 'transparent';
                      this.style.backgroundImage = 'none';
                      this.style.boxShadow = 'none';
                      // padding, margin, position, left, top, width, height gibi deÄŸerleri KORU
                    });
                  }).on('mouseleave', function() {
                    var item = this;
                    if (!item.classList.contains('k-state-selected') && 
                        !item.classList.contains('k-state-active')) {
                      // VarsayÄ±lan arka plana dÃ¶n
                      item.style.setProperty('background', '#D9D9FF', 'important');
                      item.style.setProperty('background-color', '#D9D9FF', 'important');
                      item.style.setProperty('border-color', 'transparent', 'important');
                      item.style.setProperty('background-image', 'none', 'important');
                      
                      // Ã‡ocuk elementleri transparent yap
                      $(item).find('*').each(function() {
                        this.style.background = 'transparent';
                        this.style.backgroundColor = 'transparent';
                        this.style.backgroundImage = 'none';
                      });
                    }
                  });
                  
                  // Hover durumunu temizle (varsayÄ±lan arka planÄ± zorla uygula)
                  if (!item.classList.contains('k-state-hover') && 
                      !item.classList.contains('k-state-selected') && 
                      !item.classList.contains('k-state-active')) {
                    item.style.setProperty('background', '#D9D9FF', 'important');
                    item.style.setProperty('background-color', '#D9D9FF', 'important');
                  }
                  
                  // JavaScript ile eklenen span'leri kaldÄ±r (CSS ::before kullanÄ±yoruz)
                  $item.find('span[style*="position:absolute"][style*="left:0"]').remove();
                  
                  // TÃœM .k-link elementlerini bul ve zorla uygula - Ä°LK HARFLER ALT ALTA BAÅžLAMALI
                  // DÄ°KEY ORTALAMA Ä°Ã‡Ä°N line-height ve display: flex ekle, SOL BAÅžTAN HÄ°ZALAMA
                  var kLinks = item.querySelectorAll('.k-link');
                  kLinks.forEach(function(kLink) {
                    kLink.style.setProperty('font-size', '15px', 'important');
                    kLink.style.setProperty('font-weight', 'normal', 'important');
                    kLink.style.setProperty('color', '#333333', 'important');
                    kLink.style.setProperty('font-family', "'Segoe UI', Arial, sans-serif", 'important');
                    kLink.style.setProperty('letter-spacing', '0.2px', 'important');
                    kLink.style.setProperty('line-height', '28px', 'important'); /* min-height ile aynÄ± - dikey ortalama iÃ§in */
                    kLink.style.setProperty('text-align', 'left', 'important'); /* Sol baÅŸtan hizalama */
                    // FLEXBOX Ä°LE DÄ°KEY ORTALAMA VE SOL HÄ°ZALAMA
                    kLink.style.setProperty('display', 'flex', 'important'); /* Flexbox yapÄ±sÄ± */
                    kLink.style.setProperty('align-items', 'center', 'important'); /* Dikey ortalama */
                    kLink.style.setProperty('justify-content', 'flex-start', 'important'); /* Sol baÅŸtan hizalama */
                    kLink.style.setProperty('text-align', 'left', 'important'); /* Metin sol hizalama */
                    // Ä°LK HARFLER ALT ALTA BAÅžLAMALI - padding ve margin 0
                    kLink.style.setProperty('padding-left', '0', 'important');
                    kLink.style.setProperty('padding-right', '0', 'important');
                    kLink.style.setProperty('padding-top', '0', 'important');
                    kLink.style.setProperty('padding-bottom', '0', 'important');
                    kLink.style.setProperty('margin-left', '0', 'important');
                    kLink.style.setProperty('margin-right', '0', 'important');
                    kLink.style.setProperty('margin-top', '0', 'important');
                    kLink.style.setProperty('margin-bottom', '0', 'important');
                    // VarsayÄ±lan arka planÄ± transparent yap (merdiven gÃ¶rÃ¼nÃ¼mÃ¼nÃ¼ Ã¶nlemek iÃ§in)
                    kLink.style.setProperty('background', 'transparent', 'important');
                    kLink.style.setProperty('background-color', 'transparent', 'important');
                    kLink.style.setProperty('background-image', 'none', 'important');
                    
                    // .k-link iÃ§indeki TÃœM elementlerin padding ve margin'i 0 olmalÄ±
                    var linkChildren = kLink.querySelectorAll('*');
                    linkChildren.forEach(function(child) {
                      child.style.setProperty('padding-left', '0', 'important');
                      child.style.setProperty('padding-right', '0', 'important');
                      child.style.setProperty('margin-left', '0', 'important');
                      child.style.setProperty('margin-right', '0', 'important');
                    });
                  });
                  
                  // .k-menu-item-text iÃ§in - GRID YAPISI Ä°LE SOL HÄ°ZALAMA
                  var menuItemTexts = item.querySelectorAll('.k-menu-item-text');
                  menuItemTexts.forEach(function(text) {
                    text.style.setProperty('padding-left', '0', 'important');
                    text.style.setProperty('padding-right', '0', 'important');
                    text.style.setProperty('margin-left', '0', 'important');
                    text.style.setProperty('margin-right', '0', 'important');
                    text.style.setProperty('text-align', 'left', 'important'); /* Sol baÅŸtan hizalama */
                    text.style.setProperty('justify-self', 'start', 'important'); /* Grid iÃ§inde sol hizalama */
                    text.style.setProperty('display', 'block', 'important'); /* Block element */
                    text.style.setProperty('width', 'auto', 'important'); /* Otomatik geniÅŸlik */
                  });
                  
                  // .k-link iÃ§indeki span'ler iÃ§in de sol hizalama (FLEXBOX UYUMLU)
                  var linkSpans = item.querySelectorAll('.k-link span');
                  linkSpans.forEach(function(span) {
                    span.style.setProperty('text-align', 'left', 'important'); /* Sol baÅŸtan hizalama */
                    span.style.setProperty('flex', '0 0 auto', 'important'); /* Flexbox iÃ§inde otomatik boyut */
                    span.style.setProperty('align-self', 'flex-start', 'important'); /* Sol baÅŸtan hizalama */
                    /* display: block kaldÄ±rÄ±ldÄ± - flexbox ile uyumlu olmalÄ± */
                  });
                  
                  // DiÄŸer yazÄ± elementleri - SOL BAÅžTAN HÄ°ZALAMA (FLEXBOX UYUMLU)
                  var spans = item.querySelectorAll('span:not([style*="position"])');
                  spans.forEach(function(span) {
                    if (!span.classList.contains('k-link')) {
                      span.style.setProperty('font-size', '15px', 'important');
                      span.style.setProperty('color', '#333333', 'important');
                      span.style.setProperty('text-align', 'left', 'important'); /* Sol baÅŸtan hizalama */
                      /* display: block kaldÄ±rÄ±ldÄ± - flexbox ile uyumlu olmalÄ± */
                    }
                  });
                });
              } catch(e) {
                console.error("Stil uygulama hatasÄ±:", e);
              } finally {
                isApplyingStyles = false;
              }
            }
            
            // Ä°lk uygulama - sadece birkaÃ§ kez
            setTimeout(applyPetronetStyles, 300);
            setTimeout(applyPetronetStyles, 800);
            
            // AGRESIF Ã‡Ã–ZÃœM - Telerik'in inline style'larÄ±nÄ± tamamen temizle ve zorla uygula
            function forceLeftAlignment() {
              // Parent li iÃ§in - Telerik'in inline style'larÄ±nÄ± temizle ve zorla uygula
              $('#ana-menu-bar .k-menu-group li.k-item, #ana-menu-bar .k-popup li.k-item').each(function() {
                // Telerik'in inline style'larÄ±nÄ± tamamen temizle
                this.removeAttribute('style');
                // Zorla flexbox ayarlarÄ± uygula
                this.style.setProperty('display', 'flex', 'important');
                this.style.setProperty('align-items', 'center', 'important');
                this.style.setProperty('justify-content', 'flex-start', 'important');
                this.style.setProperty('text-align', 'left', 'important');
              });
              
              // .k-link iÃ§in - Telerik'in inline style'larÄ±nÄ± temizle ve zorla uygula
              $('#ana-menu-bar .k-menu-group .k-menu-item .k-link, #ana-menu-bar .k-popup .k-menu-item .k-link').each(function() {
                // Telerik'in inline style'larÄ±nÄ± tamamen temizle
                this.removeAttribute('style');
                // Zorla flexbox ayarlarÄ± uygula
                this.style.setProperty('display', 'flex', 'important');
                this.style.setProperty('align-items', 'center', 'important');
                this.style.setProperty('justify-content', 'flex-start', 'important');
                this.style.setProperty('text-align', 'left', 'important');
                this.style.setProperty('padding-left', '0', 'important');
                this.style.setProperty('margin-left', '0', 'important');
              });
              
              // .k-menu-item-text iÃ§in - Telerik'in inline style'larÄ±nÄ± temizle ve zorla uygula
              $('#ana-menu-bar .k-menu-group .k-menu-item .k-menu-item-text, #ana-menu-bar .k-popup .k-menu-item .k-menu-item-text').each(function() {
                // Telerik'in inline style'larÄ±nÄ± tamamen temizle
                this.removeAttribute('style');
                // Zorla sol hizalama uygula
                this.style.setProperty('text-align', 'left', 'important');
                this.style.setProperty('margin-left', '0', 'important');
                this.style.setProperty('padding-left', '0', 'important');
                this.style.setProperty('display', 'block', 'important');
                this.style.setProperty('width', 'auto', 'important');
              });
            }
            
            // Ä°lk uygulama
            setTimeout(forceLeftAlignment, 500);
            setTimeout(forceLeftAlignment, 1000);
            setTimeout(forceLeftAlignment, 1500);
            
            // MenÃ¼ aÃ§Ä±ldÄ±ÄŸÄ±nda da uygula
            if (anaMenu) {
              anaMenu.bind('open', function() {
                setTimeout(forceLeftAlignment, 50);
                setTimeout(forceLeftAlignment, 200);
                setTimeout(forceLeftAlignment, 500);
              });
            }
            
            // SÃ¼rekli kontrol et (Telerik'in runtime deÄŸiÅŸikliklerini yakala)
            setInterval(function() {
              $('#ana-menu-bar .k-menu-group li.k-item').each(function() {
                var justifyContent = window.getComputedStyle(this).justifyContent;
                if (justifyContent !== 'flex-start') {
                  this.style.setProperty('justify-content', 'flex-start', 'important');
                }
              });
              
              $('#ana-menu-bar .k-menu-group .k-menu-item .k-link').each(function() {
                var justifyContent = window.getComputedStyle(this).justifyContent;
                var textAlign = window.getComputedStyle(this).textAlign;
                if (justifyContent !== 'flex-start') {
                  this.style.setProperty('justify-content', 'flex-start', 'important');
                }
                if (textAlign !== 'left') {
                  this.style.setProperty('text-align', 'left', 'important');
                }
              });
              
              $('#ana-menu-bar .k-menu-group .k-menu-item .k-menu-item-text').each(function() {
                var textAlign = window.getComputedStyle(this).textAlign;
                if (textAlign !== 'left') {
                  this.style.setProperty('text-align', 'left', 'important');
                }
              });
            }, 100); // Her 100ms'de bir kontrol et
            
            // Hover rengi sadece Ã¼stÃ¼ndeyken kalsÄ±n, Ã§Ä±kÄ±nca sÄ±fÄ±rla
            $("#ana-menu-bar").on("mouseenter", "li.k-item", function() {
              var $item = $(this);
              
              // SADECE background ile ilgili inline stilleri temizle (padding/margin korunmalÄ±)
              var currentStyle = this.getAttribute('style') || '';
              var styleParts = currentStyle.split(';');
              var newStyleParts = [];
              for (var i = 0; i < styleParts.length; i++) {
                var part = styleParts[i].trim();
                if (part && 
                    !part.toLowerCase().includes('background') && 
                    !part.toLowerCase().includes('box-shadow') &&
                    !part.toLowerCase().includes('border-color')) {
                  newStyleParts.push(part);
                }
              }
              this.setAttribute('style', newStyleParts.join('; '));
              
              // Hover rengi uygula
              this.style.setProperty('background', '#F3E9C9', 'important');
              this.style.setProperty('background-color', '#F3E9C9', 'important');
              this.style.setProperty('border-color', '#E5C76B', 'important');
              this.style.setProperty('background-image', 'none', 'important');
              this.style.setProperty('box-shadow', 'none', 'important');
              
              // Ã‡ocuk elementlerin arka planÄ±nÄ± temizle
              $item.find("*").each(function() {
                this.style.background = "transparent";
                this.style.backgroundColor = "transparent";
                this.style.backgroundImage = "none";
                this.style.boxShadow = "none";
              });
            }).on("mouseleave", "li.k-item", function() {
              var $item = $(this);
              // Hover bittiÄŸinde inline arka planÄ± temizle
              this.style.removeProperty('background');
              this.style.removeProperty('background-color');
              this.style.removeProperty('background-image');
              this.style.removeProperty('box-shadow');
              this.style.setProperty('border-color', 'transparent', 'important');
              
              // Ã‡ocuk elementlerin inline arka planÄ±nÄ± temizle
              $item.find("*").each(function() {
                this.style.removeProperty('background');
                this.style.removeProperty('background-color');
                this.style.removeProperty('background-image');
                this.style.removeProperty('box-shadow');
              });
            });
            
            // TELERIK KARÅžILAÅžTIRMA KONTROLÃœ - Fonksiyon olarak tanÄ±mla
            function checkTelerikMenuStyles() {
              console.log("\n\n========================================");
              console.log("=== TELERIK MENU KARÅžILAÅžTIRMA KONTROLÃœ ===");
              console.log("========================================\n");
              
              // Ana menÃ¼ container kontrolÃ¼
              var menuBar = document.getElementById('ana-menu-bar');
              if (!menuBar) {
                console.log("âŒ #ana-menu-bar bulunamadÄ±!");
                return;
              }
              console.log("âœ… #ana-menu-bar bulundu");
              
              // Ana menÃ¼ Ã¶ÄŸelerini kontrol et - TÃœM YOLLARLA
              var anaMenuItems1 = $("#ana-menu-bar > li");
              var anaMenuItems2 = $("#ana-menu-bar .k-item");
              var anaMenuItems3 = $("#ana-menu-bar .k-menu-item");
              var anaMenuItems4 = $("#ana-menu-bar li");
              
              console.log("\n--- ANA MENÃœ KONTROLÃœ ---");
              console.log("  - #ana-menu-bar > li sayÄ±sÄ±:", anaMenuItems1.length);
              console.log("  - .k-item sayÄ±sÄ±:", anaMenuItems2.length);
              console.log("  - .k-menu-item sayÄ±sÄ±:", anaMenuItems3.length);
              console.log("  - li sayÄ±sÄ±:", anaMenuItems4.length);
              
              var anaMenuItems = anaMenuItems1.length > 0 ? anaMenuItems1 : anaMenuItems4;
              console.log("\nâœ… KullanÄ±lan selector ile bulunan Ã¶ÄŸe sayÄ±sÄ±:", anaMenuItems.length);
              
              if (anaMenuItems.length > 0) {
                anaMenuItems.each(function(index) {
                  var $item = $(this);
                  var itemText = $item.text().trim().replace(/\s+/g, ' ').substring(0, 50);
                  var hasKItem = $item.hasClass('k-item');
                  var hasKMenuItem = $item.hasClass('k-menu-item');
                  var kLink = $item.find('.k-link').first();
                  var kLinkText = kLink.length > 0 ? kLink.text().trim() : '';
                  var computedBg = window.getComputedStyle(this).backgroundColor;
                  var computedFontSize = window.getComputedStyle(this).fontSize;
                  var computedColor = window.getComputedStyle(this).color;
                  
                  console.log(`\n  ðŸ“Œ Ana MenÃ¼ ${index + 1}: "${itemText}"`);
                  console.log("    âœ“ k-item class:", hasKItem);
                  console.log("    âœ“ k-menu-item class:", hasKMenuItem);
                  console.log("    âœ“ .k-link bulundu:", kLink.length > 0);
                  if (kLink.length > 0) {
                    console.log("    âœ“ .k-link metni:", kLinkText || "(boÅŸ)");
                    var kLinkBg = window.getComputedStyle(kLink[0]).backgroundColor;
                    var kLinkFontSize = window.getComputedStyle(kLink[0]).fontSize;
                    var kLinkColor = window.getComputedStyle(kLink[0]).color;
                    console.log("    âœ“ .k-link arka plan:", kLinkBg);
                    console.log("    âœ“ .k-link font boyutu:", kLinkFontSize);
                    console.log("    âœ“ .k-link yazÄ± rengi:", kLinkColor);
                  }
                  console.log("    âœ“ Arka plan rengi:", computedBg);
                  console.log("    âœ“ Font boyutu:", computedFontSize);
                  console.log("    âœ“ YazÄ± rengi:", computedColor);
                });
              } else {
                console.log("  âš ï¸ Ana menÃ¼ Ã¶ÄŸeleri bulunamadÄ±!");
                console.log("  ðŸ’¡ HTML yapÄ±sÄ±nÄ± kontrol edin: $('#ana-menu-bar').html()");
              }
              
              // Alt menÃ¼ Ã¶ÄŸelerini kontrol et - TÃœM YOLLARLA
              console.log("\n\n--- ALT MENÃœ KONTROLÃœ ---");
              var altMenuItems1 = $("#ana-menu-bar .k-menu-group .k-menu-item");
              var altMenuItems2 = $("#ana-menu-bar .k-popup .k-menu-item");
              var altMenuItems3 = $("#ana-menu-bar .k-menu-group .k-item");
              var altMenuItems4 = $("#ana-menu-bar .k-popup .k-item");
              
              console.log("  - .k-menu-group .k-menu-item sayÄ±sÄ±:", altMenuItems1.length);
              console.log("  - .k-popup .k-menu-item sayÄ±sÄ±:", altMenuItems2.length);
              console.log("  - .k-menu-group .k-item sayÄ±sÄ±:", altMenuItems3.length);
              console.log("  - .k-popup .k-item sayÄ±sÄ±:", altMenuItems4.length);
              
              var altMenuItems = altMenuItems1.length > 0 ? altMenuItems1 : 
                                 altMenuItems2.length > 0 ? altMenuItems2 :
                                 altMenuItems3.length > 0 ? altMenuItems3 : altMenuItems4;
              
              console.log("\nKullanÄ±lan selector ile bulunan Ã¶ÄŸe sayÄ±sÄ±:", altMenuItems.length);
              
              if (altMenuItems.length > 0) {
                console.log("\nâœ… Alt menÃ¼ Ã¶ÄŸeleri bulundu!");
                altMenuItems.each(function(index) {
                  var $item = $(this);
                  var itemText = $item.text().trim().replace(/\s+/g, ' ').substring(0, 50);
                  var kLink = $item.find('.k-link').first();
                  var kLinkText = kLink.length > 0 ? kLink.text().trim() : '';
                  var computedBg = window.getComputedStyle(this).backgroundColor;
                  var computedFontSize = window.getComputedStyle(this).fontSize;
                  var computedPaddingLeft = window.getComputedStyle(this).paddingLeft;
                  var computedColor = window.getComputedStyle(this).color;
                  
                  console.log(`\n  ðŸ“Œ Alt MenÃ¼ ${index + 1}: "${itemText}"`);
                  console.log("    âœ“ .k-link bulundu:", kLink.length > 0);
                  if (kLink.length > 0) {
                    console.log("    âœ“ .k-link metni:", kLinkText || "(boÅŸ)");
                    var kLinkBg = window.getComputedStyle(kLink[0]).backgroundColor;
                    var kLinkFontSize = window.getComputedStyle(kLink[0]).fontSize;
                    var kLinkColor = window.getComputedStyle(kLink[0]).color;
                    console.log("    âœ“ .k-link arka plan:", kLinkBg);
                    console.log("    âœ“ .k-link font boyutu:", kLinkFontSize);
                    console.log("    âœ“ .k-link yazÄ± rengi:", kLinkColor);
                  }
                  console.log("    âœ“ Arka plan rengi:", computedBg);
                  console.log("    âœ“ Font boyutu:", computedFontSize);
                  console.log("    âœ“ Sol padding:", computedPaddingLeft);
                  console.log("    âœ“ YazÄ± rengi:", computedColor);
                });
              } else {
                console.log("  âš ï¸ Alt menÃ¼ Ã¶ÄŸeleri bulunamadÄ±!");
                console.log("  ðŸ’¡ Ä°pucu: 'TanÄ±mlar' menÃ¼sÃ¼nÃ¼ AÃ‡IK tutun ve konsolda ÅŸunu yazÄ±n:");
                console.log("     checkTelerikMenuStyles()");
              }
              
              // Telerik varsayÄ±lan stillerini kontrol et
              console.log("\n\n--- TELERIK VARSAYILAN STÄ°LLER ---");
              var kendoStyles = document.querySelector('link[href*="kendo"]');
              if (kendoStyles) {
                console.log("âœ… Telerik CSS yÃ¼klendi:", kendoStyles.href);
              } else {
                console.log("âš ï¸ Telerik CSS bulunamadÄ±!");
              }
              
              console.log("\n========================================");
              console.log("=== KONTROL TAMAMLANDI ===");
              console.log("========================================\n");
            }
            
            // Ä°lk kontrol - sayfa yÃ¼klendiÄŸinde
            setTimeout(checkTelerikMenuStyles, 2000);
            
            // Global fonksiyon olarak tanÄ±mla - konsoldan Ã§aÄŸrÄ±labilir
            window.checkTelerikMenuStyles = checkTelerikMenuStyles;
          } catch(error) {
            console.error("âŒ Ana menÃ¼ oluÅŸturulurken hata:", error);
          }
        } else {
          console.log("â³ Telerik yÃ¼kleniyor, ana menÃ¼ bekleniyor...");
          setTimeout(initAnaMenu, 100);
        }
      }
      initAnaMenu();
      
      // Firma TanÄ±mlarÄ± Window (boÅŸ iÃ§erik)
      var firmaTanimlariWindow = null;
      var urunTanimlariWindow = null;
      function initFirmaTanimlariWindow() {
        if (typeof kendo !== 'undefined' && typeof $.fn.kendoWindow !== 'undefined') {
          try {
            firmaTanimlariWindow = $("#firma-tanimlari-window").kendoWindow({
              title: "Firma TanÄ±mlarÄ±",
              width: "60%",
              height: "60%",
              visible: false,
              modal: false,
              resizable: true,
              draggable: true,
              actions: ["Maximize", "Minimize", "Close"]
            }).data("kendoWindow");
            
            if (typeof $.fn.kendoTextBox !== 'undefined') {
              $("#firma-adi-input").kendoTextBox({
                placeholder: "Firma ismi yazÄ±n..."
              });
            }
          } catch (error) {
            console.error("Firma TanÄ±mlarÄ± Window baÅŸlatÄ±lÄ±rken hata:", error);
          }
        } else {
          setTimeout(initFirmaTanimlariWindow, 100);
        }
      }
      initFirmaTanimlariWindow();

      function initUrunTanimlariWindow() {
        if (typeof kendo !== 'undefined' && typeof $.fn.kendoWindow !== 'undefined') {
          try {
            urunTanimlariWindow = $("#urun-tanimlari-window").kendoWindow({
              title: "ÃœrÃ¼n TanÄ±mlarÄ±",
              width: "60%",
              height: "60%",
              visible: false,
              modal: false,
              resizable: true,
              draggable: true,
              actions: ["Maximize", "Minimize", "Close"]
            }).data("kendoWindow");
            
            if (typeof $.fn.kendoTextBox !== 'undefined') {
              $("#urun-adi-input").kendoTextBox({
                placeholder: "ÃœrÃ¼n ismi yazÄ±n..."
              });
            }
          } catch (error) {
            console.error("ÃœrÃ¼n TanÄ±mlarÄ± Window baÅŸlatÄ±lÄ±rken hata:", error);
          }
        } else {
          setTimeout(initUrunTanimlariWindow, 100);
        }
      }
      initUrunTanimlariWindow();


      function isWindowOpen(win) {
        return !!(win && win.wrapper && win.wrapper.is(":visible"));
      }

      function openWindowCascade(win) {
        if (!win) {
          return;
        }

        win.open();
        win.center();

        var openCount = 0;
        if (isWindowOpen(firmaTanimlariWindow)) {
          openCount += 1;
        }
        if (isWindowOpen(urunTanimlariWindow)) {
          openCount += 1;
        }
        if (openCount > 1) {
          var offset = (openCount - 1) * 30;
          var wrapper = win.wrapper;
          var top = parseInt(wrapper.css("top"), 10) || 0;
          var left = parseInt(wrapper.css("left"), 10) || 0;
          var maxTop = $(window).height() - wrapper.outerHeight() - 10;
          var maxLeft = $(window).width() - wrapper.outerWidth() - 10;

          top = Math.max(10, Math.min(top + offset, maxTop));
          left = Math.max(10, Math.min(left + offset, maxLeft));

          wrapper.css({ top: top + "px", left: left + "px" });
        }
      }

      function openFirmaTanimlariWindow() {
        if (!firmaTanimlariWindow) {
          initFirmaTanimlariWindow();
          return;
        }
        openWindowCascade(firmaTanimlariWindow);
      }
      
      function openUrunTanimlariWindow() {
        if (!urunTanimlariWindow) {
          initUrunTanimlariWindow();
          return;
        }
        openWindowCascade(urunTanimlariWindow);
      }

      // Ribbon butonlarÄ±nÄ± oluÅŸtur (ALAN 2)
      loadRibbonButtons();

      // Telerik TabStrip baÅŸlat (ALAN 3) - Sadece operasyon iÃ§in
      if (typeof kendo !== 'undefined' && typeof $.fn.kendoTabStrip !== 'undefined') {
        tabStrip = $("#tabs").kendoTabStrip({
          animation: false,
          tabPosition: "top",
          select: function(e) {
            // Tab kapatÄ±lÄ±rken select event'ini ignore et
            if (ignoreSelectEvent) {
              console.log("Select event ignore edildi (tab kapatÄ±lÄ±yor)");
              
              // EÄŸer aktif tab korunmasÄ± gerekiyorsa koru
              if (activeTabIdToKeep) {
                console.log("Aktif tab korunuyor (select event iÃ§inde):", activeTabIdToKeep);
                showPageOnly(activeTabIdToKeep);
                activeTabIdToKeep = null; // Temizle
                ignoreSelectEvent = false; // Flag'i kapat
                return;
              }
              
              ignoreSelectEvent = false; // Flag'i kapat
              return;
            }
            
            // Tab'a tÄ±klayÄ±nca sayfayÄ± gÃ¶ster
            var tabItem = $(e.item);
            var tabId = tabItem.attr("data-tab-id");
            var tabText = tabItem.text() || tabItem.html() || "";
            
            console.log("Tab tÄ±klandÄ±, tabId:", tabId, "tabText:", tabText);
            
            // data-tab-id yoksa tabText'ten bul
            if (!tabId) {
              if (tabText.indexOf("Operasyon") >= 0) {
                tabId = "operasyon";
              } else if (tabText.indexOf("Kredi KartÄ±") >= 0 || tabText.indexOf("Kredi") >= 0) {
                tabId = "kredi-karti";
              } else if (tabText.indexOf("Cari Kart") >= 0) {
                tabId = "cari-kart";
            } else if (tabText.indexOf("Firma") >= 0) {
                tabId = "firma-tanimlari";
            } else if (tabText.indexOf("Åžube") >= 0) {
              tabId = "sube-karti";
              } else if (tabText.indexOf("Banka") >= 0) {
                tabId = "banka";
              } else if (tabText.indexOf("Tanker") >= 0) {
                tabId = "tanker";
              } else if (tabText.indexOf("Fiyat") >= 0) {
                tabId = "fiyat-degisimi";
              }
            }
            
            if (tabId) {
              console.log("Sayfa gÃ¶steriliyor:", tabId);
              showPageOnly(tabId);
            } else {
              console.log("Tab ID bulunamadÄ±!");
            }
          }
        }).data("kendoTabStrip");
        
      }
      
      // X butonlarÄ±na event delegation (dinamik elementler iÃ§in)
      $(document).on("click", ".tab-close-operasyon", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Operasyon X butonuna tÄ±klandÄ±!");
        closeOperasyonTab();
      });
      
      $(document).on("click", ".tab-close-kredi-karti", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Kredi KartÄ± X butonuna tÄ±klandÄ±!");
        closeKrediKartiTab();
      });
      
      $(document).on("click", ".tab-close-cari-kart", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Cari Kart X butonuna tÄ±klandÄ±!");
        closeCariKartTab();
      });

      $(document).on("click", ".tab-close-firma-tanimlari", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Firma TanÄ±mlarÄ± X butonuna tÄ±klandÄ±!");
        closeFirmaTanimlariTab();
      });

      $(document).on("click", ".tab-close-sube-karti", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Åžube KartÄ± X butonuna tÄ±klandÄ±!");
        closeSubeKartiTab();
      });
      
      $(document).on("click", ".tab-close-banka", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Banka X butonuna tÄ±klandÄ±!");
        closeBankaTab();
      });
      
      $(document).on("click", ".tab-close-tanker", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Tanker X butonuna tÄ±klandÄ±!");
        closeTankerTab();
      });
      
      $(document).on("click", ".tab-close-fiyat-degisimi", function(e) {
        e.stopPropagation();
        e.preventDefault();
        console.log("Fiyat DeÄŸiÅŸimi X butonuna tÄ±klandÄ±!");
        closeFiyatDegisimiTab();
      });
    });
    
    // Ribbon butonlarÄ±nÄ± oluÅŸtur (tÃ¼m sayfalarda kullanÄ±labilir) - Telerik Button ile
    function loadRibbonButtons() {
      // Ã–nce mevcut butonlarÄ± temizle
      $("#ribbon-buttons").empty();
      
      menuItems.forEach(function(item) {
        if (item.aktif) {
          // YazÄ±larÄ± kÄ±sa tut, uzunsa kÄ±salt
          var baslik = item.baslik;
          if (baslik.length > 12) {
            baslik = baslik.substring(0, 10) + '...';
          }
          
          // Telerik Button iÃ§in HTML oluÅŸtur
          var buttonId = 'ribbon-btn-' + item.name;
          var buttonHtml = '<button id="' + buttonId + '" class="k-button k-button-md ribbon-button" data-page="' + item.name + '" style="display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4px 6px;min-width:70px;max-width:70px;height:70px;">' +
            '<span style="font-size:32px;margin-bottom:2px;line-height:1;">' + item.icon + '</span>' +
            '<span style="text-align:center;font-size:12px;line-height:1.1;max-width:65px;word-wrap:break-word;">' + baslik + '</span>' +
            '</button>';
          
          $("#ribbon-buttons").append(buttonHtml);
          
          // Telerik Button'Ä± baÅŸlat (sadece gÃ¶rsel)
          if (typeof kendo !== 'undefined' && typeof $.fn.kendoButton !== 'undefined') {
            $("#" + buttonId).kendoButton();
          }
        }
      });
    }
    
    // Tab yÃ¶netimi fonksiyonlarÄ± temizlendi - BaÅŸtan yazÄ±lacak
    
    // Aktif ribbon butonunu ayarlama fonksiyonu - Telerik Button iÃ§in
    function setActiveRibbonButton(pageName) {
      $('button[data-page]').each(function() {
        var page = $(this).data('page');
        var button = $(this).data('kendoButton');
        if (pageName && page === pageName) {
          $(this).addClass('k-state-active');
          $(this).css({
            'background': 'rgba(255,255,255,0.8)',
            'border': '1px solid #808080',
            'box-shadow': 'inset 0 0 2px rgba(0,0,0,0.1)'
          });
        } else {
          $(this).removeClass('k-state-active');
          $(this).css({
            'background': '',
            'border': '',
            'box-shadow': ''
          });
        }
      });
    }
    
    // Aktif tab ID'sini bul
    function getActiveTabId() {
      var activeTab = tabStrip.select();
      if (!activeTab) return null;
      
      var activeTabElement = $(activeTab);
      var activeTabId = activeTabElement.attr("data-tab-id");
      var activeTabText = activeTabElement.text() || activeTabElement.html() || "";
      
      if (!activeTabId) {
        if (activeTabText.indexOf("Operasyon") >= 0) {
          activeTabId = "operasyon";
        } else if (activeTabText.indexOf("Kredi KartÄ±") >= 0 || activeTabText.indexOf("Kredi") >= 0) {
          activeTabId = "kredi-karti";
        } else if (activeTabText.indexOf("Cari Kart") >= 0) {
          activeTabId = "cari-kart";
        } else if (activeTabText.indexOf("Åžube") >= 0) {
          activeTabId = "sube-karti";
        } else if (activeTabText.indexOf("Banka") >= 0) {
          activeTabId = "banka";
        } else if (activeTabText.indexOf("Tanker") >= 0) {
          activeTabId = "tanker";
        } else if (activeTabText.indexOf("Fiyat") >= 0) {
          activeTabId = "fiyat-degisimi";
        }
      }
      
      return activeTabId;
    }
    
    // Tab ID'sine gÃ¶re tab index'ini bul (GitHub Ã§Ã¶zÃ¼mÃ¼)
    function getTabIndexById(tabId) {
      var items = tabStrip.items();
      var index = -1;
      for (var i = 0; i < items.length; i++) {
        var tab = $(items[i]);
        var currentTabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        // data-tab-id yoksa tabText'ten bul
        if (!currentTabId) {
          if (tabText.indexOf("Operasyon") >= 0) {
            currentTabId = "operasyon";
          } else if (tabText.indexOf("Kredi KartÄ±") >= 0 || tabText.indexOf("Kredi") >= 0) {
            currentTabId = "kredi-karti";
          } else if (tabText.indexOf("Cari Kart") >= 0) {
            currentTabId = "cari-kart";
        } else if (tabText.indexOf("Åžube") >= 0) {
          currentTabId = "sube-karti";
        } else if (tabText.indexOf("Banka") >= 0) {
            currentTabId = "banka";
          } else if (tabText.indexOf("Tanker") >= 0) {
            currentTabId = "tanker";
          } else if (tabText.indexOf("Fiyat") >= 0) {
            currentTabId = "fiyat-degisimi";
          }
        }
        
        if (currentTabId === tabId) {
          index = i;
          break;
        }
      }
      return index;
    }
    
    // Tab kapatÄ±ldÄ±ÄŸÄ±nda solundaki tab'Ä± bul ve gÃ¶ster
    function showNextTabAfterClose(closedTabIndex, wasActiveTab) {
      setTimeout(function() {
        var remainingTabs = tabStrip.items();
        var remainingTabsCount = remainingTabs.length;
        console.log("Kalan tab sayÄ±sÄ±:", remainingTabsCount, "KapatÄ±lan tab index:", closedTabIndex, "Aktif tab mÄ±ydÄ±:", wasActiveTab);
        
        if (remainingTabsCount === 0) {
          // HiÃ§ tab kalmadÄ± â†’ Lobiye dÃ¶n
          console.log("TÃ¼m tab'lar kapandÄ±, lobiye dÃ¶nÃ¼lÃ¼yor...");
          showPageOnly(null);
          setActiveRibbonButton(null);
        } else {
          // Aktif tab kapatÄ±ldÄ±ysa â†’ Solundaki tab'Ä± gÃ¶ster
          // Aktif olmayan tab kapatÄ±ldÄ±ysa â†’ Aktif tab'Ä± koru (sayfa deÄŸiÅŸmesin)
          if (wasActiveTab) {
            // Aktif tab kapatÄ±ldÄ± â†’ Solundaki tab'Ä± aktif yap
            var nextTabIndex;
            if (closedTabIndex > 0) {
              // Solunda tab var â†’ Solundaki tab'Ä± gÃ¶ster
              nextTabIndex = closedTabIndex - 1;
            } else {
              // En soldaki tab kapatÄ±ldÄ± â†’ En soldaki tab'Ä± gÃ¶ster (ÅŸimdi index 0)
              nextTabIndex = 0;
            }
            
            // Index sÄ±nÄ±rlarÄ±nÄ± kontrol et
            if (nextTabIndex >= remainingTabsCount) {
              nextTabIndex = remainingTabsCount - 1;
            }
            
            var nextTab = remainingTabs[nextTabIndex];
            
            if (nextTab) {
              var nextTabElement = $(nextTab);
              var nextTabId = nextTabElement.attr("data-tab-id");
              var nextTabText = nextTabElement.text() || nextTabElement.html() || "";
              
              // data-tab-id yoksa tabText'ten bul
              if (!nextTabId) {
                if (nextTabText.indexOf("Operasyon") >= 0) {
                  nextTabId = "operasyon";
                } else if (nextTabText.indexOf("Kredi KartÄ±") >= 0 || nextTabText.indexOf("Kredi") >= 0) {
                  nextTabId = "kredi-karti";
                } else if (nextTabText.indexOf("Cari Kart") >= 0) {
                  nextTabId = "cari-kart";
                } else if (nextTabText.indexOf("Banka") >= 0) {
                  nextTabId = "banka";
                } else if (nextTabText.indexOf("Tanker") >= 0) {
                  nextTabId = "tanker";
                } else if (nextTabText.indexOf("Fiyat") >= 0) {
                  nextTabId = "fiyat-degisimi";
                }
              }
              
              if (nextTabId) {
                console.log("Aktif tab kapatÄ±ldÄ±, solundaki tab gÃ¶steriliyor:", nextTabId, "Index:", nextTabIndex);
                // Aktif tab kapatÄ±ldÄ±ÄŸÄ±nda select event'ini ignore et (Ã§Ã¼nkÃ¼ manuel olarak select yapÄ±yoruz)
                ignoreSelectEvent = true;
                tabStrip.select(nextTabIndex);
                showPageOnly(nextTabId);
                ignoreSelectEvent = false;
              } else {
                console.log("Solundaki tab ID bulunamadÄ±, lobiye dÃ¶nÃ¼lÃ¼yor...");
                showPageOnly(null);
              }
            } else {
              console.log("Solundaki tab bulunamadÄ±, lobiye dÃ¶nÃ¼lÃ¼yor...");
              showPageOnly(null);
            }
          } else {
            // Aktif olmayan tab kapatÄ±ldÄ± â†’ Aktif tab'Ä± koru, sayfa deÄŸiÅŸmesin
            console.log("Aktif olmayan tab kapatÄ±ldÄ±, aktif tab korunuyor...");
            var currentActiveTab = tabStrip.select();
            var remainingTabsArray = tabStrip.items();
            var currentActiveTabIndex = -1;
            for (var j = 0; j < remainingTabsArray.length; j++) {
              if ($(remainingTabsArray[j])[0] === $(currentActiveTab)[0]) {
                currentActiveTabIndex = j;
                break;
              }
            }
            
            if (currentActiveTabIndex >= 0 && currentActiveTabIndex < remainingTabsCount) {
              var activeTabElement = $(currentActiveTab);
              var activeTabId = activeTabElement.attr("data-tab-id");
              var activeTabText = activeTabElement.text() || activeTabElement.html() || "";
              
              // data-tab-id yoksa tabText'ten bul
              if (!activeTabId) {
                if (activeTabText.indexOf("Operasyon") >= 0) {
                  activeTabId = "operasyon";
                } else if (activeTabText.indexOf("Kredi KartÄ±") >= 0 || activeTabText.indexOf("Kredi") >= 0) {
                  activeTabId = "kredi-karti";
                } else if (activeTabText.indexOf("Cari Kart") >= 0) {
                  activeTabId = "cari-kart";
                } else if (activeTabText.indexOf("Banka") >= 0) {
                  activeTabId = "banka";
                } else if (activeTabText.indexOf("Tanker") >= 0) {
                  activeTabId = "tanker";
                } else if (activeTabText.indexOf("Fiyat") >= 0) {
                  activeTabId = "fiyat-degisimi";
                }
              }
              
              if (activeTabId) {
                console.log("Aktif tab korunuyor:", activeTabId);
                showPageOnly(activeTabId);
              }
            }
          }
          
          setActiveRibbonButton(null);
        }
        
        // Flag'i her zaman sÄ±fÄ±rla (iÅŸlem bittikten sonra)
        ignoreSelectEvent = false;
      }, 50);
    }
    
    // TÃ¼m sayfalarÄ± gizle, sadece belirtilen sayfayÄ± gÃ¶ster
    function showPageOnly(pageId) {
      // Body class'larÄ±nÄ± temizle
      $('body').removeClass('operasyon-sayfasi-acik kredi-karti-sayfasi-acik cari-kart-sayfasi-acik firma-tanimlari-sayfasi-acik sube-karti-sayfasi-acik banka-sayfasi-acik tanker-sayfasi-acik fiyat-degisimi-sayfasi-acik');
      
      // TÃ¼m sayfalarÄ± gizle
      $('#main-content-operasyon').hide();
      $('#main-content-kredi-karti').hide();
      $('#main-content-cari-kart').hide();
      $('#main-content-firma-tanimlari').hide();
      $('#main-content-banka').hide();
      $('#main-content-sube-karti').hide();
      $('#main-content-tanker').hide();
      $('#main-content-fiyat-degisimi').hide();
      
      // Belirtilen sayfayÄ± gÃ¶ster
      if (pageId === 'operasyon') {
        $('body').addClass('operasyon-sayfasi-acik');
        $('#main-content-operasyon').show();
        $('#title-bar').hide();
      } else if (pageId === 'kredi-karti') {
        $('body').addClass('kredi-karti-sayfasi-acik');
        $('#main-content-kredi-karti').show();
        $('#title-bar').hide();
      } else if (pageId === 'cari-kart') {
        $('body').addClass('cari-kart-sayfasi-acik');
        $('#main-content-cari-kart').show();
        $('#title-bar').hide();
      } else if (pageId === 'firma-tanimlari') {
        $('body').addClass('firma-tanimlari-sayfasi-acik');
        $('#main-content-firma-tanimlari').show();
        $('#title-bar').hide();
        if (window.initFirmaTanimlariGrid) {
          setTimeout(window.initFirmaTanimlariGrid, 0);
        }
      } else if (pageId === 'sube-karti') {
        $('body').addClass('sube-karti-sayfasi-acik');
        $('#main-content-sube-karti').show();
        $('#title-bar').hide();
        if (window.updateSubeKartiView) {
          setTimeout(window.updateSubeKartiView, 0);
        }
      } else if (pageId === 'banka') {
        $('body').addClass('banka-sayfasi-acik');
        $('#main-content-banka').show();
        $('#title-bar').hide();
      } else if (pageId === 'tanker') {
        $('body').addClass('tanker-sayfasi-acik');
        $('#main-content-tanker').show();
        $('#title-bar').hide();
      } else if (pageId === 'fiyat-degisimi') {
        $('body').addClass('fiyat-degisimi-sayfasi-acik');
        $('#main-content-fiyat-degisimi').show();
        $('#title-bar').hide();
      } else {
        // HiÃ§bir sayfa aÃ§Ä±k deÄŸilse lobi gÃ¶ster
        $('#title-bar').show();
      }
    }
    
    // Sadece Operasyon sayfasÄ± iÃ§in basit tab mantÄ±ÄŸÄ±
    function openOperasyonTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }
      
      // Tab zaten var mÄ± kontrol et - TÃ¼m tab'larÄ± kontrol et
      var allTabs = tabStrip.items();
      var operasyonTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        // data-tab-id veya iÃ§erikte "Operasyon" kelimesi varsa
        if (tabId === "operasyon" || tabText.indexOf("Operasyon") >= 0) {
          operasyonTabIndex = i;
          break;
        }
      }
      
      // Tab zaten varsa sadece aktif yap
      if (operasyonTabIndex >= 0) {
        console.log("Operasyon tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(operasyonTabIndex);
        showPageOnly('operasyon');
        return;
      }
      
      // Yeni tab ekle
      console.log("Yeni operasyon tab'Ä± ekleniyor...");
      
      // Ã–NCE sayfayÄ± gÃ¶ster (tab eklenmeden Ã¶nce)
      showPageOnly('operasyon');
      
      var tabContent = 'â›½ Operasyon SayfasÄ± <span class="tab-close-operasyon" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';
      
      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });
      
      // Tab elementine data-tab-id ekle
      setTimeout(function() {
        var allTabsArray = tabStrip.items();
        var addedTab = allTabsArray[allTabsArray.length - 1];
        $(addedTab).attr("data-tab-id", "operasyon");
        
        // Event delegation zaten document ready'de tanÄ±mlÄ±, burada ekstra bir ÅŸey yapmaya gerek yok
        
        // Tab'Ä± aktif yap
        var tabIndex = allTabsArray.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }
    
    // Operasyon tab'Ä±nÄ± kapat
    function closeOperasyonTab() {
      console.log("closeOperasyonTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }
      
      // Tab'Ä± bul ve kapat
      var allTabs = tabStrip.items();
      var operasyonTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "operasyon" || tabText.indexOf("Operasyon") >= 0) {
          operasyonTabIndex = i;
          break;
        }
      }
      
      // KapatÄ±lmadan Ã¶nce aktif tab mÄ± kontrol et ve aktif tab ID'sini kaydet
      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (operasyonTabIndex >= 0 && operasyonTabIndex === activeTabIndex);
      
      if (operasyonTabIndex < 0) {
        console.log("Operasyon tab'Ä± bulunamadÄ±!");
        return;
      }
      
      // Pasif tab kapatÄ±lÄ±yorsa aktif tab ID'sini kaydet
      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true; // Select event'ini ignore et
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }
      
      // GitHub Ã§Ã¶zÃ¼mÃ¼: setTimeout ile remove() Ã§aÄŸrÄ±sÄ±nÄ± ertele
      setTimeout(function() {
        try {
          console.log("Operasyon tab'Ä± kapatÄ±lÄ±yor... Index:", operasyonTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(operasyonTabIndex);
          console.log("Tab kapatÄ±ldÄ±, kalan tab sayÄ±sÄ±:", tabStrip.items().length);
          
          // Pasif tab kapatÄ±ldÄ±ysa aktif tab'Ä± manuel olarak tekrar seÃ§
          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true; // Manuel seÃ§im sÄ±rasÄ±nda select event'ini ignore et
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            // Aktif tab kapatÄ±ldÄ±ysa solundaki tab'Ä± gÃ¶ster
            showNextTabAfterClose(operasyonTabIndex, wasActiveTab);
          }
        } catch(error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }
    
    // Kredi kartÄ± tab'Ä±nÄ± aÃ§ - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function openKrediKartiTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }
      
      // Tab zaten var mÄ± kontrol et - TÃ¼m tab'larÄ± kontrol et
      var allTabs = tabStrip.items();
      var krediKartiTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        // data-tab-id veya iÃ§erikte "Kredi KartÄ±" kelimesi varsa
        if (tabId === "kredi-karti" || tabText.indexOf("Kredi KartÄ±") >= 0) {
          krediKartiTabIndex = i;
          break;
        }
      }
      
      // Tab zaten varsa sadece aktif yap
      if (krediKartiTabIndex >= 0) {
        console.log("Kredi KartÄ± tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(krediKartiTabIndex);
        showPageOnly('kredi-karti');
        return;
      }
      
      // Yeni tab ekle
      console.log("Yeni kredi kartÄ± tab'Ä± ekleniyor...");
      
      // Ã–NCE sayfayÄ± gÃ¶ster (tab eklenmeden Ã¶nce)
      showPageOnly('kredi-karti');
      
      var tabContent = 'ðŸ’³ Kredi KartÄ± <span class="tab-close-kredi-karti" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';
      
      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });
      
      // Tab elementine data-tab-id ekle
      setTimeout(function() {
        var allTabsArray = tabStrip.items();
        var addedTab = allTabsArray[allTabsArray.length - 1];
        $(addedTab).attr("data-tab-id", "kredi-karti");
        
        // Event delegation zaten document ready'de tanÄ±mlÄ±, burada ekstra bir ÅŸey yapmaya gerek yok
        
        // Tab'Ä± aktif yap
        var tabIndex = allTabsArray.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }
    
    // Kredi kartÄ± tab'Ä±nÄ± kapat - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function closeKrediKartiTab() {
      console.log("closeKrediKartiTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }
      
      // Tab'Ä± bul ve kapat
      var allTabs = tabStrip.items();
      var krediKartiTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "kredi-karti" || tabText.indexOf("Kredi KartÄ±") >= 0) {
          krediKartiTabIndex = i;
          break;
        }
      }
      
      // KapatÄ±lmadan Ã¶nce aktif tab mÄ± kontrol et ve aktif tab ID'sini kaydet
      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (krediKartiTabIndex >= 0 && krediKartiTabIndex === activeTabIndex);
      
      if (krediKartiTabIndex < 0) {
        console.log("Kredi KartÄ± tab'Ä± bulunamadÄ±!");
        return;
      }
      
      // Pasif tab kapatÄ±lÄ±yorsa aktif tab ID'sini kaydet
      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true;
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }
      
      // GitHub Ã§Ã¶zÃ¼mÃ¼: setTimeout ile remove() Ã§aÄŸrÄ±sÄ±nÄ± ertele
      setTimeout(function() {
        try {
          console.log("Kredi KartÄ± tab'Ä± kapatÄ±lÄ±yor... Index:", krediKartiTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(krediKartiTabIndex);
          
          // Pasif tab kapatÄ±ldÄ±ysa aktif tab'Ä± manuel olarak tekrar seÃ§
          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true;
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            showNextTabAfterClose(krediKartiTabIndex, wasActiveTab);
          }
        } catch(error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }
    
    // Cari kart tab'Ä±nÄ± aÃ§ - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function openCariKartTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var cariKartTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "cari-kart" || tabText.indexOf("Cari Kart") >= 0) {
          cariKartTabIndex = i;
          break;
        }
      }
      
      if (cariKartTabIndex >= 0) {
        console.log("Cari Kart tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(cariKartTabIndex);
        showPageOnly('cari-kart');
        return;
      }
      
      console.log("Yeni cari kart tab'Ä± ekleniyor...");
      showPageOnly('cari-kart');
      
      var tabContent = 'ðŸ‘¤ Cari Kartlar <span class="tab-close-cari-kart" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';
      
      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });
      
      setTimeout(function() {
        var allTabsArray = tabStrip.items();
        var addedTab = allTabsArray[allTabsArray.length - 1];
        $(addedTab).attr("data-tab-id", "cari-kart");
        var tabIndex = allTabsArray.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }
    
    // Cari kart tab'Ä±nÄ± kapat - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function closeCariKartTab() {
      console.log("closeCariKartTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var cariKartTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "cari-kart" || tabText.indexOf("Cari Kart") >= 0) {
          cariKartTabIndex = i;
          break;
        }
      }
      
      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (cariKartTabIndex >= 0 && cariKartTabIndex === activeTabIndex);
      
      if (cariKartTabIndex < 0) {
        console.log("Cari Kart tab'Ä± bulunamadÄ±!");
        return;
      }
      
      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true;
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }
      
      setTimeout(function() {
        try {
          console.log("Cari Kart tab'Ä± kapatÄ±lÄ±yor... Index:", cariKartTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(cariKartTabIndex);
          
          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true;
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            showNextTabAfterClose(cariKartTabIndex, wasActiveTab);
          }
        } catch (error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }

    // Firma TanÄ±mlarÄ± tab'Ä±nÄ± aÃ§
    function openFirmaTanimlariTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var firmaTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "firma-tanimlari" || tabText.indexOf("Firma") >= 0) {
          firmaTabIndex = i;
          break;
        }
      }
      
      if (firmaTabIndex >= 0) {
        console.log("Firma TanÄ±mlarÄ± tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(firmaTabIndex);
        showPageOnly('firma-tanimlari');
        return;
      }
      
      console.log("Yeni firma tanÄ±mlarÄ± tab'Ä± ekleniyor...");
      showPageOnly('firma-tanimlari');
      
      var tabContent = 'ðŸ¢ Firma TanÄ±mlarÄ± <span class="tab-close-firma-tanimlari" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';
      
      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });
      
      setTimeout(function() {
        var allTabsArray = tabStrip.items();
        var addedTab = allTabsArray[allTabsArray.length - 1];
        $(addedTab).attr("data-tab-id", "firma-tanimlari");
        var tabIndex = allTabsArray.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }

    // Firma TanÄ±mlarÄ± tab'Ä±nÄ± kapat
    function closeFirmaTanimlariTab() {
      console.log("closeFirmaTanimlariTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var firmaTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "firma-tanimlari" || tabText.indexOf("Firma") >= 0) {
          firmaTabIndex = i;
          break;
        }
      }
      
      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (firmaTabIndex >= 0 && firmaTabIndex === activeTabIndex);
      
      if (firmaTabIndex < 0) {
        console.log("Firma TanÄ±mlarÄ± tab'Ä± bulunamadÄ±!");
        return;
      }
      
      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true;
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }
      
      setTimeout(function() {
        try {
          console.log("Firma TanÄ±mlarÄ± tab'Ä± kapatÄ±lÄ±yor... Index:", firmaTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(firmaTabIndex);
          
          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true;
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            showNextTabAfterClose(firmaTabIndex, wasActiveTab);
          }
        } catch(error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }

    // Åžube KartÄ± tab'Ä±nÄ± aÃ§
    function openSubeKartiTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }

      var allTabs = tabStrip.items();
      var subeTabIndex = -1;

      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";

        if (tabId === "sube-karti" || tabText.indexOf("Åžube") >= 0) {
          subeTabIndex = i;
          break;
        }
      }

      if (subeTabIndex >= 0) {
        console.log("Åžube KartÄ± tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(subeTabIndex);
        showPageOnly('sube-karti');
        return;
      }

      console.log("Yeni Åžube KartÄ± tab'Ä± ekleniyor...");
      showPageOnly('sube-karti');

      var tabContent = 'ðŸ¬ Åžube KartÄ± <span class="tab-close-sube-karti" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';

      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });

      setTimeout(function() {
        var allTabsArray = tabStrip.items();
        var addedTab = allTabsArray[allTabsArray.length - 1];
        $(addedTab).attr("data-tab-id", "sube-karti");
        var tabIndex = allTabsArray.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }

    // Åžube KartÄ± tab'Ä±nÄ± kapat
    function closeSubeKartiTab() {
      console.log("closeSubeKartiTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }

      var allTabs = tabStrip.items();
      var subeTabIndex = -1;

      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";

        if (tabId === "sube-karti" || tabText.indexOf("Åžube") >= 0) {
          subeTabIndex = i;
          break;
        }
      }

      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (subeTabIndex >= 0 && subeTabIndex === activeTabIndex);

      if (subeTabIndex < 0) {
        console.log("Åžube KartÄ± tab'Ä± bulunamadÄ±!");
        return;
      }

      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true;
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }

      setTimeout(function() {
        try {
          console.log("Åžube KartÄ± tab'Ä± kapatÄ±lÄ±yor... Index:", subeTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(subeTabIndex);

          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true;
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            showNextTabAfterClose(subeTabIndex, wasActiveTab);
          }
        } catch (error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }
    
    // Banka tab'Ä±nÄ± aÃ§ - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function openBankaTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var bankaTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "banka" || tabText.indexOf("Banka") >= 0) {
          bankaTabIndex = i;
          break;
        }
      }
      
      if (bankaTabIndex >= 0) {
        console.log("Banka tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(bankaTabIndex);
        showPageOnly('banka');
        return;
      }
      
      console.log("Yeni banka tab'Ä± ekleniyor...");
      showPageOnly('banka');
      
      var tabContent = 'ðŸ¦ Banka <span class="tab-close-banka" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';
      
      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });
      
      setTimeout(function() {
        var allTabsArray = tabStrip.items();
        var addedTab = allTabsArray[allTabsArray.length - 1];
        $(addedTab).attr("data-tab-id", "banka");
        var tabIndex = allTabsArray.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }
    
    // Banka tab'Ä±nÄ± kapat - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function closeBankaTab() {
      console.log("closeBankaTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var bankaTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "banka" || tabText.indexOf("Banka") >= 0) {
          bankaTabIndex = i;
          break;
        }
      }
      
      // KapatÄ±lmadan Ã¶nce aktif tab mÄ± kontrol et ve aktif tab ID'sini kaydet
      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (bankaTabIndex >= 0 && bankaTabIndex === activeTabIndex);
      
      if (bankaTabIndex < 0) {
        console.log("Banka tab'Ä± bulunamadÄ±!");
        return;
      }
      
      // Pasif tab kapatÄ±lÄ±yorsa aktif tab ID'sini kaydet
      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true;
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }
      
      // GitHub Ã§Ã¶zÃ¼mÃ¼: setTimeout ile remove() Ã§aÄŸrÄ±sÄ±nÄ± ertele
      setTimeout(function() {
        try {
          console.log("Banka tab'Ä± kapatÄ±lÄ±yor... Index:", bankaTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(bankaTabIndex);
          
          // Pasif tab kapatÄ±ldÄ±ysa aktif tab'Ä± manuel olarak tekrar seÃ§
          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true;
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            showNextTabAfterClose(bankaTabIndex, wasActiveTab);
          }
        } catch(error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }
    
    // Tanker tab'Ä±nÄ± aÃ§ - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function openTankerTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var tankerTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "tanker" || tabText.indexOf("Tanker") >= 0) {
          tankerTabIndex = i;
          break;
        }
      }
      
      if (tankerTabIndex >= 0) {
        console.log("Tanker tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(tankerTabIndex);
        showPageOnly('tanker');
        return;
      }
      
      console.log("Yeni tanker tab'Ä± ekleniyor...");
      showPageOnly('tanker');
      
      var tabContent = 'ðŸš› Tanker <span class="tab-close-tanker" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';
      
      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });
      
      setTimeout(function() {
        var allTabsArray = tabStrip.items();
        var addedTab = allTabsArray[allTabsArray.length - 1];
        $(addedTab).attr("data-tab-id", "tanker");
        var tabIndex = allTabsArray.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }
    
    // Tanker tab'Ä±nÄ± kapat - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function closeTankerTab() {
      console.log("closeTankerTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var tankerTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "tanker" || tabText.indexOf("Tanker") >= 0) {
          tankerTabIndex = i;
          break;
        }
      }
      
      // KapatÄ±lmadan Ã¶nce aktif tab mÄ± kontrol et ve aktif tab ID'sini kaydet
      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (tankerTabIndex >= 0 && tankerTabIndex === activeTabIndex);
      
      if (tankerTabIndex < 0) {
        console.log("Tanker tab'Ä± bulunamadÄ±!");
        return;
      }
      
      // Pasif tab kapatÄ±lÄ±yorsa aktif tab ID'sini kaydet
      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true;
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }
      
      // GitHub Ã§Ã¶zÃ¼mÃ¼: setTimeout ile remove() Ã§aÄŸrÄ±sÄ±nÄ± ertele
      setTimeout(function() {
        try {
          console.log("Tanker tab'Ä± kapatÄ±lÄ±yor... Index:", tankerTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(tankerTabIndex);
          
          // Pasif tab kapatÄ±ldÄ±ysa aktif tab'Ä± manuel olarak tekrar seÃ§
          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true;
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            showNextTabAfterClose(tankerTabIndex, wasActiveTab);
          }
        } catch(error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }
    
    // Fiyat deÄŸiÅŸimi tab'Ä±nÄ± aÃ§ - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function openFiyatDegisimiTab() {
      if (!tabStrip) {
        console.error("TabStrip baÅŸlatÄ±lmamÄ±ÅŸ!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var fiyatDegisimiTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "fiyat-degisimi" || tabText.indexOf("Fiyat") >= 0) {
          fiyatDegisimiTabIndex = i;
          break;
        }
      }
      
      if (fiyatDegisimiTabIndex >= 0) {
        console.log("Fiyat DeÄŸiÅŸimi tab'Ä± zaten var, aktif yapÄ±lÄ±yor...");
        tabStrip.select(fiyatDegisimiTabIndex);
        showPageOnly('fiyat-degisimi');
        return;
      }
      
      console.log("Yeni fiyat deÄŸiÅŸimi tab'Ä± ekleniyor...");
      showPageOnly('fiyat-degisimi');
      
      var tabContent = 'ðŸ’° Fiyat DeÄŸiÅŸimi <span class="tab-close-fiyat-degisimi" style="margin-left:6px;cursor:pointer;padding:2px 4px;border-radius:4px;font-weight:bold;">Ã—</span>';
      
      tabStrip.append({
        text: tabContent,
        content: '<div></div>',
        encoded: false
      });
      
      setTimeout(function() {
        var allTabs = tabStrip.items();
        var addedTab = allTabs[allTabs.length - 1];
        $(addedTab).attr("data-tab-id", "fiyat-degisimi");
        var tabIndex = allTabs.length - 1;
        if (tabIndex >= 0) {
          tabStrip.select(tabIndex);
        }
      }, 100);
    }
    
    // Fiyat deÄŸiÅŸimi tab'Ä±nÄ± kapat - Operasyon kodlarÄ±nÄ±n birebir aynÄ±sÄ±
    function closeFiyatDegisimiTab() {
      console.log("closeFiyatDegisimiTab Ã§aÄŸrÄ±ldÄ±");
      if (!tabStrip) {
        console.error("TabStrip yok!");
        return;
      }
      
      var allTabs = tabStrip.items();
      var fiyatDegisimiTabIndex = -1;
      
      for (var i = 0; i < allTabs.length; i++) {
        var tab = $(allTabs[i]);
        var tabId = tab.attr("data-tab-id");
        var tabText = tab.text() || tab.html() || "";
        
        if (tabId === "fiyat-degisimi" || tabText.indexOf("Fiyat") >= 0) {
          fiyatDegisimiTabIndex = i;
          break;
        }
      }
      
      // KapatÄ±lmadan Ã¶nce aktif tab mÄ± kontrol et ve aktif tab ID'sini kaydet
      var activeTab = tabStrip.select();
      var allTabsArray = tabStrip.items();
      var activeTabIndex = -1;
      for (var j = 0; j < allTabsArray.length; j++) {
        if ($(allTabsArray[j])[0] === $(activeTab)[0]) {
          activeTabIndex = j;
          break;
        }
      }
      var wasActiveTab = (fiyatDegisimiTabIndex >= 0 && fiyatDegisimiTabIndex === activeTabIndex);
      
      if (fiyatDegisimiTabIndex < 0) {
        console.log("Fiyat DeÄŸiÅŸimi tab'Ä± bulunamadÄ±!");
        return;
      }
      
      // Pasif tab kapatÄ±lÄ±yorsa aktif tab ID'sini kaydet
      if (!wasActiveTab) {
        activeTabIdToKeep = getActiveTabId();
        ignoreSelectEvent = true;
        console.log("Pasif tab kapatÄ±lÄ±yor, aktif tab korunacak:", activeTabIdToKeep);
      }
      
      // GitHub Ã§Ã¶zÃ¼mÃ¼: setTimeout ile remove() Ã§aÄŸrÄ±sÄ±nÄ± ertele
      setTimeout(function() {
        try {
          console.log("Fiyat DeÄŸiÅŸimi tab'Ä± kapatÄ±lÄ±yor... Index:", fiyatDegisimiTabIndex, "Aktif tab mÄ±:", wasActiveTab);
          tabStrip.remove(fiyatDegisimiTabIndex);
          
          // Pasif tab kapatÄ±ldÄ±ysa aktif tab'Ä± manuel olarak tekrar seÃ§
          if (!wasActiveTab && activeTabIdToKeep) {
            var desiredTabIndex = getTabIndexById(activeTabIdToKeep);
            if (desiredTabIndex >= 0) {
              console.log("Aktif tab manuel olarak tekrar seÃ§iliyor:", activeTabIdToKeep, "Index:", desiredTabIndex);
              ignoreSelectEvent = true;
              tabStrip.select(desiredTabIndex);
              showPageOnly(activeTabIdToKeep);
              ignoreSelectEvent = false;
              activeTabIdToKeep = null;
            }
          } else if (wasActiveTab) {
            showNextTabAfterClose(fiyatDegisimiTabIndex, wasActiveTab);
          }
        } catch(error) {
          console.error("Tab kapatÄ±lÄ±rken hata:", error);
          ignoreSelectEvent = false;
          activeTabIdToKeep = null;
        }
      }, 0);
    }

    
    // Ribbon butonlarÄ±na tÄ±klama - TÃ¼m sayfalar iÃ§in
    $(document).on("click", ".ribbon-button", function(e) {
      e.preventDefault();
      e.stopPropagation();
      
      var pageName = $(this).data('page');
      console.log("Ribbon buton tÄ±klandÄ±, pageName:", pageName);
      
      // Operasyon sayfasÄ±
      if (pageName === 'operasyon_sayfasi' || pageName === 'operasyon') {
        console.log("Operasyon sayfasÄ± aÃ§Ä±lÄ±yor...");
        openOperasyonTab();
        setActiveRibbonButton(pageName);
      }
      // Kredi KartÄ± sayfasÄ±
      else if (pageName === 'kredi_karti' || pageName === 'kredi-karti' || pageName === 'kredi_kart') {
        console.log("Kredi KartÄ± sayfasÄ± aÃ§Ä±lÄ±yor...");
        openKrediKartiTab();
        setActiveRibbonButton(pageName);
      }
      // Cari Kart sayfasÄ± (devre dÄ±ÅŸÄ±)
      else if (pageName === 'cari_kart' || pageName === 'cari-kart' || pageName === 'carikart') {
        console.log("Cari Kart sayfasÄ± devre dÄ±ÅŸÄ±.");
      }
      // Banka sayfasÄ±
      else if (pageName === 'banka') {
        console.log("Banka sayfasÄ± aÃ§Ä±lÄ±yor...");
        openBankaTab();
        setActiveRibbonButton(pageName);
      }
      // Tanker sayfasÄ±
      else if (pageName === 'tanker') {
        console.log("Tanker sayfasÄ± aÃ§Ä±lÄ±yor...");
        openTankerTab();
        setActiveRibbonButton(pageName);
      }
      // Fiyat DeÄŸiÅŸimi sayfasÄ±
      else if (pageName === 'fiyat_degisimi' || pageName === 'fiyat-degisimi') {
        console.log("Fiyat DeÄŸiÅŸimi sayfasÄ± aÃ§Ä±lÄ±yor...");
        openFiyatDegisimiTab();
        setActiveRibbonButton(pageName);
      } else {
        // DiÄŸer sayfalar iÃ§in ÅŸimdilik bir ÅŸey yapma
        console.log("DiÄŸer sayfa:", pageName, "- Åžimdilik Ã§alÄ±ÅŸmÄ±yor");
      }
    });
    
    // duzeltGridBorderSorunu fonksiyonu - Grid border sorununu dÃ¼zeltir
    function duzeltGridBorderSorunu(gridSelector, gridWidth) {
      try {
        var $grid = $(gridSelector);
        if ($grid.length === 0) {
          console.warn("Grid bulunamadÄ±:", gridSelector);
          return;
        }
        
        // Grid container geniÅŸliÄŸini ayarla
        $grid.css({
          'width': gridWidth + 'px',
          'max-width': gridWidth + 'px',
          'min-width': gridWidth + 'px'
        });
        
        // Grid wrapper geniÅŸliÄŸini ayarla
        var $wrapper = $grid.closest('.k-grid-wrapper, .k-widget');
        if ($wrapper.length > 0) {
          $wrapper.css({
            'width': gridWidth + 'px',
            'max-width': gridWidth + 'px'
          });
        }
        
        console.log("Grid border sorunu dÃ¼zeltildi:", gridSelector, "GeniÅŸlik:", gridWidth + 'px');
      } catch(error) {
        console.error("duzeltGridBorderSorunu hatasÄ±:", error);
      }
    }
    
    // Global fonksiyon olarak tanÄ±mla
    window.duzeltGridBorderSorunu = duzeltGridBorderSorunu;
  </script>
  
  {% block extra_scripts %}{% endblock %}
</body>
</html>
